const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-BfXYNOYk.js","assets/rolldown-runtime-B6ubh40S.js"])))=>i.map(i=>d[i]);
import{o as e,s as t}from"./rolldown-runtime-B6ubh40S.js";import{a as n,i as r}from"../vendor/1-CH-8zZtd.js";import{Ln as i}from"./index-C8r3tZ1D.js";var a=t(n(),1);const o=a.createContext(null);function s(){let e=(0,a.useContext)(o)?.maps,t=(0,a.useContext)(D);return(0,a.useMemo)(()=>({...e,current:t?.map}),[e,t])}function c(e,t){let n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===a}function l(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e==`object`&&typeof t==`object`){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r of n)if(!t.hasOwnProperty(r)||!l(e[r],t[r]))return!1;return!0}return!1}function u(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function d(e,t){let n=t.viewState||t,r={};if(`longitude`in n&&`latitude`in n&&(n.longitude!==e.center.lng||n.latitude!==e.center.lat)){let t=e.center.constructor;r.center=new t(n.longitude,n.latitude)}return`zoom`in n&&n.zoom!==e.zoom&&(r.zoom=n.zoom),`bearing`in n&&n.bearing!==e.bearing&&(r.bearing=n.bearing),`pitch`in n&&n.pitch!==e.pitch&&(r.pitch=n.pitch),n.padding&&e.padding&&!l(n.padding,e.padding)&&(r.padding=n.padding),r}var f=[`type`,`source`,`source-layer`,`minzoom`,`maxzoom`,`filter`,`layout`];function p(e){if(!e)return null;if(typeof e==`string`||(`toJS`in e&&(e=e.toJS()),!e.layers))return e;let t={};for(let n of e.layers)t[n.id]=n;let n=e.layers.map(e=>{let n=null;`interactive`in e&&(n=Object.assign({},e),delete n.interactive);let r=t[e.ref];if(r){n||=Object.assign({},e),delete n.ref;for(let e of f)e in r&&(n[e]=r[e])}return n||e});return{...e,layers:n}}var m={version:8,sources:{},layers:[]},h={mousedown:`onMouseDown`,mouseup:`onMouseUp`,mouseover:`onMouseOver`,mousemove:`onMouseMove`,click:`onClick`,dblclick:`onDblClick`,mouseenter:`onMouseEnter`,mouseleave:`onMouseLeave`,mouseout:`onMouseOut`,contextmenu:`onContextMenu`,touchstart:`onTouchStart`,touchend:`onTouchEnd`,touchmove:`onTouchMove`,touchcancel:`onTouchCancel`},g={movestart:`onMoveStart`,move:`onMove`,moveend:`onMoveEnd`,dragstart:`onDragStart`,drag:`onDrag`,dragend:`onDragEnd`,zoomstart:`onZoomStart`,zoom:`onZoom`,zoomend:`onZoomEnd`,rotatestart:`onRotateStart`,rotate:`onRotate`,rotateend:`onRotateEnd`,pitchstart:`onPitchStart`,pitch:`onPitch`,pitchend:`onPitchEnd`},_={wheel:`onWheel`,boxzoomstart:`onBoxZoomStart`,boxzoomend:`onBoxZoomEnd`,boxzoomcancel:`onBoxZoomCancel`,resize:`onResize`,load:`onLoad`,render:`onRender`,idle:`onIdle`,remove:`onRemove`,data:`onData`,styledata:`onStyleData`,sourcedata:`onSourceData`,error:`onError`},v=[`minZoom`,`maxZoom`,`minPitch`,`maxPitch`,`maxBounds`,`projection`,`renderWorldCopies`],y=[`scrollZoom`,`boxZoom`,`dragRotate`,`dragPan`,`keyboard`,`doubleClickZoom`,`touchZoomRotate`,`touchPitch`],b=class e{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=e=>{let t=this.props[_[e.type]];t?t(e):e.type===`error`&&console.error(e.error)},this._onCameraEvent=e=>{if(this._internalUpdate)return;e.viewState=this._propsedCameraUpdate||u(this._map.transform);let t=this.props[g[e.type]];t&&t(e)},this._onCameraUpdate=e=>this._internalUpdate?e:(this._propsedCameraUpdate=u(e),d(e,this.props)),this._onPointerEvent=e=>{(e.type===`mousemove`||e.type===`mouseout`)&&this._updateHover(e);let t=this.props[h[e.type]];t&&(this.props.interactiveLayerIds&&e.type!==`mouseover`&&e.type!==`mouseout`&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}setProps(e){let t=this.props;this.props=e;let n=this._updateSettings(e,t),r=this._updateSize(e),i=this._updateViewState(e);this._updateStyle(e,t),this._updateStyleComponents(e),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){let r=e.savedMaps.pop();if(!r)return null;let i=r.map,a=i.getContainer();for(n.className=a.className;a.childNodes.length>0;)n.appendChild(a.childNodes[0]);i._container=n;let o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...t,styleDiffing:!1}),i.resize();let{initialViewState:s}=t;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s)),i.isStyleLoaded()?i.fire(`load`):i.once(`style.load`,()=>i.fire(`load`)),i._update(),r}_initialize(e){let{props:t}=this,{mapStyle:n=m}=t,r={...t,...t.initialViewState,container:e,style:p(n)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),t.gl){let e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}let a=new this._MapClass(r);for(let e in i.padding&&a.setPadding(i.padding),t.cursor&&(a.getCanvas().style.cursor=t.cursor),a.transformCameraUpdate=this._onCameraUpdate,a.on(`style.load`,()=>{this._styleComponents={light:a.getLight(),sky:a.getSky(),projection:a.getProjection?.(),terrain:a.getTerrain()},this._updateStyleComponents(this.props)}),a.on(`sourcedata`,()=>{this._updateStyleComponents(this.props)}),h)a.on(e,this._onPointerEvent);for(let e in g)a.on(e,this._onCameraEvent);for(let e in _)a.on(e,this._onEvent);this._map=a}recycle(){this.map.getContainer().querySelector(`[mapboxgl-children]`)?.remove(),e.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){let e=this._map;e.style&&(e._frame&&=(e._frame.cancel(),null),e._render())}_updateSize(e){let{viewState:t}=e;if(t){let e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e){let t=this._map,n=t.transform;if(!t.isMoving()){let r=d(n,e);if(Object.keys(r).length>0)return this._internalUpdate=!0,t.jumpTo(r),this._internalUpdate=!1,!0}return!1}_updateSettings(e,t){let n=this._map,r=!1;for(let i of v)i in e&&!l(e[i],t[i])&&(r=!0,n[`set${i[0].toUpperCase()}${i.slice(1)}`]?.call(n,e[i]));return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||``),e.mapStyle!==t.mapStyle){let{mapStyle:t=m,styleDiffing:n=!0}=e,r={diff:n};`localIdeographFontFamily`in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(p(t),r)}}_updateStyleComponents({light:e,projection:t,sky:n,terrain:r}){let i=this._map,a=this._styleComponents;i.style._loaded&&(e&&!l(e,a.light)&&(a.light=e,i.setLight(e)),t&&!l(t,a.projection)&&t!==a.projection?.type&&(a.projection=typeof t==`string`?{type:t}:t,i.setProjection?.(a.projection)),n&&!l(n,a.sky)&&(a.sky=n,i.setSky(n)),r!==void 0&&!l(r,a.terrain)&&(!r||i.getSource(r.source))&&(a.terrain=r,i.setTerrain(r)))}_updateHandlers(e,t){let n=this._map;for(let r of y){let i=e[r]??!0;l(i,t[r]??!0)||(i?n[r].enable(i):n[r].disable())}}_queryRenderedFeatures(e){let t=this._map,{interactiveLayerIds:n=[]}=this.props;try{return t.queryRenderedFeatures(e,{layers:n.filter(t.getLayer.bind(t))})}catch{return[]}}_updateHover(e){let{props:t}=this;if(t.interactiveLayerIds&&(t.onMouseMove||t.onMouseEnter||t.onMouseLeave)){let t=e.type,n=this._hoveredFeatures?.length>0,r=this._queryRenderedFeatures(e.point),i=r.length>0;!i&&n&&(e.type=`mouseleave`,this._onPointerEvent(e)),this._hoveredFeatures=r,i&&!n&&(e.type=`mouseenter`,this._onPointerEvent(e)),e.type=t}else this._hoveredFeatures=null}};b.savedMaps=[];var x=b,S=[`setMaxBounds`,`setMinZoom`,`setMaxZoom`,`setMinPitch`,`setMaxPitch`,`setRenderWorldCopies`,`setProjection`,`setStyle`,`addSource`,`removeSource`,`addLayer`,`removeLayer`,`setLayerZoomRange`,`setFilter`,`setPaintProperty`,`setLayoutProperty`,`setLight`,`setTerrain`,`setFog`,`remove`];function C(e){if(!e)return null;let t=e.map,n={getMap:()=>t};for(let e of w(t))!(e in n)&&!S.includes(e)&&(n[e]=t[e].bind(t));return n}function w(e){let t=new Set,n=e;for(;n;){for(let r of Object.getOwnPropertyNames(n))r[0]!==`_`&&typeof e[r]==`function`&&r!==`fire`&&r!==`setEventedParent`&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}var T=typeof document<`u`?a.useLayoutEffect:a.useEffect;function E(e,t){let{RTLTextPlugin:n,maxParallelImageRequests:r,workerCount:i,workerUrl:a}=t;if(n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()===`unavailable`){let{pluginUrl:t,lazy:r=!0}=typeof n==`string`?{pluginUrl:n}:n;e.setRTLTextPlugin(t,e=>{e&&console.error(e)},r)}r!==void 0&&e.setMaxParallelImageRequests(r),i!==void 0&&e.setWorkerCount(i),a!==void 0&&e.setWorkerUrl(a)}const D=a.createContext(null);function ee(t,n){let r=(0,a.useContext)(o),[s,c]=(0,a.useState)(null),l=(0,a.useRef)(),{current:u}=(0,a.useRef)({mapLib:null,map:null});(0,a.useEffect)(()=>{let n=t.mapLib,a=!0,o;return Promise.resolve(n||i(()=>import(`./maplibre-gl-BfXYNOYk.js`).then(e(1)),__vite__mapDeps([0,1]))).then(e=>{if(!a)return;if(!e)throw Error(`Invalid mapLib`);let n=`Map`in e?e:e.default;if(!n.Map)throw Error(`Invalid mapLib`);E(n,t),t.reuseMaps&&(o=x.reuse(t,l.current)),o||=new x(n.Map,t,l.current),u.map=C(o),u.mapLib=n,c(o),r?.onMapMount(u.map,t.id)}).catch(e=>{let{onError:n}=t;n?n({type:`error`,target:null,originalEvent:null,error:e}):console.error(e)}),()=>{a=!1,o&&(r?.onMapUnmount(t.id),t.reuseMaps?o.recycle():o.destroy())}},[]),T(()=>{s&&s.setProps(t)}),(0,a.useImperativeHandle)(n,()=>u.map,[s]);let d=(0,a.useMemo)(()=>({position:`relative`,width:`100%`,height:`100%`,...t.style}),[t.style]),f={height:`100%`};return a.createElement(`div`,{id:t.id,ref:l,style:d},s&&a.createElement(D.Provider,{value:u},a.createElement(`div`,{"mapboxgl-children":``,style:f},t.children)))}const te=a.forwardRef(ee);var ne=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function O(e,t){if(!e||!t)return;let n=e.style;for(let e in t){let r=t[e];Number.isFinite(r)&&!ne.test(e)?n[e]=`${r}px`:n[e]=r}}function k(e,t){if(e===t)return null;let n=A(e),r=A(t),i=[];for(let e of r)n.has(e)||i.push(e);for(let e of n)r.has(e)||i.push(e);return i.length===0?null:i}function A(e){return new Set(e?e.trim().split(/\s+/):[])}var j=r();const M=(0,a.memo)((0,a.forwardRef)((e,t)=>{let{map:n,mapLib:r}=(0,a.useContext)(D),i=(0,a.useRef)({props:e}),o=(0,a.useMemo)(()=>{let t=!1;a.Children.forEach(e.children,e=>{e&&(t=!0)});let n={...e,element:t?document.createElement(`div`):void 0},s=new r.Marker(n);return s.setLngLat([e.longitude,e.latitude]),s.getElement().addEventListener(`click`,e=>{i.current.props.onClick?.({type:`click`,target:s,originalEvent:e})}),s.on(`dragstart`,e=>{let t=e;t.lngLat=o.getLngLat(),i.current.props.onDragStart?.(t)}),s.on(`drag`,e=>{let t=e;t.lngLat=o.getLngLat(),i.current.props.onDrag?.(t)}),s.on(`dragend`,e=>{let t=e;t.lngLat=o.getLngLat(),i.current.props.onDragEnd?.(t)}),s},[]);(0,a.useEffect)(()=>(o.addTo(n.getMap()),()=>{o.remove()}),[]);let{longitude:s,latitude:l,offset:u,style:d,draggable:f=!1,popup:p=null,rotation:m=0,rotationAlignment:h=`auto`,pitchAlignment:g=`auto`}=e;(0,a.useEffect)(()=>{O(o.getElement(),d)},[d]),(0,a.useImperativeHandle)(t,()=>o,[]);let _=i.current.props;(o.getLngLat().lng!==s||o.getLngLat().lat!==l)&&o.setLngLat([s,l]),u&&!c(o.getOffset(),u)&&o.setOffset(u),o.isDraggable()!==f&&o.setDraggable(f),o.getRotation()!==m&&o.setRotation(m),o.getRotationAlignment()!==h&&o.setRotationAlignment(h),o.getPitchAlignment()!==g&&o.setPitchAlignment(g),o.getPopup()!==p&&o.setPopup(p);let v=k(_.className,e.className);if(v)for(let e of v)o.toggleClassName(e);return i.current.props=e,(0,j.createPortal)(e.children,o.getElement())}));var N=r();(0,a.memo)((0,a.forwardRef)((e,t)=>{let{map:n,mapLib:r}=(0,a.useContext)(D),i=(0,a.useMemo)(()=>document.createElement(`div`),[]),o=(0,a.useRef)({props:e}),s=(0,a.useMemo)(()=>{let t={...e},n=new r.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once(`open`,e=>{o.current.props.onOpen?.(e)}),n},[]);if((0,a.useEffect)(()=>{let e=e=>{o.current.props.onClose?.(e)};return s.on(`close`,e),s.setDOMContent(i).addTo(n.getMap()),()=>{s.off(`close`,e),s.isOpen()&&s.remove()}},[]),(0,a.useEffect)(()=>{O(s.getElement(),e.style)},[e.style]),(0,a.useImperativeHandle)(t,()=>s,[]),s.isOpen()){let t=o.current.props;(s.getLngLat().lng!==e.longitude||s.getLngLat().lat!==e.latitude)&&s.setLngLat([e.longitude,e.latitude]),e.offset&&!l(t.offset,e.offset)&&s.setOffset(e.offset),(t.anchor!==e.anchor||t.maxWidth!==e.maxWidth)&&(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth));let n=k(t.className,e.className);if(n)for(let e of n)s.toggleClassName(e);o.current.props=e}return(0,N.createPortal)(e.children,i)}));function P(e,t,n,r){let i=(0,a.useContext)(D),o=(0,a.useMemo)(()=>e(i),[]);return(0,a.useEffect)(()=>{let e=r||n||t,a=typeof t==`function`&&typeof n==`function`?t:null,s=typeof n==`function`?n:typeof t==`function`?t:null,{map:c}=i;return c.hasControl(o)||(c.addControl(o,e?.position),a&&a(i)),()=>{s&&s(i),c.hasControl(o)&&c.removeControl(o)}},[]),o}function F(e){let t=P(({mapLib:t})=>new t.AttributionControl(e),{position:e.position});return(0,a.useEffect)(()=>{O(t._container,e.style)},[e.style]),null}(0,a.memo)(F);function I(e){let t=P(({mapLib:t})=>new t.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return(0,a.useEffect)(()=>{O(t._controlContainer,e.style)},[e.style]),null}(0,a.memo)(I);function L(e,t){let n=(0,a.useRef)({props:e}),r=P(({mapLib:t})=>{let r=new t.GeolocateControl(e),i=r._setupUI;return r._setupUI=()=>{r._container.hasChildNodes()||i()},r.on(`geolocate`,e=>{n.current.props.onGeolocate?.(e)}),r.on(`error`,e=>{n.current.props.onError?.(e)}),r.on(`outofmaxbounds`,e=>{n.current.props.onOutOfMaxBounds?.(e)}),r.on(`trackuserlocationstart`,e=>{n.current.props.onTrackUserLocationStart?.(e)}),r.on(`trackuserlocationend`,e=>{n.current.props.onTrackUserLocationEnd?.(e)}),r},{position:e.position});return n.current.props=e,(0,a.useImperativeHandle)(t,()=>r,[]),(0,a.useEffect)(()=>{O(r._container,e.style)},[e.style]),null}(0,a.memo)((0,a.forwardRef)(L));function R(e){let t=P(({mapLib:t})=>new t.NavigationControl(e),{position:e.position});return(0,a.useEffect)(()=>{O(t._container,e.style)},[e.style]),null}(0,a.memo)(R);function z(e){let t=P(({mapLib:t})=>new t.ScaleControl(e),{position:e.position}),n=(0,a.useRef)(e),r=n.current;n.current=e;let{style:i}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&t.setUnit(e.unit),(0,a.useEffect)(()=>{O(t._container,i)},[i]),null}(0,a.memo)(z);function B(e){let t=P(({mapLib:t})=>new t.TerrainControl(e),{position:e.position});return(0,a.useEffect)(()=>{O(t._container,e.style)},[e.style]),null}(0,a.memo)(B);function V(e){let t=P(({mapLib:t})=>new t.LogoControl(e),{position:e.position});return(0,a.useEffect)(()=>{O(t._container,e.style)},[e.style]),null}(0,a.memo)(V);function H(e,t){if(!e)throw Error(t)}var U=0;function W(e,t,n){if(e.style&&e.style._loaded){let r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}function G(e,t,n){H(t.id===n.id,`source id changed`),H(t.type===n.type,`source type changed`);let r=``,i=0;for(let e in t)e!==`children`&&e!==`id`&&!l(n[e],t[e])&&(r=e,i++);if(!i)return;let a=t.type;if(a===`geojson`)e.setData(t.data);else if(a===`image`)e.updateImage({url:t.url,coordinates:t.coordinates});else switch(r){case`coordinates`:e.setCoordinates?.(t.coordinates);break;case`url`:e.setUrl?.(t.url);break;case`tiles`:e.setTiles?.(t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${r}`)}}function K(e){let t=(0,a.useContext)(D).map.getMap(),n=(0,a.useRef)(e),[,r]=(0,a.useState)(0),i=(0,a.useMemo)(()=>e.id||`jsx-source-${U++}`,[]);(0,a.useEffect)(()=>{if(t){let e=()=>setTimeout(()=>r(e=>e+1),0);return t.on(`styledata`,e),e(),()=>{if(t.off(`styledata`,e),t.style&&t.style._loaded&&t.getSource(i)){let e=t.getStyle()?.layers;if(e)for(let n of e)n.source===i&&t.removeLayer(n.id);t.removeSource(i)}}}},[t]);let o=t&&t.style&&t.getSource(i);return o?G(o,e,n.current):o=W(t,i,e),n.current=e,o&&a.Children.map(e.children,e=>e&&(0,a.cloneElement)(e,{source:i}))||null}function q(e,t,n,r){if(H(n.id===r.id,`layer id changed`),H(n.type===r.type,`layer type changed`),n.type===`custom`||r.type===`custom`)return;let{layout:i={},paint:a={},filter:o,minzoom:s,maxzoom:c,beforeId:u}=n;if(u!==r.beforeId&&e.moveLayer(t,u),i!==r.layout){let n=r.layout||{};for(let r in i)l(i[r],n[r])||e.setLayoutProperty(t,r,i[r]);for(let r in n)i.hasOwnProperty(r)||e.setLayoutProperty(t,r,void 0)}if(a!==r.paint){let n=r.paint||{};for(let r in a)l(a[r],n[r])||e.setPaintProperty(t,r,a[r]);for(let r in n)a.hasOwnProperty(r)||e.setPaintProperty(t,r,void 0)}l(o,r.filter)||e.setFilter(t,o),(s!==r.minzoom||c!==r.maxzoom)&&e.setLayerZoomRange(t,s,c)}function J(e,t,n){if(e.style&&e.style._loaded&&(!(`source`in n)||e.getSource(n.source))){let r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}var Y=0;function X(e){let t=(0,a.useContext)(D).map.getMap(),n=(0,a.useRef)(e),[,r]=(0,a.useState)(0),i=(0,a.useMemo)(()=>e.id||`jsx-layer-${Y++}`,[]);if((0,a.useEffect)(()=>{if(t){let e=()=>r(e=>e+1);return t.on(`styledata`,e),e(),()=>{t.off(`styledata`,e),t.style&&t.style._loaded&&t.getLayer(i)&&t.removeLayer(i)}}},[t]),t&&t.style&&t.getLayer(i))try{q(t,i,e,n.current)}catch(e){console.warn(e)}else J(t,i,e);return n.current=e,null}let Z=function(e){return e.North=`N`,e.South=`S`,e.East=`E`,e.West=`W`,e}({});function Q(e){if(!e?.GPSLatitude||!e?.GPSLongitude)return null;let t,n;try{t=typeof e.GPSLatitude==`number`?e.GPSLatitude:Number(e.GPSLatitude),n=typeof e.GPSLongitude==`number`?e.GPSLongitude:Number(e.GPSLongitude);let r=e.GPSLatitudeRef===`S`||e.GPSLatitudeRef===`South`?Z.South:Z.North,i=e.GPSLongitudeRef===`W`||e.GPSLongitudeRef===`West`?Z.West:Z.East;r===Z.South&&t>0&&(t=-t),i===Z.West&&n>0&&(n=-n);let a,o;return e.GPSAltitude&&typeof e.GPSAltitude==`number`&&(a=e.GPSAltitude,o=e.GPSAltitudeRef===1?`Below Sea Level`:`Above Sea Level`,o===`Below Sea Level`&&(a=-a)),re({latitude:t,longitude:n})?{latitude:t,longitude:n,latitudeRef:r,longitudeRef:i,altitude:a,altitudeRef:o}:null}catch(e){return console.warn(`Failed to parse GPS coordinates from EXIF:`,e),null}}function re(e){if(!e)return!1;let{latitude:t,longitude:n}=e;return typeof t==`number`&&typeof n==`number`&&!Number.isNaN(t)&&!Number.isNaN(n)&&t>=-90&&t<=90&&n>=-180&&n<=180}function ie(e){let{exif:t}=e;if(!t)return null;let n=Q(t);if(!n)return null;let{latitude:r,longitude:i,latitudeRef:a,longitudeRef:o,altitude:s,altitudeRef:c}=n;return{id:e.id,longitude:i,latitude:r,altitude:s,latitudeRef:a,longitudeRef:o,altitudeRef:c,photo:e}}function ae(e){return e.map(e=>ie(e)).filter(e=>e!==null)}function $(e){if(e.length===0)return null;let t=e.map(e=>e.latitude),n=e.map(e=>e.longitude),r=Math.min(...t),i=Math.max(...t),a=Math.min(...n),o=Math.max(...n);return{minLat:r,maxLat:i,minLng:a,maxLng:o,centerLat:(r+i)/2,centerLng:(a+o)/2,bounds:[[a,r],[o,i]]}}function oe(e){let t=$(e);if(!t)return{longitude:-122.4,latitude:37.8,zoom:10};let n=t.maxLat-t.minLat,r=t.maxLng-t.minLng,i=Math.max(n,r),a=10;return a=i<.01?15:i<.1?12:i<1?8:i<10?5:2,{longitude:t.centerLng,latitude:t.centerLat,zoom:a}}export{X as a,te as c,oe as i,s as l,Q as n,K as o,ae as r,M as s,$ as t};