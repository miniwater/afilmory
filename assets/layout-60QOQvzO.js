import{s as e}from"./rolldown-runtime-B6ubh40S.js";import{a as t,i as n,n as r,t as i}from"../vendor/1-CH-8zZtd.js";import{i as a,r as o}from"../vendor/2-BcTiMYgl.js";import{a as s,i as c,n as l,r as u,t as d}from"./UserAvatar-DpvyPRA2.js";import{$ as f,$t as p,At as m,B as h,Bt as g,Ct as _,D as v,Dn as y,Dt as b,E as x,Fn as S,Ft as C,Gt as w,H as T,Ht as E,In as D,It as O,Jt as k,Kt as A,Lt as j,Mn as M,Mt as N,Nn as P,Nt as F,O as I,On as L,Ot as R,Pn as z,Pt as ee,Q as B,Qt as V,R as H,Sn as U,T as W,Tn as te,Tt as ne,Ut as G,V as re,Vt as ie,Wt as ae,X as oe,Xt as se,Yt as ce,Z as le,Zt as ue,a as de,an as fe,at as pe,b as me,bn as he,cn as ge,dn as _e,en as ve,et as ye,fn as be,gn as xe,hn as Se,i as Ce,in as we,jt as Te,kn as Ee,ln as De,mn as Oe,mt as ke,n as Ae,nn as je,nt as Me,on as Ne,ot as Pe,pn as Fe,pt as Ie,qt as Le,rn as Re,rt as ze,s as Be,sn as Ve,tn as He,tt as Ue,un as We,wn as Ge,yn as Ke,z as qe,zt as Je}from"./index-CHP8jlSR.js";import"./core-DHkeLF_t.js";function Ye(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function Xe(e){if(!e||typeof e!=`object`)return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)===`[object Object]`:!1}function Ze(e,t,n){return Qe(e,t,void 0,void 0,void 0,void 0,n)}function Qe(e,t,n,r,i,a,o){let s=o(e,t,n,r,i,a);if(s!==void 0)return s;if(typeof e==typeof t)switch(typeof e){case`bigint`:case`string`:case`boolean`:case`symbol`:case`undefined`:return e===t;case`number`:return e===t||Object.is(e,t);case`function`:return e===t;case`object`:return $e(e,t,a,o)}return $e(e,t,a,o)}function $e(e,t,n,r){if(Object.is(e,t))return!0;let i=Se(e),a=Se(t);if(i===`[object Arguments]`&&(i=Ne),a===`[object Arguments]`&&(a=Ne),i!==a)return!1;switch(i){case De:return e.toString()===t.toString();case fe:return Ye(e.valueOf(),t.valueOf());case k:case se:case We:return Object.is(e.valueOf(),t.valueOf());case Ve:return e.source===t.source&&e.flags===t.flags;case ve:return e===t}n??=new Map;let o=n.get(e),s=n.get(t);if(o!=null&&s!=null)return o===t;n.set(e,t),n.set(t,e);try{switch(i){case we:if(e.size!==t.size)return!1;for(let[i,a]of e.entries())if(!t.has(i)||!Qe(a,t.get(i),i,e,t,n,r))return!1;return!0;case ge:{if(e.size!==t.size)return!1;let i=Array.from(e.values()),a=Array.from(t.values());for(let o=0;o<i.length;o++){let s=i[o],c=a.findIndex(i=>Qe(s,i,void 0,e,t,n,r));if(c===-1)return!1;a.splice(c,1)}return!0}case w:case Fe:case Oe:case _e:case be:case Le:case Re:case He:case je:case A:case V:case p:if(typeof Buffer<`u`&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Qe(e[i],t[i],i,e,t,n,r))return!1;return!0;case ae:return e.byteLength===t.byteLength?$e(new Uint8Array(e),new Uint8Array(t),n,r):!1;case ce:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:$e(new Uint8Array(e),new Uint8Array(t),n,r);case ue:return e.name===t.name&&e.message===t.message;case Ne:{if(!($e(e.constructor,t.constructor,n,r)||Xe(e)&&Xe(t)))return!1;let i=[...Object.keys(e),...xe(e)],a=[...Object.keys(t),...xe(t)];if(i.length!==a.length)return!1;for(let a=0;a<i.length;a++){let o=i[a],s=e[o];if(!Object.hasOwn(t,o))return!1;let c=t[o];if(!Qe(s,c,o,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function et(e,t){return Ze(e,t,ie)}var K=e(t(),1);function tt(){let e=(0,K.useRef)(!1);return ne(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function nt(){let e=tt(),[t,n]=(0,K.useState)(0),r=(0,K.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,K.useCallback)(()=>_.postRender(r),[r]),t]}var rt=r();const it=()=>{let e=L(Ge);return e.selectedTags.length>0||e.selectedCameras.length>0||e.selectedLenses.length>0||e.selectedRatings!==null},at=e=>{let[t,n]=(0,K.useState)({startDate:null,endDate:null,formattedRange:``,location:void 0}),r=(0,K.useRef)({start:0,end:0}),i=(0,K.useCallback)(e=>{if(e.exif?.DateTimeOriginal){let t=e.exif.DateTimeOriginal.replace(/^(\d{4}):(\d{2}):(\d{2})/,`$1-$2-$3`),n=new Date(t);if(!Number.isNaN(n.getTime()))return n}return new Date(e.lastModified)},[]),{i18n:a}=o(),s=(0,K.useCallback)((e,t)=>{let n=e.getFullYear(),r=t.getFullYear(),i=e.getMonth(),o=t.getMonth();return e.toDateString()===t.toDateString()?e.toLocaleDateString(a.language,{year:`numeric`,month:`long`,day:`numeric`}):n===r?i===o?`${n}年${e.getMonth()+1}月${e.getDate()}日 - ${t.getDate()}日`:`${n}年${e.getMonth()+1}月 - ${t.getMonth()+1}月`:`${n}年${e.getMonth()+1}月 - ${r}年${t.getMonth()+1}月`},[a.language]),c=(0,K.useCallback)(e=>{for(let t of e)if(t.tags){let e=t.tags.find(e=>e.includes(`省`)||e.includes(`市`)||e.includes(`区`)||e.includes(`县`)||e.includes(`镇`)||e.includes(`村`)||e.includes(`街道`)||e.includes(`路`)||e.includes(`北京`)||e.includes(`上海`)||e.includes(`广州`)||e.includes(`深圳`)||e.includes(`杭州`)||e.includes(`南京`)||e.includes(`成都`));if(e)return e}},[]),l=(0,K.useCallback)((e,t,a)=>{if(!a||a.length===0){n({startDate:null,endDate:null,formattedRange:``,location:void 0});return}let o=a.slice(e,t+1).filter(e=>e&&typeof e==`object`&&`id`in e);if(o.length===0){n({startDate:null,endDate:null,formattedRange:``,location:void 0});return}let l=o.map(e=>i(e)).sort((e,t)=>e.getTime()-t.getTime()),u=l[0],d=l.at(-1);if(!u||!d){n({startDate:null,endDate:null,formattedRange:``,location:void 0});return}n({startDate:u,endDate:d,formattedRange:s(u,d),location:c(o)}),r.current={start:e,end:t}},[i,s]);return{dateRange:t,handleRender:(0,K.useCallback)((e,t,n)=>{l(e,t,n)},[l]),currentRange:r.current}};function ot(e){if(!e||typeof document>`u`)return;let t=document.head||document.getElementsByTagName(`head`)[0],n=document.createElement(`style`);n.type=`text/css`,t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}var st=K.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:`bottom`,shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ct=()=>{let e=K.useContext(st);if(!e)throw Error(`useDrawerContext must be used within a Drawer.Root`);return e};ot(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function lt(){let e=navigator.userAgent;return typeof window<`u`&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function ut(){return ht(/^Mac/)}function dt(){return ht(/^iPhone/)}function ft(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function pt(){return ht(/^iPad/)||ut()&&navigator.maxTouchPoints>1}function mt(){return dt()||pt()}function ht(e){return typeof window<`u`&&window.navigator!=null?e.test(window.navigator.platform):void 0}var gt=24,_t=typeof window<`u`?K.useLayoutEffect:K.useEffect;function vt(...e){return(...t)=>{for(let n of e)typeof n==`function`&&n(...t)}}var yt=typeof document<`u`&&window.visualViewport;function bt(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function xt(e){for(bt(e)&&(e=e.parentElement);e&&!bt(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}var St=new Set([`checkbox`,`radio`,`range`,`color`,`file`,`image`,`button`,`submit`,`reset`]),Ct=0,wt;function Tt(e={}){let{isDisabled:t}=e;_t(()=>{if(!t)return Ct++,Ct===1&&mt()&&(wt=Et()),()=>{Ct--,Ct===0&&wt?.()}},[t])}function Et(){let e,t=0,n=n=>{e=xt(n.target),!(e===document.documentElement&&e===document.body)&&(t=n.changedTouches[0].pageY)},r=n=>{if(!e||e===document.documentElement||e===document.body){n.preventDefault();return}let r=n.changedTouches[0].pageY,i=e.scrollTop,a=e.scrollHeight-e.clientHeight;a!==0&&((i<=0&&r>t||i>=a&&r<t)&&n.preventDefault(),t=r)},i=e=>{let t=e.target;At(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform=`translateY(-2000px)`,t.focus(),requestAnimationFrame(()=>{t.style.transform=``}))},a=e=>{let t=e.target;At(t)&&(t.style.transform=`translateY(-2000px)`,requestAnimationFrame(()=>{t.style.transform=``,yt&&(yt.height<window.innerHeight?requestAnimationFrame(()=>{kt(t)}):yt.addEventListener(`resize`,()=>kt(t),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},s=window.pageXOffset,c=window.pageYOffset,l=vt(Dt(document.documentElement,`paddingRight`,`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=vt(Ot(document,`touchstart`,n,{passive:!1,capture:!0}),Ot(document,`touchmove`,r,{passive:!1,capture:!0}),Ot(document,`touchend`,i,{passive:!1,capture:!0}),Ot(document,`focus`,a,!0),Ot(window,`scroll`,o));return()=>{l(),u(),window.scrollTo(s,c)}}function Dt(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function Ot(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function kt(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let t=xt(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let n=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom>t.getBoundingClientRect().bottom+gt&&(t.scrollTop+=r-n)}e=t.parentElement}}function At(e){return e instanceof HTMLInputElement&&!St.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function jt(e,t){typeof e==`function`?e(t):e!=null&&(e.current=t)}function Mt(...e){return t=>e.forEach(e=>jt(e,t))}function Nt(...e){return K.useCallback(Mt(...e),e)}var Pt=new WeakMap;function q(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([t,n])=>{if(t.startsWith(`--`)){e.style.setProperty(t,n);return}r[t]=e.style[t],e.style[t]=n}),!n&&Pt.set(e,r)}function Ft(e,t){if(!e||!(e instanceof HTMLElement))return;let n=Pt.get(e);n&&(e.style[t]=n[t])}var J=e=>{switch(e){case`top`:case`bottom`:return!0;case`left`:case`right`:return!1;default:return e}};function It(e,t){if(!e)return null;let n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform,i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(`, `)[J(t)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(`, `)[J(t)?5:4]):null)}function Lt(e){return 8*(Math.log(e+1)-2)}function Rt(e,t){if(!e)return()=>{};let n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}var Y={DURATION:.5,EASE:[.32,.72,0,1]},zt=.4,Bt=.25,Vt=100,Ht=8,Ut=16,Wt=26,Gt=`vaul-dragging`;function Kt(e){let t=K.useRef(e);return K.useEffect(()=>{t.current=e}),K.useMemo(()=>(...e)=>t.current==null?void 0:t.current.call(t,...e),[])}function qt({defaultProp:e,onChange:t}){let n=K.useState(e),[r]=n,i=K.useRef(r),a=Kt(t);return K.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}function Jt({prop:e,defaultProp:t,onChange:n=()=>{}}){let[r,i]=qt({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:r,s=Kt(n);return[o,K.useCallback(t=>{if(a){let n=typeof t==`function`?t(e):t;n!==e&&s(n)}else i(t)},[a,e,i,s])]}function Yt({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:r,overlayRef:i,fadeFromIndex:a,onSnapPointChange:o,direction:s=`bottom`,container:c,snapToSequentialPoint:l}){let[u,d]=Jt({prop:e,defaultProp:n?.[0],onChange:t}),[f,p]=K.useState(typeof window<`u`?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);K.useEffect(()=>{function e(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]);let m=K.useMemo(()=>u===n?.[n.length-1]||null,[n,u]),h=K.useMemo(()=>n?.findIndex(e=>e===u)??null,[n,u]),g=n&&n.length>0&&(a||a===0)&&!Number.isNaN(a)&&n[a]===u||!n,_=K.useMemo(()=>{let e=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<`u`?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};return n?.map(t=>{let n=typeof t==`string`,r=0;if(n&&(r=parseInt(t,10)),J(s)){let i=n?r:f?t*e.height:0;return f?s===`bottom`?e.height-i:-e.height+i:i}let i=n?r:f?t*e.width:0;return f?s===`right`?e.width-i:-e.width+i:i})??[]},[n,f,c]),v=K.useMemo(()=>h===null?null:_?.[h],[_,h]),y=K.useCallback(e=>{let t=_?.findIndex(t=>t===e)??null;o(t),q(r.current,{transition:`transform ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,transform:J(s)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`}),_&&t!==_.length-1&&a!==void 0&&t!==a&&t<a?q(i.current,{transition:`opacity ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,opacity:`0`}):q(i.current,{transition:`opacity ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,opacity:`1`}),d(n?.[Math.max(t,0)])},[r.current,n,_,a,i,d]);K.useEffect(()=>{if(u||e){let t=n?.findIndex(t=>t===e||t===u)??-1;_&&t!==-1&&typeof _[t]==`number`&&y(_[t])}},[u,e,n,_,y]);function b({draggedDistance:e,closeDrawer:t,velocity:r,dismissible:o}){if(a===void 0)return;let c=s===`bottom`||s===`right`?(v??0)-e:(v??0)+e,u=h===a-1,d=h===0,f=e>0;if(u&&q(i.current,{transition:`opacity ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`}),!l&&r>2&&!f){o?t():y(_[0]);return}if(!l&&r>2&&f&&_&&n){y(_[n.length-1]);return}let p=_?.reduce((e,t)=>typeof e!=`number`||typeof t!=`number`?e:Math.abs(t-c)<Math.abs(e-c)?t:e),g=J(s)?window.innerHeight:window.innerWidth;if(r>zt&&Math.abs(e)<g*.4){let e=f?1:-1;if(e>0&&m&&n){y(_[n.length-1]);return}if(d&&e<0&&o&&t(),h===null)return;y(_[h+e]);return}y(p)}function x({draggedDistance:e}){if(v===null)return;let t=s===`bottom`||s===`right`?v-e:v+e;(s===`bottom`||s===`right`)&&t<_[_.length-1]||(s===`top`||s===`left`)&&t>_[_.length-1]||q(r.current,{transform:J(s)?`translate3d(0, ${t}px, 0)`:`translate3d(${t}px, 0, 0)`})}function S(e,t){if(!n||typeof h!=`number`||!_||a===void 0)return null;let r=h===a-1;if(h>=a&&t)return 0;if(r&&!t)return 1;if(!g&&!r)return null;let i=r?h+1:h-1,o=r?_[i]-_[i-1]:_[i+1]-_[i],s=e/Math.abs(o);return r?1-s:s}return{isLastSnapPoint:m,activeSnapPoint:u,shouldFade:g,getPercentageDragged:S,setActiveSnapPoint:d,activeSnapPointIndex:h,onRelease:b,onDrag:x,snapPointsOffset:_}}function Xt(){let{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:i}=ct(),a=K.useRef(null),o=(0,K.useMemo)(()=>document.body.style.backgroundColor,[]);function s(){return(window.innerWidth-Wt)/window.innerWidth}K.useEffect(()=>{if(t&&n){a.current&&clearTimeout(a.current);let t=document.querySelector(`[data-vaul-drawer-wrapper]`)||document.querySelector(`[vaul-drawer-wrapper]`);if(!t)return;r&&!i&&Rt(document.body,{background:`black`}),Rt(t,{transformOrigin:J(e)?`top`:`left`,transitionProperty:`transform, border-radius`,transitionDuration:`${Y.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Y.EASE.join(`,`)})`});let n=Rt(t,{borderRadius:`${Ht}px`,overflow:`hidden`,...J(e)?{transform:`scale(${s()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${s()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{n(),a.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty(`background`)},Y.DURATION*1e3)}}},[t,n,o])}var Zt=null;function Qt({isOpen:e,modal:t,nested:n,hasBeenOpened:r,preventScrollRestoration:i,noBodyStyles:a}){let[o,s]=K.useState(()=>typeof window<`u`?window.location.href:``),c=K.useRef(0),l=K.useCallback(()=>{if(ft()&&Zt===null&&e&&!a){Zt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:`unset`};let{scrollX:e,innerHeight:t}=window;document.body.style.setProperty(`position`,`fixed`,`important`),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-e}px`,right:`0px`,height:`auto`}),window.setTimeout(()=>window.requestAnimationFrame(()=>{let e=t-window.innerHeight;e&&c.current>=t&&(document.body.style.top=`${-(c.current+e)}px`)}),300)}},[e]),u=K.useCallback(()=>{if(ft()&&Zt!==null&&!a){let e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Zt),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){s(window.location.href);return}window.scrollTo(t,e)}),Zt=null}},[o]);return K.useEffect(()=>{function e(){c.current=window.scrollY}return e(),window.addEventListener(`scroll`,e),()=>{window.removeEventListener(`scroll`,e)}},[]),K.useEffect(()=>{if(t)return()=>{typeof document>`u`||document.querySelector(`[data-vaul-drawer]`)||u()}},[t,u]),K.useEffect(()=>{n||!r||(e?(!window.matchMedia(`(display-mode: standalone)`).matches&&l(),t||window.setTimeout(()=>{u()},500)):u())},[e,r,o,t,n,l,u]),{restorePositionSetting:u}}function $t({open:e,onOpenChange:t,children:n,onDrag:r,onRelease:i,snapPoints:a,shouldScaleBackground:o=!1,setBackgroundColorOnScale:s=!0,closeThreshold:c=Bt,scrollLockTimeout:l=Vt,dismissible:u=!0,handleOnly:d=!1,fadeFromIndex:f=a&&a.length-1,activeSnapPoint:p,setActiveSnapPoint:m,fixed:h,modal:g=!0,onClose:_,nested:v,noBodyStyles:y=!1,direction:b=`bottom`,defaultOpen:x=!1,disablePreventScroll:S=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:w=!1,repositionInputs:T=!0,onAnimationEnd:E,container:D,autoFocus:O=!1}){let[k=!1,A]=Jt({defaultProp:x,prop:e,onChange:e=>{t?.(e),!e&&!v&&me(),setTimeout(()=>{E?.(e)},Y.DURATION*1e3),e&&!g&&typeof window<`u`&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents=`auto`}),e||(document.body.style.pointerEvents=`auto`)}}),[j,M]=K.useState(!1),[N,P]=K.useState(!1),[F,I]=K.useState(!1),L=K.useRef(null),R=K.useRef(null),z=K.useRef(null),ee=K.useRef(null),B=K.useRef(null),V=K.useRef(!1),H=K.useRef(null),U=K.useRef(0),W=K.useRef(!1),te=K.useRef(!x),ne=K.useRef(0),G=K.useRef(null),re=K.useRef(G.current?.getBoundingClientRect().height||0),ie=K.useRef(G.current?.getBoundingClientRect().width||0),ae=K.useRef(0),{activeSnapPoint:oe,activeSnapPointIndex:se,setActiveSnapPoint:ce,onRelease:le,snapPointsOffset:ue,onDrag:de,shouldFade:fe,getPercentageDragged:pe}=Yt({snapPoints:a,activeSnapPointProp:p,setActiveSnapPointProp:m,drawerRef:G,fadeFromIndex:f,overlayRef:L,onSnapPointChange:K.useCallback(e=>{a&&e===ue.length-1&&(R.current=new Date)},[]),direction:b,container:D,snapToSequentialPoint:C});Tt({isDisabled:!k||N||!g||F||!j||!T||!S});let{restorePositionSetting:me}=Qt({isOpen:k,modal:g,nested:v??!1,hasBeenOpened:j,preventScrollRestoration:w,noBodyStyles:y});function he(){return(window.innerWidth-Wt)/window.innerWidth}function ge(e){!u&&!a||G.current&&!G.current.contains(e.target)||(re.current=G.current?.getBoundingClientRect().height||0,ie.current=G.current?.getBoundingClientRect().width||0,P(!0),z.current=new Date,mt()&&window.addEventListener(`touchend`,()=>V.current=!1,{once:!0}),e.target.setPointerCapture(e.pointerId),U.current=J(b)?e.pageY:e.pageX)}function _e(e,t){let n=e,r=window.getSelection()?.toString(),i=G.current?It(G.current,b):null,a=new Date;if(n.tagName===`SELECT`||n.hasAttribute(`data-vaul-no-drag`)||n.closest(`[data-vaul-no-drag]`))return!1;if(b===`right`||b===`left`)return!0;if(R.current&&a.getTime()-R.current.getTime()<500)return!1;if(i!==null&&(b===`bottom`?i>0:i<0))return!0;if(r&&r.length>0)return!1;if(B.current&&a.getTime()-B.current.getTime()<l&&i===0||t)return B.current=a,!1;for(;n;){if(n.scrollHeight>n.clientHeight){if(n.scrollTop!==0)return B.current=new Date,!1;if(n.getAttribute(`role`)===`dialog`)return!0}n=n.parentNode}return!0}function ve(e){if(G.current&&N){let t=b===`bottom`||b===`right`?1:-1,n=(U.current-(J(b)?e.pageY:e.pageX))*t,i=n>0,s=a&&!u&&!i;if(s&&se===0)return;let c=Math.abs(n),l=document.querySelector(`[data-vaul-drawer-wrapper]`),d=c/(b===`bottom`||b===`top`?re.current:ie.current),p=pe(c,i);if(p!==null&&(d=p),s&&d>=1||!V.current&&!_e(e.target,i))return;if(G.current.classList.add(Gt),V.current=!0,q(G.current,{transition:`none`}),q(L.current,{transition:`none`}),a&&de({draggedDistance:n}),i&&!a){let e=Lt(n),r=Math.min(e*-1,0)*t;q(G.current,{transform:J(b)?`translate3d(0, ${r}px, 0)`:`translate3d(${r}px, 0, 0)`});return}let m=1-d;if((fe||f&&se===f-1)&&(r?.(e,d),q(L.current,{opacity:`${m}`,transition:`none`},!0)),l&&L.current&&o){let e=Math.min(he()+d*(1-he()),1),t=8-d*8,n=Math.max(0,14-d*14);q(l,{borderRadius:`${t}px`,transform:J(b)?`scale(${e}) translate3d(0, ${n}px, 0)`:`scale(${e}) translate3d(${n}px, 0, 0)`,transition:`none`},!0)}if(!a){let e=c*t;q(G.current,{transform:J(b)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`})}}}K.useEffect(()=>{window.requestAnimationFrame(()=>{te.current=!0})},[]),K.useEffect(()=>{var e;function t(){if(!G.current||!T)return;let e=document.activeElement;if(At(e)||W.current){let e=window.visualViewport?.height||0,t=window.innerHeight,n=t-e,r=G.current.getBoundingClientRect().height||0,i=r>t*.8;ae.current||=r;let o=G.current.getBoundingClientRect().top;if(Math.abs(ne.current-n)>60&&(W.current=!W.current),a&&a.length>0&&ue&&se){let e=ue[se]||0;n+=e}if(ne.current=n,r>e||W.current){let t=G.current.getBoundingClientRect().height,r=t;t>e&&(r=e-(i?o:Wt)),h?G.current.style.height=`${t-Math.max(n,0)}px`:G.current.style.height=`${Math.max(r,e-o)}px`}else lt()||(G.current.style.height=`${ae.current}px`);a&&a.length>0&&!W.current?G.current.style.bottom=`0px`:G.current.style.bottom=`${Math.max(n,0)}px`}}return(e=window.visualViewport)==null||e.addEventListener(`resize`,t),()=>window.visualViewport?.removeEventListener(`resize`,t)},[se,a,ue]);function ye(e){xe(),_?.(),e||A(!1),setTimeout(()=>{a&&ce(a[0])},Y.DURATION*1e3)}function be(){if(!G.current)return;let e=document.querySelector(`[data-vaul-drawer-wrapper]`),t=It(G.current,b);q(G.current,{transform:`translate3d(0, 0, 0)`,transition:`transform ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`}),q(L.current,{transition:`opacity ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,opacity:`1`}),o&&t&&t>0&&k&&q(e,{borderRadius:`${Ht}px`,overflow:`hidden`,...J(b)?{transform:`scale(${he()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:`top`}:{transform:`scale(${he()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:`left`},transitionProperty:`transform, border-radius`,transitionDuration:`${Y.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Y.EASE.join(`,`)})`},!0)}function xe(){!N||!G.current||(G.current.classList.remove(Gt),V.current=!1,P(!1),ee.current=new Date)}function Se(e){if(!N||!G.current)return;G.current.classList.remove(Gt),V.current=!1,P(!1),ee.current=new Date;let t=It(G.current,b);if(!e||!_e(e.target,!1)||!t||Number.isNaN(t)||z.current===null)return;let n=ee.current.getTime()-z.current.getTime(),r=U.current-(J(b)?e.pageY:e.pageX),o=Math.abs(r)/n;if(o>.05&&(I(!0),setTimeout(()=>{I(!1)},200)),a){le({draggedDistance:r*(b===`bottom`||b===`right`?1:-1),closeDrawer:ye,velocity:o,dismissible:u}),i?.(e,!0);return}if(b===`bottom`||b===`right`?r>0:r<0){be(),i?.(e,!0);return}if(o>zt){ye(),i?.(e,!1);return}let s=Math.min(G.current.getBoundingClientRect().height??0,window.innerHeight),l=Math.min(G.current.getBoundingClientRect().width??0,window.innerWidth),d=b===`left`||b===`right`;if(Math.abs(t)>=(d?l:s)*c){ye(),i?.(e,!1);return}i?.(e,!0),be()}K.useEffect(()=>(k&&(q(document.documentElement,{scrollBehavior:`auto`}),R.current=new Date),()=>{Ft(document.documentElement,`scrollBehavior`)}),[k]);function Ce(e){let t=e?(window.innerWidth-Ut)/window.innerWidth:1,n=e?-Ut:0;H.current&&window.clearTimeout(H.current),q(G.current,{transition:`transform ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,transform:J(b)?`scale(${t}) translate3d(0, ${n}px, 0)`:`scale(${t}) translate3d(${n}px, 0, 0)`}),!e&&G.current&&(H.current=setTimeout(()=>{let e=It(G.current,b);q(G.current,{transition:`none`,transform:J(b)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`})},500))}function we(e,t){if(t<0)return;let n=(window.innerWidth-Ut)/window.innerWidth,r=n+t*(1-n),i=-Ut+t*Ut;q(G.current,{transform:J(b)?`scale(${r}) translate3d(0, ${i}px, 0)`:`scale(${r}) translate3d(${i}px, 0, 0)`,transition:`none`})}function Te(e,t){let n=J(b)?window.innerHeight:window.innerWidth,r=t?(n-Ut)/n:1,i=t?-Ut:0;t&&q(G.current,{transition:`transform ${Y.DURATION}s cubic-bezier(${Y.EASE.join(`,`)})`,transform:J(b)?`scale(${r}) translate3d(0, ${i}px, 0)`:`scale(${r}) translate3d(${i}px, 0, 0)`})}return K.useEffect(()=>{g||window.requestAnimationFrame(()=>{document.body.style.pointerEvents=`auto`})},[g]),K.createElement(Ue,{defaultOpen:x,onOpenChange:e=>{!u&&!e||(e?M(!0):ye(!0),A(e))},open:k},K.createElement(st.Provider,{value:{activeSnapPoint:oe,snapPoints:a,setActiveSnapPoint:ce,drawerRef:G,overlayRef:L,onOpenChange:t,onPress:ge,onRelease:Se,onDrag:ve,dismissible:u,shouldAnimate:te,handleOnly:d,isOpen:k,isDragging:N,shouldFade:fe,closeDrawer:ye,onNestedDrag:we,onNestedOpenChange:Ce,onNestedRelease:Te,keyboardIsOpen:W,modal:g,snapPointsOffset:ue,activeSnapPointIndex:se,direction:b,shouldScaleBackground:o,setBackgroundColorOnScale:s,noBodyStyles:y,container:D,autoFocus:O}},n))}var en=K.forwardRef(function({...e},t){let{overlayRef:n,snapPoints:r,onRelease:i,shouldFade:a,isOpen:o,modal:s,shouldAnimate:c}=ct(),l=Nt(t,n),u=r&&r.length>0;if(!s)return null;let d=K.useCallback(e=>i(e),[i]);return K.createElement(f,{onMouseUp:d,ref:l,"data-vaul-overlay":``,"data-vaul-snap-points":o&&u?`true`:`false`,"data-vaul-snap-points-overlay":o&&a?`true`:`false`,"data-vaul-animate":c?.current?`true`:`false`,...e})});en.displayName=`Drawer.Overlay`;var tn=K.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},i){let{drawerRef:a,onPress:o,onRelease:s,onDrag:c,keyboardIsOpen:l,snapPointsOffset:u,activeSnapPointIndex:d,modal:f,isOpen:p,direction:m,snapPoints:h,container:g,handleOnly:_,shouldAnimate:v,autoFocus:y}=ct(),[b,x]=K.useState(!1),S=Nt(i,a),C=K.useRef(null),w=K.useRef(null),T=K.useRef(!1),E=h&&h.length>0;Xt();let D=(e,t,n=0)=>{if(T.current)return!0;let r=Math.abs(e.y),i=Math.abs(e.x),a=i>r,o=[`bottom`,`right`].includes(t)?1:-1;if(t===`left`||t===`right`){if(!(e.x*o<0)&&i>=0&&i<=n)return a}else if(!(e.y*o<0)&&r>=0&&r<=n)return!a;return T.current=!0,!0};K.useEffect(()=>{E&&window.requestAnimationFrame(()=>{x(!0)})},[]);function O(e){C.current=null,T.current=!1,s(e)}return K.createElement(le,{"data-vaul-drawer-direction":m,"data-vaul-drawer":``,"data-vaul-delayed-snap-points":b?`true`:`false`,"data-vaul-snap-points":p&&E?`true`:`false`,"data-vaul-custom-container":g?`true`:`false`,"data-vaul-animate":v?.current?`true`:`false`,...r,ref:S,style:u&&u.length>0?{"--snap-point-height":`${u[d??0]}px`,...t}:t,onPointerDown:e=>{_||(r.onPointerDown==null||r.onPointerDown.call(r,e),C.current={x:e.pageX,y:e.pageY},o(e))},onOpenAutoFocus:e=>{n?.(e),y||e.preventDefault()},onPointerDownOutside:t=>{if(e?.(t),!f||t.defaultPrevented){t.preventDefault();return}l.current&&=!1},onFocusOutside:e=>{if(!f){e.preventDefault();return}},onPointerMove:e=>{if(w.current=e,_||(r.onPointerMove==null||r.onPointerMove.call(r,e),!C.current))return;let t=e.pageY-C.current.y,n=e.pageX-C.current.x,i=e.pointerType===`touch`?10:2;D({x:n,y:t},m,i)?c(e):(Math.abs(n)>i||Math.abs(t)>i)&&(C.current=null)},onPointerUp:e=>{r.onPointerUp==null||r.onPointerUp.call(r,e),C.current=null,T.current=!1,s(e)},onPointerOut:e=>{r.onPointerOut==null||r.onPointerOut.call(r,e),O(w.current)},onContextMenu:e=>{r.onContextMenu==null||r.onContextMenu.call(r,e),w.current&&O(w.current)}})});tn.displayName=`Drawer.Content`;var nn=250,rn=120,an=K.forwardRef(function({preventCycle:e=!1,children:t,...n},r){let{closeDrawer:i,isDragging:a,snapPoints:o,activeSnapPoint:s,setActiveSnapPoint:c,dismissible:l,handleOnly:u,isOpen:d,onPress:f,onDrag:p}=ct(),m=K.useRef(null),h=K.useRef(!1);function g(){if(h.current){y();return}window.setTimeout(()=>{_()},rn)}function _(){if(a||e||h.current){y();return}if(y(),!o||o.length===0){l||i();return}if(s===o[o.length-1]&&l){i();return}let t=o.findIndex(e=>e===s);if(t===-1)return;let n=o[t+1];c(n)}function v(){m.current=window.setTimeout(()=>{h.current=!0},nn)}function y(){m.current&&window.clearTimeout(m.current),h.current=!1}return K.createElement(`div`,{onClick:g,onPointerCancel:y,onPointerDown:e=>{u&&f(e),v()},onPointerMove:e=>{u&&p(e)},ref:r,"data-vaul-drawer-visible":d?`true`:`false`,"data-vaul-handle":``,"aria-hidden":`true`,...n},K.createElement(`span`,{"data-vaul-handle-hitarea":``,"aria-hidden":`true`},t))});an.displayName=`Drawer.Handle`;function on({onDrag:e,onOpenChange:t,open:n,...r}){let{onNestedDrag:i,onNestedOpenChange:a,onNestedRelease:o}=ct();if(!i)throw Error(`Drawer.NestedRoot must be placed in another drawer`);return K.createElement($t,{nested:!0,open:n,onClose:()=>{a(!1)},onDrag:(t,n)=>{i(t,n),e?.(t,n)},onOpenChange:e=>{e&&a(e),t?.(e)},onRelease:o,...r})}function sn(e){let t=ct(),{container:n=t.container,...r}=e;return K.createElement(ye,{container:n,...r})}var cn={Root:$t,NestedRoot:on,Content:tn,Overlay:en,Trigger:ze,Portal:sn,Handle:an,Close:oe,Title:Me,Description:B},X=e(i());const ln=e=>{let t=(0,rt.c)(78),{value:n,onChange:r,onPointUp:i,min:a,max:s,step:c,autoLabel:l,className:u,disabled:d}=e,f=c===void 0?1:c,p=d===void 0?!1:d,{t:m}=o(),h;t[0]!==l||t[1]!==m?(h=l||m(`slider.auto`),t[0]=l,t[1]=m,t[2]=h):h=t[2];let g=h,[_,v]=(0,K.useState)(!1),y=(0,K.useRef)(null),b=(0,K.useRef)(null),x;t[3]!==s||t[4]!==a?(x=e=>e===`auto`?5:15+(e-a)/(s-a)*85,t[3]=s,t[4]=a,t[5]=x):x=t[5];let S=x,C;t[6]!==s||t[7]!==a||t[8]!==f?(C=e=>{if(e<=12)return`auto`;let t=(e-15)/85,n=a+Math.max(0,t)*(s-a);return Math.round(Math.max(a,n)/f)*f},t[6]=s,t[7]=a,t[8]=f,t[9]=C):C=t[9];let w=C,T;t[10]!==p||t[11]!==w||t[12]!==r||t[13]!==i||t[14]!==n?(T=e=>{if(p)return;e.preventDefault(),v(!0);let t=e=>{if(!b.current)return;let t=b.current.getBoundingClientRect(),i=(e-t.left)/t.width*100,a=w(Math.max(0,Math.min(100,i)));a!==n&&r(a)};t(e.clientX);let a=e=>{t(e.clientX)},o=e=>{v(!1),i&&i(e),document.removeEventListener(`pointermove`,a),document.removeEventListener(`pointerup`,o)};document.addEventListener(`pointermove`,a),document.addEventListener(`pointerup`,o)},t[10]=p,t[11]=w,t[12]=r,t[13]=i,t[14]=n,t[15]=T):T=t[15];let E=T,D=S(n),O;t[16]===u?O=t[17]:(O=he(`w-full`,u),t[16]=u,t[17]=O);let k;t[18]===g?k=t[19]:(k=(0,X.jsx)(`span`,{children:g}),t[18]=g,t[19]=k);let A;t[20]===s?A=t[21]:(A=(0,X.jsx)(`span`,{children:s}),t[20]=s,t[21]=A);let j;t[22]!==k||t[23]!==A?(j=(0,X.jsxs)(`div`,{className:`text-text-secondary mb-2 flex justify-between text-xs`,children:[k,A]}),t[22]=k,t[23]=A,t[24]=j):j=t[24];let M=p&&`cursor-not-allowed opacity-50`,N;t[25]===M?N=t[26]:(N=he(`relative h-6 cursor-pointer`,M),t[25]=M,t[26]=N);let P;t[27]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,X.jsx)(`div`,{className:`absolute top-0 left-0 h-full w-[12%] rounded-l-full bg-green-100 dark:bg-green-900/50`}),t[27]=P):P=t[27];let F=n===`auto`?`bg-green-500`:`bg-accent`,I;t[28]===F?I=t[29]:(I=he(`absolute top-0 h-full rounded-full transition-all duration-150 max-w-full`,F),t[28]=F,t[29]=I);let L=`${Math.max(D,5)}%`,R=n===`auto`?`9999px 0 0 9999px`:`9999px`,z;t[30]!==L||t[31]!==R?(z={width:L,borderRadius:R},t[30]=L,t[31]=R,t[32]=z):z=t[32];let ee;t[33]!==I||t[34]!==z?(ee=(0,X.jsxs)(`div`,{ref:b,className:`absolute top-1/2 h-1.5 w-full -translate-y-1/2 rounded-full bg-neutral-200 dark:bg-neutral-700`,children:[P,(0,X.jsx)(`div`,{className:I,style:z})]}),t[33]=I,t[34]=z,t[35]=ee):ee=t[35];let B=_?`scale-110`:`hover:scale-105`,V=n===`auto`?`bg-green-500`:`bg-accent`,H=p&&`cursor-not-allowed`,U;t[36]!==B||t[37]!==V||t[38]!==H?(U=he(`absolute top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-lg transition-all duration-150`,B,V,H),t[36]=B,t[37]=V,t[38]=H,t[39]=U):U=t[39];let W=`${D}%`,te;t[40]===W?te=t[41]:(te={left:W},t[40]=W,t[41]=te);let ne;t[42]!==U||t[43]!==te?(ne=(0,X.jsx)(`div`,{className:U,style:te}),t[42]=U,t[43]=te,t[44]=ne):ne=t[44];let G=n===`auto`&&`font-medium text-green-500`,re;t[45]===G?re=t[46]:(re=he(`transition-colors`,G),t[45]=G,t[46]=re);let ie;t[47]!==g||t[48]!==re?(ie=(0,X.jsx)(`div`,{className:`w-[15%] text-left`,children:(0,X.jsx)(`span`,{className:re,children:g})}),t[47]=g,t[48]=re,t[49]=ie):ie=t[49];let ae;if(t[50]!==s||t[51]!==a){let e;t[53]===a?e=t[54]:(e=(e,t)=>a+t,t[53]=a,t[54]=e),ae=Array.from({length:s-a+1},e),t[50]=s,t[51]=a,t[52]=ae}else ae=t[52];let oe;t[55]!==ae||t[56]!==n?(oe=(0,X.jsx)(`div`,{className:`flex w-[85%] justify-between`,children:ae.map(e=>(0,X.jsx)(`span`,{className:he(`transition-colors`,n===e&&`font-medium text-accent`),children:e},e))}),t[55]=ae,t[56]=n,t[57]=oe):oe=t[57];let se;t[58]!==ie||t[59]!==oe?(se=(0,X.jsxs)(`div`,{className:`text-text-secondary absolute top-full mt-1 flex w-full text-xs`,children:[ie,oe]}),t[58]=ie,t[59]=oe,t[60]=se):se=t[60];let ce;t[61]!==E||t[62]!==N||t[63]!==ee||t[64]!==ne||t[65]!==se?(ce=(0,X.jsxs)(`div`,{ref:y,className:N,onPointerDown:E,children:[ee,ne,se]}),t[61]=E,t[62]=N,t[63]=ee,t[64]=ne,t[65]=se,t[66]=ce):ce=t[66];let le;t[67]!==g||t[68]!==m||t[69]!==n?(le=n===`auto`?g:m(`slider.columns`,{count:n}),t[67]=g,t[68]=m,t[69]=n,t[70]=le):le=t[70];let ue;t[71]===le?ue=t[72]:(ue=(0,X.jsx)(`div`,{className:`mt-8 text-center text-sm font-medium text-gray-700 dark:text-gray-300`,children:le}),t[71]=le,t[72]=ue);let de;return t[73]!==j||t[74]!==ce||t[75]!==ue||t[76]!==O?(de=(0,X.jsxs)(`div`,{className:O,children:[j,ce,ue]}),t[73]=j,t[74]=ce,t[75]=ue,t[76]=O,t[77]=de):de=t[77],de};var un=r();const dn=()=>{let e=(0,un.c)(13),{t}=o(),[n,r]=y(Ge),i=s(),[a,c]=(0,K.useState)(n.columns),l=(0,K.useRef)(n.columns),u;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=e=>{l.current=e,c(e)},e[0]=u):u=e[0];let d=u,f;e[1]===r?f=e[2]:(f=()=>{r(e=>({...e,columns:l.current}))},e[1]=r,e[2]=f);let p=f,m;e[3]===i?m=e[4]:(m=i?{min:3,max:5}:{min:3,max:8},e[3]=i,e[4]=m);let h=m,g=h.min,_=h.max,v;e[5]===t?v=e[6]:(v=t(`action.auto`),e[5]=t,e[6]=v);let b;return e[7]!==h.max||e[8]!==h.min||e[9]!==p||e[10]!==a||e[11]!==v?(b=(0,X.jsx)(`div`,{className:`w-full lg:w-80`,children:(0,X.jsx)(ln,{value:a,onChange:d,onPointUp:p,min:g,max:_,autoLabel:v})}),e[7]=h.max,e[8]=h.min,e[9]=p,e[10]=a,e[11]=v,e[12]=b):b=e[12],b};var fn=r();const pn=()=>{let e=(0,fn.c)(34),{t}=o(),[n,r]=y(Ge),i;e[0]!==n||e[1]!==r?(i=e=>{r({...n,sortOrder:e})},e[0]=n,e[1]=r,e[2]=i):i=e[2];let a=i,s;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(s={"--highlight-bg":`linear-gradient(to right, color-mix(in srgb, var(--color-accent) 8%, transparent), color-mix(in srgb, var(--color-accent) 5%, transparent))`},e[3]=s):s=e[3];let c;e[4]===a?c=e[5]:(c=()=>a(`desc`),e[4]=a,e[5]=c);let l;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsx)(`i`,{className:`i-mingcute-sort-descending-line`}),e[6]=l):l=e[6];let u;e[7]===t?u=e[8]:(u=t(`action.sort.newest.first`),e[7]=t,e[8]=u);let d;e[9]===u?d=e[10]:(d=(0,X.jsx)(`span`,{children:u}),e[9]=u,e[10]=d);let f;e[11]===n.sortOrder?f=e[12]:(f=n.sortOrder===`desc`&&(0,X.jsx)(`i`,{className:`i-mingcute-check-line ml-auto`}),e[11]=n.sortOrder,e[12]=f);let p;e[13]!==c||e[14]!==d||e[15]!==f?(p=(0,X.jsxs)(`div`,{className:`group flex cursor-pointer items-center gap-2 rounded-lg bg-transparent px-2 py-2 transition-all duration-200 lg:py-1`,style:s,onMouseEnter:mn,onMouseLeave:hn,onClick:c,children:[l,d,f]}),e[13]=c,e[14]=d,e[15]=f,e[16]=p):p=e[16];let m;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(m={"--highlight-bg":`linear-gradient(to right, color-mix(in srgb, var(--color-accent) 8%, transparent), color-mix(in srgb, var(--color-accent) 5%, transparent))`},e[17]=m):m=e[17];let h;e[18]===a?h=e[19]:(h=()=>a(`asc`),e[18]=a,e[19]=h);let g;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,X.jsx)(`i`,{className:`i-mingcute-sort-ascending-line`}),e[20]=g):g=e[20];let _;e[21]===t?_=e[22]:(_=t(`action.sort.oldest.first`),e[21]=t,e[22]=_);let v;e[23]===_?v=e[24]:(v=(0,X.jsx)(`span`,{children:_}),e[23]=_,e[24]=v);let b;e[25]===n.sortOrder?b=e[26]:(b=n.sortOrder===`asc`&&(0,X.jsx)(`i`,{className:`i-mingcute-check-line ml-auto`}),e[25]=n.sortOrder,e[26]=b);let x;e[27]!==v||e[28]!==b||e[29]!==h?(x=(0,X.jsxs)(`div`,{className:`group flex cursor-pointer items-center gap-2 rounded-lg bg-transparent px-2 py-2 transition-all duration-200 lg:py-1`,style:m,onMouseEnter:gn,onMouseLeave:_n,onClick:h,children:[g,v,b]}),e[27]=v,e[28]=b,e[29]=h,e[30]=x):x=e[30];let S;return e[31]!==x||e[32]!==p?(S=(0,X.jsxs)(`div`,{className:`-mx-2 flex flex-col p-0 text-sm lg:p-0`,children:[p,x]}),e[31]=x,e[32]=p,e[33]=S):S=e[33],S};function mn(e){e.currentTarget.style.background=`linear-gradient(to right, color-mix(in srgb, var(--color-accent) 8%, transparent), color-mix(in srgb, var(--color-accent) 5%, transparent))`,e.currentTarget.style.color=`var(--color-accent)`}function hn(e){e.currentTarget.style.background=`transparent`,e.currentTarget.style.color=``}function gn(e){e.currentTarget.style.background=`linear-gradient(to right, color-mix(in srgb, var(--color-accent) 8%, transparent), color-mix(in srgb, var(--color-accent) 5%, transparent))`,e.currentTarget.style.color=`var(--color-accent)`}function _n(e){e.currentTarget.style.background=`transparent`,e.currentTarget.style.color=``}var vn=r();const yn=()=>{let e=(0,vn.c)(23),{t}=o(),n;e[0]===t?n=e[1]:(n=t(`action.view.settings`),e[0]=t,e[1]=n);let r;e[2]===n?r=e[3]:(r=(0,X.jsx)(`h3`,{className:`mb-3 px-2 text-sm font-medium`,children:n}),e[2]=n,e[3]=r);let i;e[4]===t?i=e[5]:(i=t(`action.sort.mode`),e[4]=t,e[5]=i);let a;e[6]===i?a=e[7]:(a=(0,X.jsx)(`h4`,{className:`text-text-secondary mb-3 text-xs font-medium`,children:i}),e[6]=i,e[7]=a);let s;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(pn,{}),e[8]=s):s=e[8];let c;e[9]===a?c=e[10]:(c=(0,X.jsxs)(`div`,{className:`mb-3 px-2`,children:[a,s]}),e[9]=a,e[10]=c);let l;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsx)(`div`,{className:`mx-2 my-3 h-px`,style:{background:`linear-gradient(to right, transparent, color-mix(in srgb, var(--color-accent) 20%, transparent), transparent)`}}),e[11]=l):l=e[11];let u;e[12]===t?u=e[13]:(u=t(`action.columns.setting`),e[12]=t,e[13]=u);let d;e[14]===u?d=e[15]:(d=(0,X.jsx)(`h4`,{className:`text-text-secondary mb-3 text-xs font-medium`,children:u}),e[14]=u,e[15]=d);let f;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,X.jsx)(dn,{}),e[16]=f):f=e[16];let p;e[17]===d?p=e[18]:(p=(0,X.jsxs)(`div`,{className:`px-2`,children:[d,f]}),e[17]=d,e[18]=p);let m;return e[19]!==r||e[20]!==p||e[21]!==c?(m=(0,X.jsxs)(`div`,{className:`pb-safe lg:pb-safe-2 w-full lg:py-1`,children:[r,c,l,p]}),e[19]=r,e[20]=p,e[21]=c,e[22]=m):m=e[22],m};var bn=r(),xn={view:yn};const Sn=e=>{let t=(0,bn.c)(10),{open:n,onOpenChange:r,type:i}=e,a=i?xn[i]:null,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,X.jsx)(cn.Overlay,{className:`fixed inset-0 z-40 bg-black/20 backdrop-blur-sm`}),t[0]=o):o=t[0];let s;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(`div`,{className:`mx-auto mb-4 h-1.5 w-12 flex-shrink-0 rounded-full bg-zinc-300 dark:bg-zinc-700`}),t[1]=s):s=t[1];let c;t[2]===a?c=t[3]:(c=a&&(0,X.jsx)(a,{}),t[2]=a,t[3]=c);let l;t[4]===c?l=t[5]:(l=(0,X.jsxs)(cn.Portal,{children:[o,(0,X.jsxs)(cn.Content,{className:`fixed right-0 bottom-0 left-0 z-50 flex flex-col rounded-t-2xl border-t border-zinc-200 bg-white/80 p-4 backdrop-blur-xl dark:border-zinc-800 dark:bg-black/80`,children:[s,c]})]}),t[4]=c,t[5]=l);let u;return t[6]!==r||t[7]!==n||t[8]!==l?(u=(0,X.jsx)(cn.Root,{open:n,onOpenChange:r,children:l}),t[6]=r,t[7]=n,t[8]=l,t[9]=u):u=t[9],u};var Cn=r();const wn=e=>{let t=(0,Cn.c)(19),{type:n,label:r,onRemove:i,icon:a}=e,o;t[0]!==a||t[1]!==n?(o=()=>{if(a)return a;switch(n){case`tag`:return`i-lucide-tag`;case`camera`:return`i-lucide-camera`;case`lens`:return`i-lucide-aperture`;case`rating`:return`i-lucide-star`;default:return`i-lucide-filter`}},t[0]=a,t[1]=n,t[2]=o):o=t[2];let s=o,c,l,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(c={opacity:0,scale:.8},l={opacity:1,scale:1},u={opacity:0,scale:.8},t[3]=c,t[4]=l,t[5]=u):(c=t[3],l=t[4],u=t[5]);let d;t[6]===s?d=t[7]:(d=s(),t[6]=s,t[7]=d);let f=`${d} shrink-0 text-xs text-white/70`,p;t[8]===f?p=t[9]:(p=(0,X.jsx)(`i`,{className:f}),t[8]=f,t[9]=p);let m;t[10]===r?m=t[11]:(m=(0,X.jsx)(`span`,{className:`min-w-0 truncate text-white/90`,children:r}),t[10]=r,t[11]=m);let h;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,X.jsx)(`i`,{className:`i-lucide-x text-xs`}),t[12]=h):h=t[12];let g;t[13]===i?g=t[14]:(g=(0,X.jsx)(`button`,{type:`button`,onClick:i,className:`ml-0.5 flex shrink-0 items-center justify-center rounded-full p-0.5 text-white/60 transition-colors hover:bg-white/10 hover:text-white/90`,"aria-label":`Remove filter`,children:h}),t[13]=i,t[14]=g);let _;return t[15]!==g||t[16]!==p||t[17]!==m?(_=(0,X.jsxs)(Ie.div,{layout:!0,initial:c,animate:l,exit:u,transition:Ke.presets.snappy,className:`group flex max-w-[280px] min-w-0 items-center gap-1.5 rounded-full border border-white/20 bg-white/10 px-3 py-1.5 text-sm backdrop-blur-md transition-all duration-200 hover:border-white/30 hover:bg-white/15 sm:max-w-[320px]`,children:[p,m,g]}),t[15]=g,t[16]=p,t[17]=m,t[18]=_):_=t[18],_};var Tn=r();const En=e=>{let t=(0,Tn.c)(23),{tags:n,cameras:r,lenses:i,rating:a,onRemoveTag:o,onRemoveCamera:s,onRemoveLens:c,onRemoveRating:l}=e;if(!(n.length>0||r.length>0||i.length>0||a!==null))return null;let u;if(t[0]!==o||t[1]!==n){let e;t[3]===o?e=t[4]:(e=e=>(0,X.jsx)(wn,{type:`tag`,label:e,onRemove:()=>o(e)},`tag-${e}`),t[3]=o,t[4]=e),u=n.map(e),t[0]=o,t[1]=n,t[2]=u}else u=t[2];let d;if(t[5]!==r||t[6]!==s){let e;t[8]===s?e=t[9]:(e=e=>(0,X.jsx)(wn,{type:`camera`,label:e,onRemove:()=>s(e)},`camera-${e}`),t[8]=s,t[9]=e),d=r.map(e),t[5]=r,t[6]=s,t[7]=d}else d=t[7];let f;if(t[10]!==i||t[11]!==c){let e;t[13]===c?e=t[14]:(e=e=>(0,X.jsx)(wn,{type:`lens`,label:e,onRemove:()=>c(e)},`lens-${e}`),t[13]=c,t[14]=e),f=i.map(e),t[10]=i,t[11]=c,t[12]=f}else f=t[12];let p;t[15]!==l||t[16]!==a?(p=a!==null&&(0,X.jsx)(wn,{type:`rating`,label:`${a}+`,onRemove:l,icon:`i-lucide-star`},`rating`),t[15]=l,t[16]=a,t[17]=p):p=t[17];let m;return t[18]!==u||t[19]!==d||t[20]!==f||t[21]!==p?(m=(0,X.jsx)(`div`,{className:`flex w-full flex-wrap items-center gap-2`,children:(0,X.jsxs)(ke,{mode:`popLayout`,children:[u,d,f,p]})}),t[18]=u,t[19]=d,t[20]=f,t[21]=p,t[22]=m):m=t[22],m};var Dn=r();const On=e=>{let t=(0,Dn.c)(23),{onClearAll:n,onEditFilters:r}=e,{t:i}=o(),a,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a={scale:1.02},s={scale:.98},t[0]=a,t[1]=s):(a=t[0],s=t[1]);let c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,X.jsx)(`i`,{className:`i-lucide-pencil text-xs`}),t[2]=c):c=t[2];let l;t[3]===i?l=t[4]:(l=i(`gallery.filter.edit`),t[3]=i,t[4]=l);let u;t[5]===l?u=t[6]:(u=(0,X.jsx)(`span`,{children:l}),t[5]=l,t[6]=u);let d;t[7]!==r||t[8]!==u?(d=(0,X.jsxs)(Ie.button,{type:`button`,onClick:r,className:`flex items-center gap-1.5 rounded-lg bg-transparent px-4 py-2 text-sm font-medium text-white/90 backdrop-blur-sm transition-all duration-200 hover:border-white/20 hover:bg-white/10 hover:text-white`,whileHover:a,whileTap:s,transition:Ke.presets.snappy,children:[c,u]}),t[7]=r,t[8]=u,t[9]=d):d=t[9];let f,p;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(f={scale:1.02},p={scale:.98},t[10]=f,t[11]=p):(f=t[10],p=t[11]);let m;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,X.jsx)(`i`,{className:`i-lucide-x text-xs`}),t[12]=m):m=t[12];let h;t[13]===i?h=t[14]:(h=i(`gallery.filter.clearAll`),t[13]=i,t[14]=h);let g;t[15]===h?g=t[16]:(g=(0,X.jsx)(`span`,{children:h}),t[15]=h,t[16]=g);let _;t[17]!==n||t[18]!==g?(_=(0,X.jsxs)(Ie.button,{type:`button`,onClick:n,className:`flex items-center gap-1.5 rounded-lg bg-transparent px-4 py-2 text-sm font-medium text-white/90 backdrop-blur-sm transition-all duration-200 hover:border-white/20 hover:bg-white/10 hover:text-white`,whileHover:f,whileTap:p,transition:Ke.presets.snappy,children:[m,g]}),t[17]=n,t[18]=g,t[19]=_):_=t[19];let v;return t[20]!==_||t[21]!==d?(v=(0,X.jsxs)(`div`,{className:`flex items-center gap-2`,children:[d,_]}),t[20]=_,t[21]=d,t[22]=v):v=t[22],v};var kn=r(),An=(e,t=12)=>e.length===0?[]:[...e].sort(()=>Math.random()-.5).slice(0,Math.min(t,e.length));const jn=()=>{let e=(0,kn.c)(109),{t}=o(),[n,r]=y(Ge),i=Ee(te),a=ee(),s;e[0]===a?s=e[1]:(s=An(a,12),e[0]=a,e[1]=s);let c=s,l=Mn,u;bb0:{let r;if(e[2]!==n.selectedCameras||e[3]!==n.selectedLenses||e[4]!==n.selectedRatings||e[5]!==n.selectedTags){if(r=[],n.selectedTags.length>0){let t;e[7]===n.selectedTags?t=e[8]:(t=l(n.selectedTags,4),e[7]=n.selectedTags,e[8]=t),r.push(t)}if(n.selectedCameras.length>0){let t;e[9]===n.selectedCameras?t=e[10]:(t=l(n.selectedCameras,2),e[9]=n.selectedCameras,e[10]=t),r.push(t)}if(n.selectedLenses.length>0){let t;e[11]===n.selectedLenses?t=e[12]:(t=l(n.selectedLenses,2),e[11]=n.selectedLenses,e[12]=t),r.push(t)}n.selectedRatings!==null&&r.push(`${n.selectedRatings}+ ★`),e[2]=n.selectedCameras,e[3]=n.selectedLenses,e[4]=n.selectedRatings,e[5]=n.selectedTags,e[6]=r}else r=e[6];if(r.length===0){let n;e[13]===t?n=e[14]:(n=t(`gallery.filter.active`),e[13]=t,e[14]=n),u=n;break bb0}let i;e[15]===r?i=e[16]:(i=r.slice(0,2),e[15]=r,e[16]=i),u=i.join(` · `)}let d=u,f;if(e[17]!==n.selectedCameras||e[18]!==n.selectedLenses||e[19]!==n.selectedRatings||e[20]!==n.selectedTags||e[21]!==t){if(f=[],n.selectedTags.length>0){let r;e[23]===t?r=e[24]:(r=t(`exif.tags`),e[23]=t,e[24]=r);let i;e[25]===n.selectedTags?i=e[26]:(i=n.selectedTags.join(` · `),e[25]=n.selectedTags,e[26]=i);let a;e[27]!==r||e[28]!==i?(a={key:`tags`,icon:`i-lucide-tag`,label:r,value:i},e[27]=r,e[28]=i,e[29]=a):a=e[29],f.push(a)}if(n.selectedCameras.length>0){let r;e[30]===t?r=e[31]:(r=t(`exif.camera`),e[30]=t,e[31]=r);let i;e[32]===n.selectedCameras?i=e[33]:(i=n.selectedCameras.join(` · `),e[32]=n.selectedCameras,e[33]=i);let a;e[34]!==r||e[35]!==i?(a={key:`cameras`,icon:`i-lucide-camera`,label:r,value:i},e[34]=r,e[35]=i,e[36]=a):a=e[36],f.push(a)}if(n.selectedLenses.length>0){let r;e[37]===t?r=e[38]:(r=t(`exif.lens`),e[37]=t,e[38]=r);let i;e[39]===n.selectedLenses?i=e[40]:(i=n.selectedLenses.join(` · `),e[39]=n.selectedLenses,e[40]=i);let a;e[41]!==r||e[42]!==i?(a={key:`lenses`,icon:`i-lucide-aperture`,label:r,value:i},e[41]=r,e[42]=i,e[43]=a):a=e[43],f.push(a)}if(n.selectedRatings!==null){let r;e[44]===t?r=e[45]:(r=t(`exif.rating`),e[44]=t,e[45]=r);let i=`${n.selectedRatings}+`,a;e[46]!==r||e[47]!==i?(a={key:`rating`,icon:`i-lucide-star`,label:r,value:i},e[46]=r,e[47]=i,e[48]=a):a=e[48],f.push(a)}e[17]=n.selectedCameras,e[18]=n.selectedLenses,e[19]=n.selectedRatings,e[20]=n.selectedTags,e[21]=t,e[22]=f}else f=e[22];let p=f,m;e[49]!==n.selectedTags.length||e[50]!==n.tagFilterMode||e[51]!==t?(m=n.selectedTags.length>1?n.tagFilterMode===`intersection`?t(`action.tag.mode.and`):t(`action.tag.mode.or`):null,e[49]=n.selectedTags.length,e[50]=n.tagFilterMode,e[51]=t,e[52]=m):m=e[52];let h=m,g;e[53]===r?g=e[54]:(g=e=>{r(t=>({...t,selectedTags:t.selectedTags.filter(t=>t!==e)}))},e[53]=r,e[54]=g);let _=g,v;e[55]===r?v=e[56]:(v=e=>{r(t=>({...t,selectedCameras:t.selectedCameras.filter(t=>t!==e)}))},e[55]=r,e[56]=v);let b=v,x;e[57]===r?x=e[58]:(x=e=>{r(t=>({...t,selectedLenses:t.selectedLenses.filter(t=>t!==e)}))},e[57]=r,e[58]=x);let S=x,C;e[59]===r?C=e[60]:(C=()=>{r(Nn)},e[59]=r,e[60]=C);let w=C,T;e[61]===r?T=e[62]:(T=()=>{r(Pn)},e[61]=r,e[62]=T);let E=T,D;e[63]===i?D=e[64]:(D=()=>{i(!0)},e[63]=i,e[64]=D);let O=D,k,A,j;e[65]===Symbol.for(`react.memo_cache_sentinel`)?(j={opacity:0,y:-20},k={opacity:1,y:0},A={opacity:0,y:-20},e[65]=k,e[66]=A,e[67]=j):(k=e[65],A=e[66],j=e[67]);let M;e[68]===Symbol.for(`react.memo_cache_sentinel`)?(M=Array.from({length:12}),e[68]=M):M=e[68];let N;e[69]===c?N=e[70]:(N=(0,X.jsx)(`div`,{className:`pointer-events-none absolute inset-0`,children:(0,X.jsx)(`div`,{className:`grid h-full w-full grid-cols-4 grid-rows-3 gap-[2px] opacity-90`,children:M.map((e,t)=>{let n=c[t];return n?(0,X.jsxs)(`div`,{className:`relative overflow-hidden`,children:[(0,X.jsx)(`img`,{src:n.thumbnailUrl||n.originalUrl,alt:``,className:`h-full w-full scale-105 object-cover`,loading:`lazy`}),(0,X.jsx)(`div`,{className:`absolute inset-0 bg-linear-to-br from-black/80 via-black/50 to-black/80`})]},n.id):(0,X.jsx)(`div`,{className:`bg-linear-to-br from-zinc-900 via-black to-zinc-900`},`empty-${t}`)})})}),e[69]=c,e[70]=N);let P,F;e[71]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,X.jsx)(`div`,{className:`pointer-events-none absolute inset-0 bg-linear-to-b from-black/80 via-black/90 to-black/95`}),F=(0,X.jsx)(`div`,{className:`pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.15),rgba(0,0,0,0)_60%)] opacity-70`}),e[71]=P,e[72]=F):(P=e[71],F=e[72]);let I;e[73]!==a.length||e[74]!==t?(I=t(`gallery.filter.results`,{count:a.length}),e[73]=a.length,e[74]=t,e[75]=I):I=e[75];let L;e[76]===I?L=e[77]:(L=(0,X.jsx)(`p`,{className:`text-xs font-medium tracking-[0.5em] text-white/60 uppercase`,children:I}),e[76]=I,e[77]=L);let R;e[78]===d?R=e[79]:(R=(0,X.jsx)(`h2`,{className:`mt-4 text-4xl font-semibold text-white drop-shadow-[0_15px_30px_rgba(0,0,0,0.65)] lg:text-5xl`,children:d}),e[78]=d,e[79]=R);let z;e[80]===p?z=e[81]:(z=p.length>0&&(0,X.jsx)(`div`,{className:`mt-8 grid w-full max-w-4xl grid-cols-1 gap-3 text-left sm:grid-cols-2 lg:grid-cols-4`,children:p.map(Fn)}),e[80]=p,e[81]=z);let B;e[82]!==t||e[83]!==h?(B=h&&(0,X.jsxs)(`div`,{className:`mt-5 inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/5 px-4 py-1.5 text-xs font-medium tracking-[0.3em] text-white/65 uppercase backdrop-blur`,children:[(0,X.jsx)(`i`,{className:`i-lucide-git-branch text-sm text-white/70`}),(0,X.jsxs)(`span`,{children:[t(`action.tag.filter`),` · `,h]})]}),e[82]=t,e[83]=h,e[84]=B):B=e[84];let V;e[85]!==n.selectedCameras||e[86]!==n.selectedLenses||e[87]!==n.selectedRatings||e[88]!==n.selectedTags||e[89]!==b||e[90]!==S||e[91]!==w||e[92]!==_?(V=(0,X.jsx)(`div`,{className:`flex min-w-0 flex-1 justify-center lg:justify-start`,children:(0,X.jsx)(En,{tags:n.selectedTags,cameras:n.selectedCameras,lenses:n.selectedLenses,rating:n.selectedRatings,onRemoveTag:_,onRemoveCamera:b,onRemoveLens:S,onRemoveRating:w})}),e[85]=n.selectedCameras,e[86]=n.selectedLenses,e[87]=n.selectedRatings,e[88]=n.selectedTags,e[89]=b,e[90]=S,e[91]=w,e[92]=_,e[93]=V):V=e[93];let H;e[94]!==E||e[95]!==O?(H=(0,X.jsx)(`div`,{className:`flex shrink-0 justify-center lg:justify-end`,children:(0,X.jsx)(On,{onClearAll:E,onEditFilters:O})}),e[94]=E,e[95]=O,e[96]=H):H=e[96];let U;e[97]!==V||e[98]!==H?(U=(0,X.jsxs)(`div`,{className:`mt-8 flex w-full max-w-4xl flex-col gap-4 lg:flex-row lg:items-start lg:gap-6`,children:[V,H]}),e[97]=V,e[98]=H,e[99]=U):U=e[99];let W;e[100]!==L||e[101]!==R||e[102]!==z||e[103]!==B||e[104]!==U?(W=(0,X.jsx)(`div`,{className:`relative z-10 flex min-h-[320px] flex-col`,children:(0,X.jsxs)(`div`,{className:`flex flex-1 flex-col items-center justify-center px-6 pt-20 pb-12 text-center lg:px-12 lg:pt-28 lg:pb-16`,children:[L,R,z,B,U]})}),e[100]=L,e[101]=R,e[102]=z,e[103]=B,e[104]=U,e[105]=W):W=e[105];let ne;return e[106]!==N||e[107]!==W?(ne=(0,X.jsxs)(Ie.div,{initial:j,animate:k,exit:A,transition:Ke.presets.smooth,className:`relative left-1/2 w-screen -translate-x-1/2 overflow-hidden border border-white/5 bg-black shadow-[0_25px_60px_rgba(0,0,0,0.55)]`,children:[N,P,F,W]}),e[106]=N,e[107]=W,e[108]=ne):ne=e[108],ne};function Mn(e,t){let n=t===void 0?3:t;if(e.length===0)return``;let r=e.slice(0,n).join(` · `),i=e.length-n;return i>0?`${r} +${i}`:r}function Nn(e){return{...e,selectedRatings:null}}function Pn(e){return{...e,selectedTags:[],selectedCameras:[],selectedLenses:[],selectedRatings:null,tagFilterMode:`union`}}function Fn(e){return(0,X.jsxs)(`div`,{className:`flex h-full flex-col gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white/90 backdrop-blur`,children:[(0,X.jsxs)(`div`,{className:`flex items-center gap-2 text-xs font-semibold tracking-[0.3em] text-white/50 uppercase`,children:[(0,X.jsx)(`i`,{className:`${e.icon} text-sm text-white/70`}),(0,X.jsx)(`span`,{children:e.label})]}),(0,X.jsx)(`p`,{className:`line-clamp-2 text-base font-semibold text-white`,children:e.value})]},e.key)}var In=r();const Ln=({photos:e})=>{let t=x(),n=s(),r=n?300:176,i=()=>r+8,a=c({count:e.length,getScrollElement:()=>t,estimateSize:i,overscan:5,measureElement:n?e=>{if(!e)return i();let{height:t}=e.getBoundingClientRect();return t+8}:void 0});return(0,X.jsx)(`div`,{className:`mx-auto max-w-6xl px-4 py-8 lg:px-6`,children:(0,X.jsx)(`div`,{style:{height:`${a.getTotalSize()-8}px`,width:`100%`,position:`relative`},children:a.getVirtualItems().map(t=>{let n=e[t.index],r=t.index===e.length-1;return(0,X.jsx)(`div`,{"data-index":t.index,ref:a.measureElement,style:{position:`absolute`,top:0,left:0,width:`100%`,transform:`translateY(${t.start}px)`,paddingBottom:r?0:`8px`},children:(0,X.jsx)(Rn,{photo:n})},t.key)})})})};var Rn=e=>{let t=(0,In.c)(60),{photo:n}=e,{i18n:r}=o(),i=ee(),a=C(),s=(0,K.useRef)(null),c;t[0]!==n.id||t[1]!==a||t[2]!==i?(c=()=>{let e=i.findIndex(e=>e.id===n.id);if(e!==-1){let t=s.current?.parentElement instanceof HTMLElement?s.current.parentElement:s.current;a.openViewer(e,t??void 0)}},t[0]=n.id,t[1]=a,t[2]=i,t[3]=c):c=t[3];let l=c,u;t[4]===r.language?u=t[5]:(u=e=>new Date(e).toLocaleDateString(r.language,{year:`numeric`,month:`2-digit`,day:`2-digit`}),t[4]=r.language,t[5]=u);let d=u,f;t[6]===n?f=t[7]:(f=(()=>{if(!n.exif)return{camera:null,lens:null,iso:null,aperture:null,shutterSpeed:null,focalLength:null,exposureCompensation:null};let{exif:e}=n,t=e.Make&&e.Model?`${e.Make} ${e.Model}`:e.Model||e.Make||null,r=e.LensMake&&e.LensModel?`${e.LensMake} ${e.LensModel}`:e.LensModel||null,i=e.ISO||null,a=e.FNumber?`f/${e.FNumber}`:null,o=e.ExposureTime,s=null;if(o)s=typeof o==`number`?o>=1?`${o}s`:`1/${Math.round(1/o)}s`:`${o}s`;else if(e.ShutterSpeedValue){let t=typeof e.ShutterSpeedValue==`number`?e.ShutterSpeedValue:Number.parseFloat(String(e.ShutterSpeedValue));s=t>=1?`${t}s`:`1/${Math.round(1/t)}s`}let c=e.FocalLengthIn35mmFormat?`${Number.parseInt(e.FocalLengthIn35mmFormat)}mm`:e.FocalLength?`${Number.parseInt(e.FocalLength)}mm`:null,l=e.ExposureCompensation?`${e.ExposureCompensation} EV`:null;return{camera:t,lens:r,iso:i,aperture:a,shutterSpeed:s,focalLength:c,exposureCompensation:l}})(),t[6]=n,t[7]=f);let p=f,m;t[8]===l?m=t[9]:(m=e=>{(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),l())},t[8]=l,t[9]=m);let h=n.aspectRatio?`${n.aspectRatio}`:void 0,g;t[10]===h?g=t[11]:(g={aspectRatio:h},t[10]=h,t[11]=g);let _=n.thumbnailUrl||n.originalUrl,v=n.title||`Photo`,y;t[12]!==_||t[13]!==v?(y=(0,X.jsx)(`img`,{ref:s,src:_,alt:v,className:`h-full w-full object-contain transition-transform duration-300 group-hover:scale-105 lg:object-cover`}),t[12]=_,t[13]=v,t[14]=y):y=t[14];let b;t[15]===n.tags?b=t[16]:(b=n.tags&&n.tags.length>0&&(0,X.jsx)(`div`,{className:`pointer-events-none absolute inset-x-0 bottom-0 flex flex-wrap gap-1 p-2`,children:n.tags.map(zn)}),t[15]=n.tags,t[16]=b);let x;t[17]!==b||t[18]!==g||t[19]!==y?(x=(0,X.jsxs)(`div`,{className:`relative w-full shrink-0 cursor-pointer overflow-hidden lg:h-full lg:w-56`,role:`button`,tabIndex:0,style:g,children:[y,b]}),t[17]=b,t[18]=g,t[19]=y,t[20]=x):x=t[20];let S;t[21]===n.title?S=t[22]:(S=(0,X.jsx)(`h3`,{className:`mb-1.5 text-sm font-semibold text-white lg:text-base`,children:n.title}),t[21]=n.title,t[22]=S);let w;t[23]===n.location?w=t[24]:(w=n.location&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,X.jsx)(`i`,{className:`i-lucide-map-pin text-[10px]`}),(0,X.jsx)(`span`,{className:`truncate`,children:n.location.locationName})]}),t[23]=n.location,t[24]=w);let T;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,X.jsx)(`i`,{className:`i-lucide-calendar text-[10px]`}),t[25]=T):T=t[25];let E;t[26]!==d||t[27]!==n.lastModified?(E=d(new Date(n.lastModified).getTime()),t[26]=d,t[27]=n.lastModified,t[28]=E):E=t[28];let D;t[29]===E?D=t[30]:(D=(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[T,(0,X.jsx)(`span`,{children:E})]}),t[29]=E,t[30]=D);let O;t[31]===p.camera?O=t[32]:(O=p.camera&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,X.jsx)(`i`,{className:`i-lucide-camera text-[10px]`}),(0,X.jsx)(`span`,{className:`truncate`,children:p.camera})]}),t[31]=p.camera,t[32]=O);let k;t[33]===p.lens?k=t[34]:(k=p.lens&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,X.jsx)(`i`,{className:`i-lucide-aperture text-[10px]`}),(0,X.jsx)(`span`,{className:`truncate`,children:p.lens})]}),t[33]=p.lens,t[34]=k);let A;t[35]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,X.jsx)(`i`,{className:`i-lucide-image text-[10px]`}),t[35]=A):A=t[35];let j;t[36]!==n.height||t[37]!==n.width?(j=(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[A,(0,X.jsxs)(`span`,{children:[n.width,` x `,n.height]})]}),t[36]=n.height,t[37]=n.width,t[38]=j):j=t[38];let M;t[39]!==w||t[40]!==D||t[41]!==O||t[42]!==k||t[43]!==j?(M=(0,X.jsxs)(`div`,{className:`space-y-1.5 text-[11px] leading-tight text-white/60 lg:text-xs`,children:[w,D,O,k,j]}),t[39]=w,t[40]=D,t[41]=O,t[42]=k,t[43]=j,t[44]=M):M=t[44];let N;t[45]!==p.aperture||t[46]!==p.exposureCompensation||t[47]!==p.focalLength||t[48]!==p.iso||t[49]!==p.shutterSpeed?(N=(p.iso||p.aperture||p.shutterSpeed||p.focalLength)&&(0,X.jsxs)(`div`,{className:`mt-2 flex flex-wrap items-center gap-1.5 border-t border-white/10 pt-2`,children:[p.iso&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1 rounded-md bg-white/10 px-2 py-1 backdrop-blur-md`,children:[(0,X.jsx)(`i`,{className:`i-lucide-gauge text-[10px] text-white/70`}),(0,X.jsxs)(`span`,{className:`text-[11px] text-white/90`,children:[`ISO `,p.iso]})]}),p.aperture&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1 rounded-md bg-white/10 px-2 py-1 backdrop-blur-md`,children:[(0,X.jsx)(`i`,{className:`i-lucide-circle-dot text-[10px] text-white/70`}),(0,X.jsx)(`span`,{className:`text-[11px] text-white/90`,children:p.aperture})]}),p.shutterSpeed&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1 rounded-md bg-white/10 px-2 py-1 backdrop-blur-md`,children:[(0,X.jsx)(`i`,{className:`i-lucide-timer text-[10px] text-white/70`}),(0,X.jsx)(`span`,{className:`text-[11px] text-white/90`,children:p.shutterSpeed})]}),p.focalLength&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1 rounded-md bg-white/10 px-2 py-1 backdrop-blur-md`,children:[(0,X.jsx)(`i`,{className:`i-lucide-maximize-2 text-[10px] text-white/70`}),(0,X.jsx)(`span`,{className:`text-[11px] text-white/90`,children:p.focalLength})]}),p.exposureCompensation&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1 rounded-md bg-white/5 px-1.5 py-0.5`,children:[(0,X.jsx)(`i`,{className:`i-lucide-sliders-horizontal text-[10px] text-white/60`}),(0,X.jsx)(`span`,{className:`text-[11px] text-white/70`,children:p.exposureCompensation})]})]}),t[45]=p.aperture,t[46]=p.exposureCompensation,t[47]=p.focalLength,t[48]=p.iso,t[49]=p.shutterSpeed,t[50]=N):N=t[50];let P;t[51]!==S||t[52]!==M||t[53]!==N?(P=(0,X.jsx)(`div`,{className:`flex min-w-0 flex-1 flex-col overflow-hidden py-1 lg:h-full`,children:(0,X.jsxs)(`div`,{className:`min-h-0 flex-1 overflow-y-auto`,children:[S,M,N]})}),t[51]=S,t[52]=M,t[53]=N,t[54]=P):P=t[54];let F;return t[55]!==l||t[56]!==x||t[57]!==P||t[58]!==m?(F=(0,X.jsxs)(`div`,{onClick:l,role:`button`,tabIndex:0,onKeyDown:m,className:`group flex flex-col gap-2 overflow-hidden border border-white/5 bg-white/5 p-2 backdrop-blur-sm transition-all duration-200 hover:border-white/10 hover:bg-white/8 lg:h-44 lg:flex-row lg:gap-3`,children:[x,P]}),t[55]=l,t[56]=x,t[57]=P,t[58]=m,t[59]=F):F=t[59],F};function zn(e){return(0,X.jsx)(`span`,{className:`rounded-full bg-white/20 px-1.5 py-0.5 text-[10px] font-medium text-white/90 backdrop-blur-sm`,children:e},e)}var Bn=`undefined`,Vn=typeof window===Bn?{}:window,Hn=typeof performance===Bn?Date:performance,Un=()=>Hn.now(),Wn=`AnimationFrame`,Gn=`cancel`+Wn,Kn=`request`+Wn,qn=Vn[Kn]&&Vn[Kn].bind(Vn),Jn=Vn[Gn]&&Vn[Gn].bind(Vn);function Yn(e){return clearTimeout(e)}if(!qn||!Jn){let e=0;qn=t=>{let n=Un(),r=Math.max(e+1e3/60,n);return setTimeout(()=>{t(e=r)},r-n)},Jn=Yn}const Xn=e=>{Jn(e.v||-1)},Zn=(e,t)=>{let n=Un(),r={},i=()=>{Un()-n>=t?e.call(null):r.v=qn(i)};return r.v=qn(i),r};var Qn=e=>{let t=K.useRef(e);return K.useEffect(()=>{t.current=e}),t};const $n=(e,t=100,n=!1)=>{let r=Qn(e),i=K.useRef(),a=[t,n,r];function o(){i.current&&clearTimeout(i.current),i.current=void 0}K.useEffect(()=>o,a);function s(){i.current=void 0}return K.useCallback(function(){let e=arguments,{current:a}=i;if(a===void 0&&n)return i.current=setTimeout(s,t),r.current.apply(null,e);a&&clearTimeout(a),i.current=setTimeout(()=>{i.current=void 0,r.current.apply(null,e)},t)},a)},er=(e,t,n)=>{let r=K.useState(e);return[r[0],$n(r[1],t,n)]};function tr(e,t,n,r){let i=K.useRef(n),a=K.useRef(r);K.useEffect(()=>{i.current=n,a.current=r}),K.useEffect(()=>{let n=e&&`current`in e?e.current:e;if(!n)return;let r=0;function o(...e){r||i.current.apply(this,e)}n.addEventListener(t,o);let s=a.current;return()=>{r=1,n.removeEventListener(t,o),s&&s()}},[e,t])}var nr=tr,rr={},ir=typeof window>`u`?null:window,ar=ir&&ir.visualViewport!==void 0?ir.visualViewport:null,or=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight];const sr=function(e){e===void 0&&(e=rr);let{wait:t,leading:n,initialWidth:r=0,initialHeight:i=0}=e,[a,o]=er(typeof document>`u`?[r,i]:or,t,n),s=()=>o(or);return nr(ir,`resize`,s),nr(ar,`resize`,s),nr(ir,`orientationchange`,s),a};var Z=0,Q=1,cr=2,lr=0,ur=1;function dr(e,t,n){let r=e.list,i;for(;r;){if(r.index===n)return!1;if(t>r.high)break;i=r,r=r.next}return i||(e.list={index:n,high:t,next:r}),i&&(i.next={index:n,high:t,next:i.next}),!0}function fr(e,t){let n=e.list;if(n.index===t)return n.next===null?lr:(e.list=n.next,ur);let r=n;for(n=n.next;n!==null;){if(n.index===t)return r.next=n.next,ur;r=n,n=n.next}}var $={low:0,max:0,high:0,C:cr,P:void 0,R:void 0,L:void 0,list:void 0};$.P=$,$.L=$,$.R=$;function pr(e){let t=e.high;e.L===$&&e.R===$?e.max=t:e.L===$?e.max=Math.max(e.R.max,t):e.R===$?e.max=Math.max(e.L.max,t):e.max=Math.max(Math.max(e.L.max,e.R.max),t)}function mr(e){let t=e;for(;t.P!==$;)pr(t.P),t=t.P}function hr(e,t){if(t.R===$)return;let n=t.R;t.R=n.L,n.L!==$&&(n.L.P=t),n.P=t.P,t.P===$?e.root=n:t===t.P.L?t.P.L=n:t.P.R=n,n.L=t,t.P=n,pr(t),pr(n)}function gr(e,t){if(t.L===$)return;let n=t.L;t.L=n.R,n.R!==$&&(n.R.P=t),n.P=t.P,t.P===$?e.root=n:t===t.P.R?t.P.R=n:t.P.L=n,n.R=t,t.P=n,pr(t),pr(n)}function _r(e,t,n){t.P===$?e.root=n:t===t.P.L?t.P.L=n:t.P.R=n,n.P=t.P}function vr(e,t){let n;for(;t!==$&&t.C===Q;)t===t.P.L?(n=t.P.R,n.C===Z&&(n.C=Q,t.P.C=Z,hr(e,t.P),n=t.P.R),n.L.C===Q&&n.R.C===Q?(n.C=Z,t=t.P):(n.R.C===Q&&(n.L.C=Q,n.C=Z,gr(e,n),n=t.P.R),n.C=t.P.C,t.P.C=Q,n.R.C=Q,hr(e,t.P),t=e.root)):(n=t.P.L,n.C===Z&&(n.C=Q,t.P.C=Z,gr(e,t.P),n=t.P.L),n.R.C===Q&&n.L.C===Q?(n.C=Z,t=t.P):(n.L.C===Q&&(n.R.C=Q,n.C=Z,hr(e,n),n=t.P.L),n.C=t.P.C,t.P.C=Q,n.L.C=Q,gr(e,t.P),t=e.root));t.C=Q}function yr(e){for(;e.L!==$;)e=e.L;return e}function br(e,t){let n;for(;t.P.C===Z;)t.P===t.P.P.L?(n=t.P.P.R,n.C===Z?(t.P.C=Q,n.C=Q,t.P.P.C=Z,t=t.P.P):(t===t.P.R&&(t=t.P,hr(e,t)),t.P.C=Q,t.P.P.C=Z,gr(e,t.P.P))):(n=t.P.P.L,n.C===Z?(t.P.C=Q,n.C=Q,t.P.P.C=Z,t=t.P.P):(t===t.P.L&&(t=t.P,gr(e,t)),t.P.C=Q,t.P.P.C=Z,hr(e,t.P.P)));e.root.C=Q}function xr(){let e={root:$,size:0},t={};return{insert(n,r,i){let a=e.root,o=$;for(;a!==$&&(o=a,n!==o.low);)a=n<a.low?a.L:a.R;if(n===o.low&&o!==$){if(!dr(o,r,i))return;o.high=Math.max(o.high,r),pr(o),mr(o),t[i]=o,e.size++;return}let s={low:n,high:r,max:r,C:Z,P:o,L:$,R:$,list:{index:i,high:r,next:null}};o===$?e.root=s:(s.low<o.low?o.L=s:o.R=s,mr(s)),br(e,s),t[i]=s,e.size++},remove(n){let r=t[n];if(r===void 0)return;delete t[n];let i=fr(r,n);if(i===void 0)return;if(i===ur){r.high=r.list.high,pr(r),mr(r),e.size--;return}let a=r,o=a.C,s;r.L===$?(s=r.R,_r(e,r,r.R)):r.R===$?(s=r.L,_r(e,r,r.L)):(a=yr(r.R),o=a.C,s=a.R,a.P===r?s.P=a:(_r(e,a,a.R),a.R=r.R,a.R.P=a),_r(e,r,a),a.L=r.L,a.L.P=a,a.C=r.C),pr(s),mr(s),o===Q&&vr(e,s),e.size--},search(t,n,r){let i=[e.root];for(;i.length!==0;){let e=i.pop();if(!(e===$||t>e.max)&&(e.L!==$&&i.push(e.L),e.R!==$&&i.push(e.R),e.low<=n&&e.high>=t)){let n=e.list;for(;n!==null;)n.high>=t&&r(n.index,e.low),n=n.next}}},get size(){return e.size}}}var Sr=(e,t)=>{let n=t||Cr,r,i;return function(){return r&&n(arguments,r)?i:i=e.apply(null,r=arguments)}},Cr=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3],wr=class{constructor(){this.set=void 0,this.get=void 0;let e,t;this.get=n=>n===e?t:void 0,this.set=(n,r)=>{e=n,t=r}}},Tr=e=>{try{return new e}catch{let e={};return{set(t,n){e[t]=n},get(t){return e[t]}}}},Er=e=>{let t=e.length,n=Tr(e[0]),r,i,a,o,s=t===1;return t<3?{g:e=>(r=n.get(e[0]))===void 0||s?r:r.get(e[1]),s:(t,a)=>(s?n.set(t[0],a):(r=n.get(t[0]))===void 0?(i=Tr(e[1]),i.set(t[1],a),n.set(t[0],i)):r.set(t[1],a),a)}:{g:e=>{for(o=n,a=0;a<t;a++)if((o=o.get(e[a]))===void 0)return;return o},s:(r,s)=>{for(o=n,a=0;a<t-1;a++)(i=o.get(r[a]))===void 0?(i=Tr(e[a+1]),o.set(r[a],i),o=i):o=i;return o.set(r[t-1],s),s}}},Dr=(e,t)=>{let n,{g:r,s:i}=Er(e);return function(){return(n=r(arguments))===void 0?i(arguments,t.apply(null,arguments)):n}};const Or=new WeakMap;function kr(){let e=K.useState(Ar)[1];return K.useRef(()=>e({})).current}var Ar={},jr=K.createElement;function Mr(e){let{positioner:t,resizeObserver:n,items:r,as:i=`div`,id:a,className:o,style:s,role:c=`grid`,tabIndex:l=0,containerRef:u,itemAs:d=`div`,itemStyle:f,itemHeightEstimate:p=300,itemKey:m=Rr,overscanBy:h=2,scrollTop:g,isScrolling:_,height:v,render:y,onRender:b}=e,x=0,S,C=kr(),w=Br(t,n),T=r.length,{columnWidth:E,columnCount:D,range:O,estimateHeight:k,size:A,shortestColumn:j}=t,M=A(),N=j(),P=[],F=c===`list`?`listitem`:c===`grid`?`gridcell`:void 0,I=Qn(b);h=v*h;let L=g+h,R=N<L&&M<T;if(O(Math.max(0,g-h/2),L,(e,t,n)=>{let i=r[e],a=m(i,e),o={top:n,left:t,width:E,writingMode:`horizontal-tb`,position:`absolute`};P.push(jr(d,{key:a,ref:w(e),role:F,style:typeof f==`object`&&f?Object.assign({},o,f):o},Pr(y,e,i,E))),S===void 0?(x=e,S=e):(x=Math.min(x,e),S=Math.max(S,e))}),R){let e=Math.min(T-M,Math.ceil((g+h-N)/p*D)),t=M,n=zr(E);for(;t<M+e;t++){let e=r[t],i=m(e,t);P.push(jr(d,{key:i,ref:w(t),role:F,style:typeof f==`object`?Object.assign({},n,f):n},Pr(y,t,e,E)))}}K.useEffect(()=>{typeof I.current==`function`&&S!==void 0&&I.current(x,S,r),Nr=`1`},[x,S,r,I]),K.useEffect(()=>{R&&C()},[R,t]);let z=Fr(_,k(T,p));return jr(i,{ref:u,key:Nr,id:a,role:c,className:o,tabIndex:l,style:typeof s==`object`?Lr(z,s):z,children:P})}var Nr=`0`,Pr=Dr([wr,{},WeakMap,wr],(e,t,n,r)=>jr(e,{index:t,data:n,width:r})),Fr=Sr((e,t)=>({position:`relative`,width:`100%`,maxWidth:`100%`,height:Math.ceil(t),maxHeight:Math.ceil(t),willChange:e?`contents`:void 0,pointerEvents:e?`none`:void 0})),Ir=(e,t)=>e[0]===t[0]&&e[1]===t[1],Lr=Sr((e,t)=>Object.assign({},e,t),Ir);function Rr(e,t){return t}var zr=Sr(e=>({width:e,zIndex:-1e3,visibility:`hidden`,position:`absolute`,writingMode:`horizontal-tb`}),(e,t)=>e[0]===t[0]),Br=Sr((e,t)=>n=>r=>{r!==null&&(t&&(t.observe(r),Or.set(r,n)),e.get(n)===void 0&&e.set(n,r.offsetHeight))},Ir),Vr=typeof performance<`u`?performance:Date,Hr=()=>Vr.now();function Ur(e,t=30,n=!1){let r=Qn(e),i=1e3/t,a=K.useRef(0),o=K.useRef(),s=()=>o.current&&clearTimeout(o.current),c=[t,n,r];function l(){a.current=0,s()}return K.useEffect(()=>l,c),K.useCallback(function(){let e=arguments,t=Hr(),c=()=>{a.current=t,s(),r.current.apply(null,e)},l=a.current;if(n&&l===0)return c();if(t-l>i){if(l>0)return c();a.current=t}s(),o.current=setTimeout(()=>{c(),a.current=0},i)},c)}function Wr(e,t){let{width:n,columnWidth:r=200,columnGutter:i=0,rowGutter:a,columnCount:o,maxColumnCount:s,maxColumnWidth:c}=e;t===void 0&&(t=Jr);let l=()=>{let[e,t]=qr(n,r,i,o,s,c);return Gr(t,e,i,a??i)},u=K.useRef();u.current===void 0&&(u.current=l());let d=K.useRef(t),f=[n,r,i,a,o,s,c],p=K.useRef(f),m=!f.every((e,t)=>p.current[t]===e);if(m||!t.every((e,t)=>d.current[t]===e)){let e=u.current,n=l();if(d.current=t,p.current=f,m){let t=e.size();for(let r=0;r<t;r++){let t=e.get(r);n.set(r,t===void 0?0:t.height)}}u.current=n}return u.current}const Gr=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=n);let i=xr(),a=Array(e),o=[],s=Array(e);for(let t=0;t<e;t++)a[t]=0,s[t]=[];return{columnCount:e,columnWidth:t,set:function(e,c){c===void 0&&(c=0);let l=0;for(let e=1;e<a.length;e++)a[e]<a[l]&&(l=e);let u=a[l]||0;a[l]=u+c+r,s[l].push(e),o[e]={left:l*(t+n),top:u,height:c,column:l},i.insert(u,u+c,e)},get:e=>o[e],update:t=>{let n=Array(e),c=0,l=0;for(;c<t.length-1;c++){let e=t[c],r=o[e];r.height=t[++c],i.remove(e),i.insert(r.top,r.top+r.height,e),n[r.column]=n[r.column]===void 0?e:Math.min(e,n[r.column])}for(c=0;c<n.length;c++){if(n[c]===void 0)continue;let e=s[c],t=Kr(e,n[c]),u=o[s[c][t]];for(a[c]=u.top+u.height+r,l=t+1;l<e.length;l++){let t=e[l],n=o[t];n.top=a[c],a[c]=n.top+n.height+r,i.remove(t),i.insert(n.top,n.top+n.height,t)}}},range:(e,t,n)=>i.search(e,t,(e,t)=>n(e,o[e].left,t)),estimateHeight:(t,n)=>{let r=Math.max(0,Math.max.apply(null,a));return t===i.size?r:r+Math.ceil((t-i.size)/e)*n},shortestColumn:()=>a.length>1?Math.min.apply(null,a):a[0]||0,size(){return i.size},all(){return o}}};var Kr=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){let i=n+r>>>1,a=e[i];if(a===t)return i;a<=t?n=i+1:r=i-1}return-1},qr=function(e,t,n,r,i,a){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=8),r=r||Math.min(Math.floor((e+n)/(t+n)),i||1/0)||1;let o=Math.floor((e-n*(r-1))/r);return a!==void 0&&o>a&&(o=a),[o,r]},Jr=[],Yr=function(e){var t=[],n=null,r=function(){t=[...arguments],!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&=(cancelAnimationFrame(n),null)},r};function Xr(e){e.cancel()}const Zr=Dr([WeakMap],(e,t)=>{let n=[],r=Yr(()=>{n.length>0&&(e.update(n),t(n)),n.length=0}),i=t=>{let i=t.offsetHeight;if(i>0){let r=Or.get(t);if(r!==void 0){let t=e.get(r);t!==void 0&&i!==t.height&&n.push(r,i)}}r()},a=new Map,o=new ResizeObserver(e=>{let t=0;for(;t<e.length;t++){let n=e[t],r=Or.get(n.target);if(r===void 0)continue;let o=a.get(r);o||(o=Yr(i),a.set(r,o)),o(n.target)}}),s=o.disconnect.bind(o);return o.disconnect=()=>{s(),a.forEach(Xr)},o});function Qr(e,t){let{align:n=`top`,element:r=typeof window<`u`&&window,offset:i=0,height:a=typeof window<`u`?window.innerHeight:0}=t,o=Qn({positioner:e,element:r,align:n,offset:i,height:a}),s=K.useRef(()=>{let e=o.current.element;return e&&`current`in e?e.current:e}).current,[c,l]=K.useReducer((e,t)=>{let n={position:e.position,index:e.index,prevTop:e.prevTop};if(t.type===`scrollToIndex`)return{position:o.current.positioner.get(t.value??-1),index:t.value,prevTop:void 0};if(t.type===`setPosition`)n.position=t.value;else if(t.type===`setPrevTop`)n.prevTop=t.value;else if(t.type===`reset`)return $r;return n},$r),u=Ur(l,15);nr(s(),`scroll`,()=>{if(!c.position&&c.index){let e=o.current.positioner.get(c.index);e&&l({type:`setPosition`,value:e})}});let d=c.index!==void 0&&o.current.positioner.get(c.index)?.top;return K.useEffect(()=>{let e=s();if(!e)return;let{height:t,align:n,offset:r,positioner:i}=o.current;if(c.position){let i=c.position.top;n===`bottom`?i=i-t+c.position.height:n===`center`&&(i-=(t-c.position.height)/2),e.scrollTo(0,Math.max(0,i+=r));let a=!1,o=setTimeout(()=>!a&&l({type:`reset`}),400);return()=>{a=!0,clearTimeout(o)}}else if(c.index!==void 0){let n=i.shortestColumn()/i.size()*c.index;c.prevTop&&(n=Math.max(n,c.prevTop+t)),e.scrollTo(0,n),u({type:`setPrevTop`,value:n})}},[d,c,o,s,u]),K.useRef(e=>{l({type:`scrollToIndex`,value:e})}).current}var $r={index:void 0,position:void 0,prevTop:void 0},ei=r();const ti=e=>{let[t,n]=K.useState(0),[r,i]=K.useState(!1),a=x(),o=e.scrollFps||12;K.useEffect(()=>{if(!a)return;let e=E(()=>{i(!0),n(a.scrollTop)},1e3/o);return a.addEventListener(`scroll`,e),()=>{a.removeEventListener(`scroll`,e)}},[o,a]);let s=K.useRef(0);K.useEffect(()=>{s.current===1&&i(!0);let e=!1,t=Zn(()=>{e||i(!1)},40+1e3/o);return s.current=1,()=>{e=!0,Xn(t)}},[o,t]);let c=K.useRef(null),l=sr({initialWidth:e.ssrWidth,initialHeight:e.ssrHeight}),u=ri(c,l),d=Object.assign({offset:u.offset,width:u.width||l[0],height:u.height||l[1],containerRef:c},e),[f,p]=K.useState(0);K.useImperativeHandle(e.ref,()=>({reposition:()=>{p(e=>e+1)}}));let m=K.useRef(e.items.length),h=!1;e.items.length!==m.current&&(e.items.length<m.current&&(h=!0),m.current=e.items.length),d.positioner=Wr(d,[h?Math.random()+f:f]),d.resizeObserver=ii(d.positioner),d.scrollTop=t,d.isScrolling=r,d.height=window.innerHeight;let g=Qr(d.positioner,{height:d.height,offset:u.offset,align:typeof e.scrollToIndex==`object`?e.scrollToIndex.align:void 0}),_=e.scrollToIndex&&(typeof e.scrollToIndex==`number`?e.scrollToIndex:e.scrollToIndex.index);return K.useEffect(()=>{_!==void 0&&g(_)},[_,g]),(0,X.jsx)(ni,{...d})};function ni(e){let t=(0,ei.c)(21),n;return t[0]!==e.as||t[1]!==e.className||t[2]!==e.containerRef||t[3]!==e.height||t[4]!==e.id||t[5]!==e.isScrolling||t[6]!==e.itemAs||t[7]!==e.itemHeightEstimate||t[8]!==e.itemKey||t[9]!==e.itemStyle||t[10]!==e.items||t[11]!==e.onRender||t[12]!==e.overscanBy||t[13]!==e.positioner||t[14]!==e.render||t[15]!==e.resizeObserver||t[16]!==e.role||t[17]!==e.scrollTop||t[18]!==e.style||t[19]!==e.tabIndex?(n={scrollTop:e.scrollTop,isScrolling:e.isScrolling,positioner:e.positioner,resizeObserver:e.resizeObserver,items:e.items,onRender:e.onRender,as:e.as,id:e.id,className:e.className,style:e.style,role:e.role,tabIndex:e.tabIndex,containerRef:e.containerRef,itemAs:e.itemAs,itemStyle:e.itemStyle,itemHeightEstimate:e.itemHeightEstimate,itemKey:e.itemKey,overscanBy:e.overscanBy,height:e.height,render:e.render},t[0]=e.as,t[1]=e.className,t[2]=e.containerRef,t[3]=e.height,t[4]=e.id,t[5]=e.isScrolling,t[6]=e.itemAs,t[7]=e.itemHeightEstimate,t[8]=e.itemKey,t[9]=e.itemStyle,t[10]=e.items,t[11]=e.onRender,t[12]=e.overscanBy,t[13]=e.positioner,t[14]=e.render,t[15]=e.resizeObserver,t[16]=e.role,t[17]=e.scrollTop,t[18]=e.style,t[19]=e.tabIndex,t[20]=n):n=t[20],Mr(n)}function ri(e,t=[]){let[n,r]=K.useState({offset:0,width:0,height:0});return K.useLayoutEffect(()=>{let{current:t}=e;if(t!==null){let e=0,i=t;do e+=i.offsetTop||0,i=i.offsetParent;while(i);(e!==n.offset||t.offsetWidth!==n.width)&&r({offset:e,width:t.offsetWidth,height:t.offsetHeight})}},t),K.useEffect(()=>{let t=new ResizeObserver(()=>{r(t=>{let n={...t,width:e.current?.offsetWidth||0};return et(n,t)?t:n})});return t.observe(e.current),()=>{t.disconnect()}},[n,e]),n}function ii(e){let t=(0,ei.c)(6),[n]=nt(),r;t[0]!==n||t[1]!==e?(r=Zr(e,E(n,83.33333333333333)),t[0]=n,t[1]=e,t[2]=r):r=t[2];let i=r,a,o;return t[3]===i?(a=t[4],o=t[5]):(a=()=>()=>i.disconnect(),o=[i],t[3]=i,t[4]=a,t[5]=o),K.useEffect(a,o),i}const ai=(0,K.memo)(({data:e,width:t})=>{let n=ee(),r=C(),{t:i}=o(),[a,s]=(0,K.useState)(!1),[c,d]=(0,K.useState)(!1),[f,p]=(0,K.useState)(!1),[h,g]=(0,K.useState)(!1),[_,v]=(0,K.useState)(!1),[y,b]=(0,K.useState)(null),x=(0,K.useRef)(null),S=(0,K.useRef)(null),w=(0,K.useRef)(null),T=(0,K.useRef)(null),E=()=>{s(!0)},D=()=>{d(!0)},O=()=>{let t=n.findIndex(t=>t.id===e.id);if(t!==-1){let e=x.current?.parentElement instanceof HTMLElement?x.current.parentElement:x.current;r.openViewer(t,e??void 0)}},k=t/e.aspectRatio,A=(()=>{let{exif:t}=e;if(!t)return{focalLength35mm:null,iso:null,shutterSpeed:null,aperture:null};let n=t.FocalLengthIn35mmFormat?Number.parseInt(t.FocalLengthIn35mmFormat):t.FocalLength?Number.parseInt(t.FocalLength):null,r=t.ISO,i=t.ExposureTime;return{focalLength35mm:n,iso:r,shutterSpeed:i?`${i}s`:null,aperture:t.FNumber?`f/${t.FNumber}`:null}})(),j=e.video!==void 0;(0,K.useEffect)(()=>{if(!e.video||!a||h||_||!S.current)return;let{video:t,originalUrl:n}=e;return(async()=>{v(!0);let e=new l;T.current=e;try{let r;r=t.type===`motion-photo`?{type:`motion-photo`,imageUrl:n,offset:t.offset,size:t.size,presentationTimestamp:t.presentationTimestamp}:t.type===`live-photo`?{type:`live-photo`,videoUrl:t.videoUrl}:{type:`none`},r.type!==`none`&&(await e.processVideo(r,S.current),g(!0))}catch(e){console.error(`Failed to process video:`,e),b(e)}finally{v(!1)}})(),()=>{T.current&&=(T.current.cleanup(),null)}},[e.video,e.originalUrl,a,h]);let M=(0,K.useCallback)(()=>{u||!j||!h||f||_||(w.current=setTimeout(()=>{p(!0);let e=S.current;e&&(e.currentTime=0,e.play())},200))},[j,h,f,_]),P=(0,K.useCallback)(()=>{if(w.current&&=(clearTimeout(w.current),null),f){p(!1);let e=S.current;e&&(e.pause(),e.currentTime=0)}},[f]),F=(0,K.useCallback)(()=>{p(!1)},[]);return(0,K.useEffect)(()=>()=>{w.current&&=(clearTimeout(w.current),null)},[]),(0,X.jsxs)(Ie.div,{className:`bg-fill-quaternary group relative w-full cursor-pointer overflow-hidden`,style:{width:t,height:k},"data-photo-id":e.id,onClick:O,onMouseEnter:M,onMouseLeave:P,children:[e.thumbHash&&(0,X.jsx)(me,{thumbHash:e.thumbHash,className:`absolute inset-0`}),!c&&(0,X.jsx)(`img`,{ref:x,src:e.thumbnailUrl,alt:e.title,loading:`lazy`,className:`absolute inset-0 h-full w-full object-cover duration-300 group-hover:scale-105`,onLoad:E,onError:D}),j&&(0,X.jsx)(`video`,{ref:S,className:U(`absolute inset-0 h-full w-full object-cover duration-300 group-hover:scale-105`,f?`z-10`:`pointer-events-none opacity-0`),muted:!0,playsInline:!0,onEnded:F}),c&&(0,X.jsx)(`div`,{className:`bg-fill-quaternary text-text-tertiary absolute inset-0 flex items-center justify-center`,children:(0,X.jsxs)(`div`,{className:`text-center`,children:[(0,X.jsx)(`i`,{className:`i-mingcute-image-line text-2xl`}),(0,X.jsx)(`p`,{className:`mt-2 text-sm`,children:i(`photo.error.loading`)})]})}),j&&(0,X.jsx)(`div`,{className:U(`absolute z-20 flex items-center space-x-1 rounded-xl bg-black/50 px-1 py-1 text-xs text-white transition-all duration-200 hover:bg-black/70`,`top-2 left-2`,`flex-wrap gap-y-1`),title:i(u?`photo.live.tooltip.mobile.main`:`photo.live.tooltip.desktop.main`),children:_?(0,X.jsxs)(`div`,{className:`flex items-center gap-1 px-1`,children:[(0,X.jsx)(`i`,{className:`i-mingcute-loading-line animate-spin`}),(0,X.jsx)(`span`,{children:i(`loading.converting`)})]}):(0,X.jsxs)(K.Fragment,{children:[(0,X.jsx)(`i`,{className:`i-mingcute-live-photo-line size-4 shrink-0`}),(0,X.jsx)(`span`,{className:`mr-1 shrink-0`,children:i(`photo.live.badge`)}),y?(0,X.jsx)(`span`,{className:`bg-warning/20 ml-0.5 rounded px-1 text-xs`,children:(0,X.jsx)(`div`,{className:`text-yellow w-3 text-center font-bold`,title:y.message,children:`!`})}):null]})}),a&&(0,X.jsxs)(`div`,{className:`pointer-events-none`,children:[(0,X.jsx)(`div`,{className:`pointer-events-none absolute inset-0 bg-linear-to-t from-black/80 via-black/20 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100`}),(0,X.jsxs)(`div`,{className:`absolute inset-x-0 bottom-0 p-4 pb-0 text-white`,children:[(0,X.jsxs)(`div`,{className:`mb-3 **:duration-300`,children:[(0,X.jsx)(`h3`,{className:`mb-2 truncate text-sm font-medium opacity-0 group-hover:opacity-100`,children:e.title}),e.description&&(0,X.jsx)(`p`,{className:`mb-2 line-clamp-2 text-sm text-white/80 opacity-0 group-hover:opacity-100`,children:e.description}),(0,X.jsxs)(`div`,{className:`mb-2 flex flex-wrap gap-2 text-xs text-white/80 opacity-0 group-hover:opacity-100`,children:[(0,X.jsx)(`span`,{children:e.format}),(0,X.jsx)(`span`,{children:`•`}),(0,X.jsxs)(`span`,{children:[e.width,` × `,e.height]}),(0,X.jsx)(`span`,{children:`•`}),(0,X.jsxs)(`span`,{children:[(e.size/1024/1024).toFixed(1),`MB`]})]}),e.tags&&e.tags.length>0&&(0,X.jsx)(`div`,{className:`flex flex-wrap gap-1.5`,children:e.tags.map(e=>(0,X.jsx)(`span`,{className:`rounded-full bg-white/20 px-2 py-0.5 text-xs text-white/90 opacity-0 backdrop-blur-sm group-hover:opacity-100`,children:e},e))})]}),k>=200&&(0,X.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 pb-4 text-xs`,children:[A.focalLength35mm&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5 rounded-md bg-white/10 px-2 py-1 opacity-0 backdrop-blur-md transition-opacity duration-300 group-hover:opacity-100`,children:[(0,X.jsx)(Te,{className:`text-white/70`}),(0,X.jsxs)(`span`,{className:`text-white/90`,children:[A.focalLength35mm,`mm`]})]}),A.aperture&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5 rounded-md bg-white/10 px-2 py-1 opacity-0 backdrop-blur-md transition-opacity duration-300 group-hover:opacity-100`,children:[(0,X.jsx)(N,{className:`text-white/70`}),(0,X.jsx)(`span`,{className:`text-white/90`,children:A.aperture})]}),A.shutterSpeed&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5 rounded-md bg-white/10 px-2 py-1 opacity-0 backdrop-blur-md transition-opacity duration-300 group-hover:opacity-100`,children:[(0,X.jsx)(m,{className:`text-white/70`}),(0,X.jsx)(`span`,{className:`text-white/90`,children:A.shutterSpeed})]}),A.iso&&(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5 rounded-md bg-white/10 px-2 py-1 opacity-0 backdrop-blur-md transition-opacity duration-300 group-hover:opacity-100`,children:[(0,X.jsx)(R,{className:`text-white/70`}),(0,X.jsxs)(`span`,{className:`text-white/90`,children:[`ISO `,A.iso]})]})]})]})]})]})});var oi=r(),si={auto:{mobile:150,desktop:250,maxColumns:8},min:{mobile:120,desktop:200},max:{mobile:250,desktop:500}};const ci=e=>{let t=(0,oi.c)(6),{photos:n,onRender:r}=e,{columns:i}=L(Ge),[a,o]=(0,K.useState)(0),c=(0,K.useRef)(null),l=s(),u,d;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{let e=()=>{o(window.innerWidth)};return e(),window.addEventListener(`resize`,e),()=>{window.removeEventListener(`resize`,e)}},d=[],t[0]=u,t[1]=d):(u=t[0],d=t[1]),(0,K.useEffect)(u,d);let f;bb0:{let{auto:e,min:t,max:n}=si,r=a-(l?8:32);if(i===`auto`){let t=l?e.mobile:e.desktop;if(!l){let{maxColumns:n}=e;if(Math.floor((r+4)/(t+4))>n){f=(r-(n-1)*4)/n;break bb0}}f=t;break bb0}let o=(r-(i-1)*4)/i,s=l?t.mobile:t.desktop,c=l?n.mobile:n.desktop;f=Math.max(Math.min(o,c),s)}let p=f,m;return t[2]!==p||t[3]!==r||t[4]!==n?(m=(0,X.jsx)(ti,{ref:c,items:n,render:ui,onRender:r,columnWidth:p,columnGutter:4,rowGutter:4,itemHeightEstimate:400,itemKey:di}),t[2]=p,t[3]=r,t[4]=n,t[5]=m):m=t[5],m};var li=(0,K.memo)(ai);function ui(e){return(0,X.jsx)(li,{...e})}function di(e,t){return e.id}var fi=r();const pi=e=>{let t=(0,fi.c)(16),{dateRange:n,location:r,showDateRange:i}=e,{t:a}=o(),s;t[0]===a?s=t[1]:(s=e=>a(`date.day.${e}`),t[0]=a,t[1]=s);let c=s,l;t[2]===a?l=t[3]:(l=e=>a(`date.month.${e}`),t[2]=a,t[3]=l);let u=l,d;t[4]!==c||t[5]!==u?(d=e=>{let t=e.match(/(\d{4})年(\d+)月\s*-\s*(\d{4})年(\d+)月/);if(t){let[,e,n,r,i]=t;return`${u(n)} ${e} - ${u(i)} ${r}`}let n=e.match(/(\d{4})年(\d+)月(\d+)日?\s*-\s*(\d+)月(\d+)日?/);if(n){let[,e,t,r,i,a]=n;return`${u(t)} ${c(r)} - ${u(i)} ${c(a)} ${e}`}let r=e.match(/(\d{4})年(\d+)月\s*-\s*(\d+)月/);if(r){let[,e,t,n]=r;return`${u(t)} - ${u(n)} ${e}`}let i=e.match(/(\d{4})年(\d+)月(\d+)日/);if(i){let[,e,t,n]=i;return`${u(t)} ${c(n)} ${e}`}return e},t[4]=c,t[5]=u,t[6]=d):d=t[6];let f=d,p;t[7]!==n||t[8]!==f?(p=n?f(n):void 0,t[7]=n,t[8]=f,t[9]=p):p=t[9];let m=p,h=i&&m,g;t[10]!==m||t[11]!==r||t[12]!==h?(g=h&&(0,X.jsxs)(Ie.div,{initial:{y:20,opacity:0,filter:`blur(8px)`},animate:{y:0,opacity:1,filter:`blur(0px)`},exit:{y:20,opacity:0,filter:`blur(8px)`},transition:Ke.presets.smooth,className:`absolute left-1/2 hidden -translate-x-1/2 flex-col items-center lg:flex`,children:[(0,X.jsx)(`span`,{className:`text-xs font-semibold text-white lg:text-sm`,children:m}),r&&(0,X.jsx)(`span`,{className:`text-[10px] text-white/60 lg:text-xs`,children:r})]}),t[10]=m,t[11]=r,t[12]=h,t[13]=g):g=t[13];let _;return t[14]===g?_=t[15]:(_=(0,X.jsx)(ke,{children:g}),t[14]=g,t[15]=_),_};function mi(e,t=[]){let n=[];function r(t,r){let i=K.createContext(r);i.displayName=t+`Context`;let a=n.length;n=[...n,r];let o=t=>{let{scope:n,children:r,...o}=t,s=n?.[e]?.[a]||i,c=K.useMemo(()=>o,Object.values(o));return(0,X.jsx)(s.Provider,{value:c,children:r})};o.displayName=t+`Provider`;function s(n,o){let s=o?.[e]?.[a]||i,c=K.useContext(s);if(c)return c;if(r!==void 0)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}return[o,s]}let i=()=>{let t=n.map(e=>K.createContext(e));return function(n){let r=n?.[e]||t;return K.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return i.scopeName=e,[r,hi(i,...t)]}function hi(...e){let t=e[0];if(e.length===1)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return K.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}n();var gi=[`a`,`button`,`div`,`form`,`h2`,`h3`,`img`,`input`,`label`,`li`,`nav`,`ol`,`p`,`select`,`span`,`svg`,`ul`].reduce((e,t)=>{let n=b(`Primitive.${t}`),r=K.forwardRef((e,r)=>{let{asChild:i,...a}=e,o=i?n:t;return typeof window<`u`&&(window[Symbol.for(`radix-ui`)]=!0),(0,X.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),_i=a();function vi(){return(0,_i.useSyncExternalStore)(yi,()=>!0,()=>!1)}function yi(){return()=>{}}var bi=`Avatar`,[xi,Si]=mi(bi),[Ci,wi]=xi(bi),Ti=K.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,a]=K.useState(`idle`);return(0,X.jsx)(Ci,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:(0,X.jsx)(gi.span,{...r,ref:t})})});Ti.displayName=bi;var Ei=`AvatarImage`,Di=K.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=wi(Ei,n),s=ji(r,a),c=pe(e=>{i(e),o.onImageLoadingStatusChange(e)});return Pe(()=>{s!==`idle`&&c(s)},[s,c]),s===`loaded`?(0,X.jsx)(gi.img,{...a,ref:t,src:r}):null});Di.displayName=Ei;var Oi=`AvatarFallback`,ki=K.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,a=wi(Oi,n),[o,s]=K.useState(r===void 0);return K.useEffect(()=>{if(r!==void 0){let e=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&a.imageLoadingStatus!==`loaded`?(0,X.jsx)(gi.span,{...i,ref:t}):null});ki.displayName=Oi;function Ai(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function ji(e,{referrerPolicy:t,crossOrigin:n}){let r=vi(),i=K.useRef(null),a=(()=>r?(i.current||=new window.Image,i.current):null)(),[o,s]=K.useState(()=>Ai(a,e));return Pe(()=>{s(Ai(a,e))},[a,e]),Pe(()=>{let e=e=>()=>{s(e)};if(!a)return;let r=e(`loaded`),i=e(`error`);return a.addEventListener(`load`,r),a.addEventListener(`error`,i),t&&(a.referrerPolicy=t),typeof n==`string`&&(a.crossOrigin=n),()=>{a.removeEventListener(`load`,r),a.removeEventListener(`error`,i)}},[a,n,t]),o}var Mi=Ti,Ni=Di,Pi=ki,Fi=r();function Ii(e,{baseUrl:t,stripAt:n}){let r=e.trim();if(!r)return;if(/^https?:\/\//i.test(r))return r;let i=n?r.replace(/^@/,``):r;if(i)return`${t}${i}`}const Li=e=>{let t=(0,Fi.c)(6),{icon:n,title:r,href:i}=e,a=`${n} text-sm lg:text-base`,o;t[0]===a?o=t[1]:(o=(0,X.jsx)(`i`,{className:a}),t[0]=a,t[1]=o);let s;return t[2]!==i||t[3]!==o||t[4]!==r?(s=(0,X.jsx)(`a`,{href:i,target:`_blank`,rel:`noreferrer`,className:`inline-flex size-6 items-center justify-center rounded text-white/40 transition-colors duration-200 hover:text-white/80 lg:size-7`,title:r,children:o}),t[2]=i,t[3]=o,t[4]=r,t[5]=s):s=t[5],s},Ri=e=>{let t=(0,Fi.c)(15),{icon:n,title:r,onClick:i,badge:a,href:o}=e,s=`${n} text-sm lg:text-base`,c;t[0]===s?c=t[1]:(c=(0,X.jsx)(`i`,{className:s}),t[0]=s,t[1]=c);let l;t[2]===a?l=t[3]:(l=a!==void 0&&a>0&&(0,X.jsx)(`span`,{className:`absolute -top-0.5 -right-0.5 flex size-3.5 items-center justify-center rounded-full bg-blue-500 text-[9px] font-medium text-white lg:size-4`,children:a}),t[2]=a,t[3]=l);let u;t[4]!==c||t[5]!==l?(u=(0,X.jsxs)(X.Fragment,{children:[c,l]}),t[4]=c,t[5]=l,t[6]=u):u=t[6];let d=u;if(o){let e;return t[7]!==d||t[8]!==o||t[9]!==r?(e=(0,X.jsx)(`a`,{href:o,target:`_blank`,rel:`noreferrer`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:r,children:d}),t[7]=d,t[8]=o,t[9]=r,t[10]=e):e=t[10],e}let f;return t[11]!==d||t[12]!==i||t[13]!==r?(f=(0,X.jsx)(`button`,{type:`button`,onClick:i,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:r,children:d}),t[11]=d,t[12]=i,t[13]=r,t[14]=f):f=t[14],f};var zi=r();const Bi=()=>{let e=(0,zi.c)(9),t=O().length,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=g.social&&g.social.github?Ii(g.social.github,{baseUrl:`https://github.com/`}):void 0,e[0]=n):n=e[0];let r=n,i;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(i=g.social&&g.social.twitter?Ii(g.social.twitter,{baseUrl:`https://twitter.com/`,stripAt:!0}):void 0,e[1]=i):i=e[1];let a=i,o;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(o=g.author.avatar?(0,X.jsxs)(Mi,{children:[(0,X.jsx)(Ni,{src:g.author.avatar,className:`size-7 rounded-lg lg:size-8`,alt:g.author.name}),(0,X.jsx)(Pi,{children:(0,X.jsx)(`div`,{className:`flex size-7 items-center justify-center rounded-lg bg-white/10 lg:size-8`,children:(0,X.jsx)(`i`,{className:`i-mingcute-camera-2-line text-sm text-white/60 lg:text-base`})})})]}):(0,X.jsx)(`div`,{className:`flex size-7 items-center justify-center rounded-lg bg-white/10 lg:size-8`,children:(0,X.jsx)(`i`,{className:`i-mingcute-camera-2-line text-sm text-white/60 lg:text-base`})}),e[2]=o):o=e[2];let s;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(`h1`,{className:`truncate text-sm font-semibold text-white lg:text-base`,children:g.name}),e[3]=s):s=e[3];let c;e[4]===t?c=e[5]:(c=(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[s,(0,X.jsx)(`span`,{className:`text-xs text-white/40 lg:text-sm`,children:t})]}),e[4]=t,e[5]=c);let l;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsxs)(`div`,{className:`ml-1 hidden items-center gap-1 border-l border-white/10 pl-2 lg:flex`,children:[r&&(0,X.jsx)(Li,{icon:`i-mingcute-github-fill`,title:`GitHub`,href:r}),a&&(0,X.jsx)(Li,{icon:`i-mingcute-twitter-fill`,title:`Twitter`,href:a}),(0,X.jsx)(Li,{icon:`i-mingcute-rss-2-fill`,title:`RSS`,href:`/feed.xml`})]}),e[6]=l):l=e[6];let u;return e[7]===c?u=e[8]:(u=(0,X.jsxs)(`div`,{className:`flex items-center gap-2`,children:[o,c,l]}),e[7]=c,e[8]=u),u};var Vi=r();const Hi=()=>{let{t:e}=o(),t=s(),[n]=y(Ge),r=Ee(te),i=z(),a=L(Ce),c=n.columns!==`auto`||n.sortOrder!==`desc`,l=n.selectedTags.length+n.selectedCameras.length+n.selectedLenses.length+(n.selectedRatings===null?0:1);return(0,X.jsxs)(`div`,{className:`flex items-center gap-1 lg:gap-1.5`,children:[(0,X.jsxs)(`div`,{className:`bg-material-medium/40 flex items-center gap-1 rounded-lg`,children:[(0,X.jsx)(Ri,{icon:`i-mingcute-search-line`,title:e(`action.search.unified.title`),onClick:()=>r(!0),badge:l}),!t&&(0,X.jsx)(Ri,{icon:`i-mingcute-map-pin-line`,title:e(`action.map.explore`),onClick:()=>i(`/explory`)}),t?(0,X.jsx)(Gi,{icon:`i-mingcute-layout-grid-line`,title:e(`action.view.title`),badge:c?`●`:void 0,children:(0,X.jsx)(yn,{})}):(0,X.jsx)(Wi,{icon:`i-mingcute-layout-grid-line`,title:e(`action.view.title`),badge:c?`●`:void 0,children:(0,X.jsx)(yn,{})}),t&&(0,X.jsx)(Ui,{})]}),Je.useCloud&&(0,X.jsx)(`div`,{className:`bg-material-medium/40 flex items-center gap-1 ${a?`rounded-full`:`rounded-lg`}`,children:a?(0,X.jsx)(Ji,{user:a}):(0,X.jsx)(Ki,{})})]})};var Ui=()=>{let e=(0,Vi.c)(41),{t}=o(),[n,r]=y(Ge),i;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=g.social&&g.social.github?Ii(g.social.github,{baseUrl:`https://github.com/`}):void 0,e[0]=i):i=e[0];let a=i,s;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(s=g.social&&g.social.twitter?Ii(g.social.twitter,{baseUrl:`https://twitter.com/`,stripAt:!0}):void 0,e[1]=s):s=e[1];let c=s,l;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsx)(T,{asChild:!0,children:(0,X.jsx)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:hidden`,children:(0,X.jsx)(`i`,{className:`i-mingcute-more-2-line text-lg`})})}),e[2]=l):l=e[2];let u;e[3]===t?u=e[4]:(u=t(`action.view.title`),e[3]=t,e[4]=u);let d;e[5]===u?d=e[6]:(d=(0,X.jsx)(`div`,{className:`px-2 py-1.5 text-xs font-medium text-white/50`,children:u}),e[5]=u,e[6]=d);let f;e[7]===r?f=e[8]:(f=()=>r(Yi),e[7]=r,e[8]=f);let p;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,X.jsx)(`i`,{className:`i-mingcute-grid-line text-base`}),e[9]=p):p=e[9];let m;e[10]===t?m=e[11]:(m=t(`gallery.view.masonry`),e[10]=t,e[11]=m);let _;e[12]===m?_=e[13]:(_=(0,X.jsxs)(`span`,{className:`flex items-center gap-2`,children:[p,m]}),e[12]=m,e[13]=_);let v;e[14]===n.viewMode?v=e[15]:(v=n.viewMode===`masonry`&&(0,X.jsx)(`i`,{className:`i-mingcute-check-line text-base`}),e[14]=n.viewMode,e[15]=v);let b;e[16]!==f||e[17]!==_||e[18]!==v?(b=(0,X.jsxs)(h,{onClick:f,className:`justify-between`,children:[_,v]}),e[16]=f,e[17]=_,e[18]=v,e[19]=b):b=e[19];let x;e[20]===r?x=e[21]:(x=()=>r(Xi),e[20]=r,e[21]=x);let S;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,X.jsx)(`i`,{className:`i-mingcute-list-ordered-line text-base`}),e[22]=S):S=e[22];let C;e[23]===t?C=e[24]:(C=t(`gallery.view.list`),e[23]=t,e[24]=C);let w;e[25]===C?w=e[26]:(w=(0,X.jsxs)(`span`,{className:`flex items-center gap-2`,children:[S,C]}),e[25]=C,e[26]=w);let E;e[27]===n.viewMode?E=e[28]:(E=n.viewMode===`list`&&(0,X.jsx)(`i`,{className:`i-mingcute-check-line text-base`}),e[27]=n.viewMode,e[28]=E);let D;e[29]!==x||e[30]!==w||e[31]!==E?(D=(0,X.jsxs)(h,{onClick:x,className:`justify-between`,children:[w,E]}),e[29]=x,e[30]=w,e[31]=E,e[32]=D):D=e[32];let O,k,A,j;e[33]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,X.jsx)(re,{}),k=a&&(0,X.jsx)(h,{asChild:!0,children:(0,X.jsxs)(`a`,{href:a,target:`_blank`,rel:`noreferrer`,className:`flex items-center gap-2`,children:[(0,X.jsx)(`i`,{className:`i-mingcute-github-fill text-base`}),`GitHub`]})}),A=c&&(0,X.jsx)(h,{asChild:!0,children:(0,X.jsxs)(`a`,{href:c,target:`_blank`,rel:`noreferrer`,className:`flex items-center gap-2`,children:[(0,X.jsx)(`i`,{className:`i-mingcute-twitter-fill text-base`}),`Twitter`]})}),j=(0,X.jsx)(h,{asChild:!0,children:(0,X.jsxs)(`a`,{href:`/feed.xml`,target:`_blank`,rel:`noreferrer`,className:`flex items-center gap-2`,children:[(0,X.jsx)(`i`,{className:`i-mingcute-rss-2-fill text-base`}),`RSS`]})}),e[33]=O,e[34]=k,e[35]=A,e[36]=j):(O=e[33],k=e[34],A=e[35],j=e[36]);let M;return e[37]!==b||e[38]!==D||e[39]!==d?(M=(0,X.jsxs)(H,{children:[l,(0,X.jsxs)(qe,{align:`end`,className:`min-w-[180px]`,children:[d,b,D,O,k,A,j]})]}),e[37]=b,e[38]=D,e[39]=d,e[40]=M):M=e[40],M},Wi=e=>{let t=(0,Vi.c)(13),{icon:n,title:r,badge:i,children:a}=e,o=`${n} text-sm lg:text-base`,s;t[0]===o?s=t[1]:(s=(0,X.jsx)(`i`,{className:o}),t[0]=o,t[1]=s);let c;t[2]===i?c=t[3]:(c=i&&(0,X.jsx)(`span`,{className:`absolute -top-0.5 -right-0.5 flex size-2 items-center justify-center rounded-full bg-blue-500 lg:size-2.5`,children:(0,X.jsx)(`span`,{className:`sr-only`,children:i})}),t[2]=i,t[3]=c);let l;t[4]!==s||t[5]!==c||t[6]!==r?(l=(0,X.jsx)(T,{asChild:!0,children:(0,X.jsxs)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded-full text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:r,children:[s,c]})}),t[4]=s,t[5]=c,t[6]=r,t[7]=l):l=t[7];let u;t[8]===a?u=t[9]:(u=(0,X.jsx)(qe,{align:`center`,children:a}),t[8]=a,t[9]=u);let d;return t[10]!==l||t[11]!==u?(d=(0,X.jsxs)(H,{children:[l,u]}),t[10]=l,t[11]=u,t[12]=d):d=t[12],d},Gi=e=>{let t=(0,Vi.c)(21),{icon:n,title:r,badge:i,children:a}=e,[o,s]=(0,K.useState)(!1),c;t[0]===o?c=t[1]:(c=()=>s(!o),t[0]=o,t[1]=c);let l=`${n} text-sm lg:text-base`,u;t[2]===l?u=t[3]:(u=(0,X.jsx)(`i`,{className:l}),t[2]=l,t[3]=u);let d;t[4]===i?d=t[5]:(d=i&&(0,X.jsx)(`span`,{className:`absolute -top-0.5 -right-0.5 flex size-2 items-center justify-center rounded-full bg-blue-500 lg:size-2.5`,children:(0,X.jsx)(`span`,{className:`sr-only`,children:i})}),t[4]=i,t[5]=d);let f;t[6]!==c||t[7]!==u||t[8]!==d||t[9]!==r?(f=(0,X.jsxs)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:r,onClick:c,children:[u,d]}),t[6]=c,t[7]=u,t[8]=d,t[9]=r,t[10]=f):f=t[10];let p;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,X.jsx)(cn.Overlay,{className:`fixed inset-0 z-40 bg-black/20 backdrop-blur-sm`}),t[11]=p):p=t[11];let m;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,X.jsx)(`div`,{className:`mx-auto mb-4 h-1.5 w-12 shrink-0 rounded-full bg-zinc-300 dark:bg-zinc-700`}),t[12]=m):m=t[12];let h;t[13]===a?h=t[14]:(h=(0,X.jsxs)(cn.Portal,{children:[p,(0,X.jsxs)(cn.Content,{className:`fixed right-0 bottom-0 left-0 z-50 flex flex-col rounded-t-2xl border-t border-zinc-200 bg-white/80 p-4 backdrop-blur-xl dark:border-zinc-800 dark:bg-black/80`,children:[m,a]})]}),t[13]=a,t[14]=h);let g;t[15]!==o||t[16]!==h?(g=(0,X.jsx)(cn.Root,{open:o,onOpenChange:s,children:h}),t[15]=o,t[16]=h,t[17]=g):g=t[17];let _;return t[18]!==f||t[19]!==g?(_=(0,X.jsxs)(X.Fragment,{children:[f,g]}),t[18]=f,t[19]=g,t[20]=_):_=t[20],_},Ki=()=>{let{t:e}=o(),[t,n]=(0,K.useState)(!1),{data:r}=de({queryKey:[`socialProviders`],queryFn:Ae.getSocialProviders,enabled:t}),i=async e=>{try{let{url:t}=await Ae.signInSocial(e);window.location.href=t}catch(e){console.error(`Sign in failed:`,e)}};return(0,X.jsxs)(H,{open:t,onOpenChange:n,children:[(0,X.jsx)(T,{asChild:!0,children:(0,X.jsx)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:e(`action.login`),children:(0,X.jsx)(`i`,{className:`i-lucide-log-in text-sm lg:text-base`})})}),(0,X.jsxs)(qe,{align:`end`,className:`min-w-[200px]`,children:[(0,X.jsx)(`div`,{className:`px-2 py-1.5 text-xs text-white/50`,children:e(`comments.chooseProvider`)}),(0,X.jsx)(re,{}),r?.providers.map(t=>(0,X.jsx)(h,{onClick:()=>i(t.id),icon:(0,X.jsx)(qi,{provider:t.id}),children:e(`comments.signInWith`,{provider:t.name})},t.id))]})]})},qi=e=>{let t=(0,Vi.c)(3),{provider:n}=e;switch(n){case`github`:{let e;return t[0]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,X.jsx)(`i`,{className:`i-simple-icons-github text-base`}),t[0]=e):e=t[0],e}case`google`:{let e;return t[1]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,X.jsxs)(`svg`,{className:`size-4`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 256 262`,children:[(0,X.jsx)(`path`,{fill:`#4285F4`,d:`M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622l38.755 30.023l2.685.268c24.659-22.774 38.875-56.282 38.875-96.027`}),(0,X.jsx)(`path`,{fill:`#34A853`,d:`M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055c-34.523 0-63.824-22.773-74.269-54.25l-1.531.13l-40.298 31.187l-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1`}),(0,X.jsx)(`path`,{fill:`#FBBC05`,d:`M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82c0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602z`}),(0,X.jsx)(`path`,{fill:`#EB4335`,d:`M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0C79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251`})]}),t[1]=e):e=t[1],e}default:{let e;return t[2]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,X.jsx)(`i`,{className:`i-lucide-user text-base`}),t[2]=e):e=t[2],e}}},Ji=({user:e})=>{let{t}=o(),n=Ee(Ce),r=Be(),[i,a]=(0,K.useState)(!1);return e.role===`admin`||e.role===`superadmin`?(0,X.jsx)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:t(`action.dashboard`),onClick:()=>window.location.href=`/platform`,children:(0,X.jsx)(d,{image:e.image,name:e.name||e.id,fallback:`?`,size:28,className:`lg:size-8`})}):(0,X.jsxs)(H,{children:[(0,X.jsx)(T,{asChild:!0,children:(0,X.jsx)(`button`,{type:`button`,className:`relative flex size-7 items-center justify-center rounded text-white/60 transition-all duration-200 hover:bg-white/10 hover:text-white lg:size-8`,title:e.name||e.id,children:(0,X.jsx)(d,{image:e.image,name:e.name||e.id,fallback:`?`,size:28,className:`lg:size-8`})})}),(0,X.jsxs)(qe,{align:`end`,className:`min-w-[200px]`,children:[(0,X.jsx)(`div`,{className:`px-2 py-1.5`,children:(0,X.jsx)(`div`,{className:`text-sm font-medium text-white/90`,children:e.name||e.id})}),(0,X.jsx)(re,{}),(0,X.jsx)(h,{onClick:async()=>{if(!i){a(!0);try{await Ae.signOut(),n(null),await r.invalidateQueries({queryKey:[`session`]})}catch(e){console.error(`Sign out failed:`,e)}finally{a(!1)}}},icon:(0,X.jsx)(`i`,{className:`i-lucide-log-out text-base`}),disabled:i,children:t(`action.signOut`)})]})]})};function Yi(e){return{...e,viewMode:`masonry`}}function Xi(e){return{...e,viewMode:`list`}}var Zi=r();const Qi=()=>{let e=(0,Zi.c)(29),{t}=o(),[n,r]=y(Ge),i;e[0]===r?i=e[1]:(i=e=>{r(t=>({...t,viewMode:e}))},e[0]=r,e[1]=i);let a=i,s;e[2]===a?s=e[3]:(s=()=>a(`masonry`),e[2]=a,e[3]=s);let c=`relative z-10 flex h-full items-center justify-center rounded-lg px-2 text-xs font-medium transition-colors duration-200 lg:px-4 ${n.viewMode===`masonry`?`text-white`:`text-white/60 hover:text-white/80`}`,l;e[4]===t?l=e[5]:(l=t(`gallery.view.masonry`),e[4]=t,e[5]=l);let u;e[6]===n.viewMode?u=e[7]:(u=n.viewMode===`masonry`&&(0,X.jsx)(Ie.span,{layoutId:`segment-indicator`,className:`absolute inset-0 rounded-md bg-white/15 shadow-sm`,transition:Ke.presets.snappy}),e[6]=n.viewMode,e[7]=u);let d;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,X.jsx)(`i`,{className:`i-mingcute-grid-line relative z-10 text-sm lg:text-base`}),e[8]=d):d=e[8];let f;e[9]!==s||e[10]!==c||e[11]!==l||e[12]!==u?(f=(0,X.jsxs)(`button`,{type:`button`,onClick:s,className:c,title:l,children:[u,d]}),e[9]=s,e[10]=c,e[11]=l,e[12]=u,e[13]=f):f=e[13];let p;e[14]===a?p=e[15]:(p=()=>a(`list`),e[14]=a,e[15]=p);let m=`relative z-10 flex h-full items-center justify-center rounded-lg px-2 text-xs font-medium transition-colors duration-200 lg:px-4 ${n.viewMode===`list`?`text-white`:`text-white/60 hover:text-white/80`}`,h;e[16]===t?h=e[17]:(h=t(`gallery.view.list`),e[16]=t,e[17]=h);let g;e[18]===n.viewMode?g=e[19]:(g=n.viewMode===`list`&&(0,X.jsx)(Ie.span,{layoutId:`segment-indicator`,className:`absolute inset-0 rounded-md bg-white/15 shadow-sm`,transition:Ke.presets.snappy}),e[18]=n.viewMode,e[19]=g);let _;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,X.jsx)(`i`,{className:`i-mingcute-list-ordered-line relative z-10 text-sm lg:text-base`}),e[20]=_):_=e[20];let v;e[21]!==g||e[22]!==p||e[23]!==m||e[24]!==h?(v=(0,X.jsxs)(`button`,{type:`button`,onClick:p,className:m,title:h,children:[g,_]}),e[21]=g,e[22]=p,e[23]=m,e[24]=h,e[25]=v):v=e[25];let b;return e[26]!==v||e[27]!==f?(b=(0,X.jsxs)(`div`,{className:`bg-material-medium/40 relative hidden h-7 items-center gap-0.5 rounded-lg p-0.5 lg:flex lg:h-8 lg:gap-1 lg:p-1`,children:[f,v]}),e[26]=v,e[27]=f,e[28]=b):b=e[28],b};var $i=r();const ea=e=>{let t=(0,$i.c)(9),{dateRange:n,location:r,showDateRange:i}=e,a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,X.jsx)(I,{className:`pointer-events-none absolute inset-x-0 z-[-1] h-15`,tint:`var(--color-background)`,strength:128,side:`top`}),t[0]=a):a=t[0];let o;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,X.jsx)(Bi,{}),t[1]=o):o=t[1];let s;t[2]!==n||t[3]!==r||t[4]!==i?(s=(0,X.jsx)(pi,{dateRange:n,location:r,showDateRange:i}),t[2]=n,t[3]=r,t[4]=i,t[5]=s):s=t[5];let c;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,X.jsxs)(`div`,{className:`flex items-center gap-1.5 lg:gap-2`,children:[(0,X.jsx)(Qi,{}),(0,X.jsx)(Hi,{})]}),t[6]=c):c=t[6];let l;return t[7]===s?l=t[8]:(l=(0,X.jsxs)(`header`,{className:`fixed top-0 right-0 left-0 z-100`,children:[a,(0,X.jsxs)(`div`,{className:`flex h-12 items-center justify-between gap-2 px-3 lg:h-12 lg:gap-3 lg:px-4`,children:[o,s,c]})]}),t[7]=s,t[8]=l),l};var ta=r();const na=()=>{let e=(0,ta.c)(27),{viewMode:t}=L(Ge),[n,r]=(0,K.useState)(!1),i=ee(),{dateRange:a,handleRender:o}=at(i),s=x(),[c,l]=(0,K.useState)(null),u,d;e[0]===s?(u=e[1],d=e[2]):(u=()=>{if(!s)return;let e=()=>{let{scrollTop:e}=s;r(e>500)};return s.addEventListener(`scroll`,e,{passive:!0}),()=>{s.removeEventListener(`scroll`,e)}},d=[s],e[0]=s,e[1]=u,e[2]=d),(0,K.useEffect)(u,d);let f=it(),p=n&&!!a.formattedRange,m;e[3]!==a.formattedRange||e[4]!==a.location||e[5]!==p?(m=(0,X.jsx)(ea,{dateRange:a.formattedRange,location:a.location,showDateRange:p}),e[3]=a.formattedRange,e[4]=a.location,e[5]=p,e[6]=m):m=e[6];let h;e[7]===f?h=e[8]:(h=f&&(0,X.jsx)(jn,{}),e[7]=f,e[8]=h);let g=!f&&`mt-12`,_;e[9]===g?_=e[10]:(_=U(`p-1 **:select-none! lg:px-0 lg:pb-0`,g),e[9]=g,e[10]=_);let v;e[11]!==o||e[12]!==i||e[13]!==t?(v=t===`list`?(0,X.jsx)(Ln,{photos:i}):(0,X.jsx)(ci,{photos:i,onRender:o}),e[11]=o,e[12]=i,e[13]=t,e[14]=v):v=e[14];let y;e[15]!==_||e[16]!==v?(y=(0,X.jsx)(`div`,{className:_,children:v}),e[15]=_,e[16]=v,e[17]=y):y=e[17];let b=!!c,S;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(S=e=>{e||l(null)},e[18]=S):S=e[18];let C;e[19]!==c||e[20]!==b?(C=(0,X.jsx)(Sn,{open:b,onOpenChange:S,type:c}),e[19]=c,e[20]=b,e[21]=C):C=e[21];let w;return e[22]!==C||e[23]!==m||e[24]!==h||e[25]!==y?(w=(0,X.jsxs)(X.Fragment,{children:[m,h,y,C]}),e[22]=C,e[23]=m,e[24]=h,e[25]=y,e[26]=w):w=e[26],w};var ra=r();const ia=()=>{let e=(0,ra.c)(7);oa(),sa();let t=s(),n=O(),r;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=g.accentColor&&(0,X.jsx)(`style`,{dangerouslySetInnerHTML:{__html:`
          :root:has(input.theme-controller[value=dark]:checked), [data-theme="dark"] {
            --color-primary: ${g.accentColor};
            --color-accent: ${g.accentColor};
            --color-secondary: ${g.accentColor};
          }
          `}}),e[0]=r):r=e[0];let i;e[1]===t?i=e[2]:(i=t?(0,X.jsx)(v,{value:document.body,children:(0,X.jsx)(na,{})}):(0,X.jsx)(W,{rootClassName:`h-svh w-full`,viewportClassName:`size-full`,scrollbarClassName:`mt-12`,children:(0,X.jsx)(na,{})}),e[1]=t,e[2]=i);let a;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,X.jsx)(M,{}),e[3]=a):a=e[3];let o;return e[4]!==n||e[5]!==i?(o=(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)(j,{photos:n,children:[r,i,a]})}),e[4]=n,e[5]=i,e[6]=o):o=e[6],o};var aa=!1,oa=()=>{let e=(0,ra.c)(6),t=(0,K.useRef)(!1),{openViewer:n}=C(),{photoId:r}=S(),i=Ee(Ge),[a]=D(),o,s;e[0]!==n||e[1]!==r||e[2]!==a||e[3]!==i?(o=()=>{if(t.current)return;t.current=!0,aa=!0;let e=a.get(`tags`)?.split(`,`),o=a.get(`cameras`)?.split(`,`),s=a.get(`lenses`)?.split(`,`),c=a.get(`rating`)?Number(a.get(`rating`)):null,l=a.get(`tag_mode`);if((e||o||s||c!==null||l)&&i(t=>({...t,selectedTags:e||t.selectedTags,selectedCameras:o||t.selectedCameras,selectedLenses:s||t.selectedLenses,selectedRatings:c??t.selectedRatings,tagFilterMode:l||t.tagFilterMode})),r){let e=F().findIndex(e=>e.id===r);e!==-1&&n(e)}},s=[n,r,a,i],e[0]=n,e[1]=r,e[2]=a,e[3]=i,e[4]=o,e[5]=s):(o=e[4],s=e[5]),(0,K.useEffect)(o,s)},sa=()=>{let e=(0,ra.c)(14),{selectedTags:t,selectedCameras:n,selectedLenses:r,selectedRatings:i,tagFilterMode:a}=L(Ge),[,o]=D(),s=z(),c=P(),{isOpen:l,currentIndex:u}=C(),d,f;e[0]!==u||e[1]!==l||e[2]!==c.pathname||e[3]!==s?(d=()=>{if(aa){if(l){let e=`/photos/${F()[u].id}`;c.pathname!==e&&s(e)}else if(c.pathname!==`/explory`){let e=setTimeout(()=>{s(`/`)},500);return()=>clearTimeout(e)}}},f=[u,l,c.pathname,s],e[0]=u,e[1]=l,e[2]=c.pathname,e[3]=s,e[4]=d,e[5]=f):(d=e[4],f=e[5]),(0,K.useEffect)(d,f);let p,m;e[6]!==n||e[7]!==r||e[8]!==i||e[9]!==t||e[10]!==o||e[11]!==a?(p=()=>{if(!aa)return;let e=t.join(`,`),s=n.join(`,`),c=r.join(`,`),l=i?.toString()??``,u=a===`union`?``:a;o(t=>{let n=t.get(`tags`),r=t.get(`cameras`),i=t.get(`lenses`),a=t.get(`rating`),o=t.get(`tag_mode`);if(n===e&&r===s&&i===c&&a===l&&o===u)return t;let d=new URLSearchParams(t);return e?d.set(`tags`,e):d.delete(`tags`),s?d.set(`cameras`,s):d.delete(`cameras`),c?d.set(`lenses`,c):d.delete(`lenses`),l?d.set(`rating`,l):d.delete(`rating`),u?d.set(`tag_mode`,u):d.delete(`tag_mode`),d})},m=[t,n,r,i,a,o],e[6]=n,e[7]=r,e[8]=i,e[9]=t,e[10]=o,e[11]=a,e[12]=p,e[13]=m):(p=e[12],m=e[13]),(0,K.useEffect)(p,m)};export{ia as Component};