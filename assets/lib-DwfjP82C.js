import{r as e}from"./rolldown-runtime-B6ubh40S.js";var t=e({tagsById:()=>n,tagsByName:()=>r},1),n={33434:`ExposureTime`,33437:`FNumber`,34850:`ExposureProgram`,34852:`SpectralSensitivity`,34855:`ISOSpeedRatings`,34856:`OECF`,34864:`SensitivityType`,34865:`StandardOutputSensitivity`,34866:`RecommendedExposureIndex`,34867:`ISOSpeed`,34868:`ISOSpeedLatitudeyyy`,34869:`ISOSpeedLatitudezzz`,36864:`ExifVersion`,36867:`DateTimeOriginal`,36868:`DateTimeDigitized`,37121:`ComponentsConfiguration`,37122:`CompressedBitsPerPixel`,37377:`ShutterSpeedValue`,37378:`ApertureValue`,37379:`BrightnessValue`,37380:`ExposureBiasValue`,37381:`MaxApertureValue`,37382:`SubjectDistance`,37383:`MeteringMode`,37384:`LightSource`,37385:`Flash`,37386:`FocalLength`,37396:`SubjectArea`,37500:`MakerNote`,37510:`UserComment`,37520:`SubsecTime`,37521:`SubsecTimeOriginal`,37522:`SubsecTimeDigitized`,40960:`FlashpixVersion`,40961:`ColorSpace`,40962:`PixelXDimension`,40963:`PixelYDimension`,40964:`RelatedSoundFile`,41483:`FlashEnergy`,41484:`SpatialFrequencyResponse`,41486:`FocalPlaneXResolution`,41487:`FocalPlaneYResolution`,41488:`FocalPlaneResolutionUnit`,41492:`SubjectLocation`,41493:`ExposureIndex`,41495:`SensingMethod`,41728:`FileSource`,41729:`SceneType`,41730:`CFAPattern`,41985:`CustomRendered`,41986:`ExposureMode`,41987:`WhiteBalance`,41988:`DigitalZoomRatio`,41989:`FocalLengthIn35mmFilm`,41990:`SceneCaptureType`,41991:`GainControl`,41992:`Contrast`,41993:`Saturation`,41994:`Sharpness`,41995:`DeviceSettingDescription`,41996:`SubjectDistanceRange`,42016:`ImageUniqueID`,42032:`CameraOwnerName`,42033:`BodySerialNumber`,42034:`LensSpecification`,42035:`LensMake`,42036:`LensModel`,42037:`LensSerialNumber`,42240:`Gamma`},r={};for(let e in n)r[n[e]]=Number(e);var i=e({tagsById:()=>a,tagsByName:()=>o},1),a={0:`GPSVersionID`,1:`GPSLatitudeRef`,2:`GPSLatitude`,3:`GPSLongitudeRef`,4:`GPSLongitude`,5:`GPSAltitudeRef`,6:`GPSAltitude`,7:`GPSTimeStamp`,8:`GPSSatellites`,9:`GPSStatus`,10:`GPSMeasureMode`,11:`GPSDOP`,12:`GPSSpeedRef`,13:`GPSSpeed`,14:`GPSTrackRef`,15:`GPSTrack`,16:`GPSImgDirectionRef`,17:`GPSImgDirection`,18:`GPSMapDatum`,19:`GPSDestLatitudeRef`,20:`GPSDestLatitude`,21:`GPSDestLongitudeRef`,22:`GPSDestLongitude`,23:`GPSDestBearingRef`,24:`GPSDestBearing`,25:`GPSDestDistanceRef`,26:`GPSDestDistance`,27:`GPSProcessingMethod`,28:`GPSAreaInformation`,29:`GPSDateStamp`,30:`GPSDifferential`,31:`GPSHPositioningError`},o={};for(let e in a)o[a[e]]=Number(e);var s=e({tagsById:()=>c,tagsByName:()=>l},1),c={254:`NewSubfileType`,255:`SubfileType`,256:`ImageWidth`,257:`ImageLength`,258:`BitsPerSample`,259:`Compression`,262:`PhotometricInterpretation`,263:`Threshholding`,264:`CellWidth`,265:`CellLength`,266:`FillOrder`,270:`ImageDescription`,271:`Make`,272:`Model`,273:`StripOffsets`,274:`Orientation`,277:`SamplesPerPixel`,278:`RowsPerStrip`,279:`StripByteCounts`,280:`MinSampleValue`,281:`MaxSampleValue`,282:`XResolution`,283:`YResolution`,284:`PlanarConfiguration`,288:`FreeOffsets`,289:`FreeByteCounts`,290:`GrayResponseUnit`,291:`GrayResponseCurve`,296:`ResolutionUnit`,305:`Software`,306:`DateTime`,315:`Artist`,316:`HostComputer`,320:`ColorMap`,338:`ExtraSamples`,33432:`Copyright`,269:`DocumentName`,285:`PageName`,286:`XPosition`,287:`YPosition`,292:`T4Options`,293:`T6Options`,297:`PageNumber`,301:`TransferFunction`,317:`Predictor`,318:`WhitePoint`,319:`PrimaryChromaticities`,321:`HalftoneHints`,322:`TileWidth`,323:`TileLength`,324:`TileOffsets`,325:`TileByteCounts`,326:`BadFaxLines`,327:`CleanFaxData`,328:`ConsecutiveBadFaxLines`,330:`SubIFDs`,332:`InkSet`,333:`InkNames`,334:`NumberOfInks`,336:`DotRange`,337:`TargetPrinter`,339:`SampleFormat`,340:`SMinSampleValue`,341:`SMaxSampleValue`,342:`TransferRange`,343:`ClipPath`,344:`XClipPathUnits`,345:`YClipPathUnits`,346:`Indexed`,347:`JPEGTables`,351:`OPIProxy`,400:`GlobalParametersIFD`,401:`ProfileType`,402:`FaxProfile`,403:`CodingMethods`,404:`VersionYear`,405:`ModeNumber`,433:`Decode`,434:`DefaultImageColor`,512:`JPEGProc`,513:`JPEGInterchangeFormat`,514:`JPEGInterchangeFormatLength`,515:`JPEGRestartInterval`,517:`JPEGLosslessPredictors`,518:`JPEGPointTransforms`,519:`JPEGQTables`,520:`JPEGDCTables`,521:`JPEGACTables`,529:`YCbCrCoefficients`,530:`YCbCrSubSampling`,531:`YCbCrPositioning`,532:`ReferenceBlackWhite`,559:`StripRowCounts`,700:`XMP`,32781:`ImageID`,34732:`ImageLayer`,32932:`WangAnnotatio`,33445:`MDFileTag`,33446:`MDScalePixel`,33447:`MDColorTable`,33448:`MDLabName`,33449:`MDSampleInfo`,33450:`MDPrepDate`,33451:`MDPrepTime`,33452:`MDFileUnits`,33550:`ModelPixelScaleTag`,33723:`IPTC`,33918:`INGRPacketDataTag`,33919:`INGRFlagRegisters`,33920:`IrasBTransformationMatrix`,33922:`ModelTiepointTag`,34264:`ModelTransformationTag`,34377:`Photoshop`,34665:`ExifIFD`,34675:`ICCProfile`,34735:`GeoKeyDirectoryTag`,34736:`GeoDoubleParamsTag`,34737:`GeoAsciiParamsTag`,34853:`GPSIFD`,34908:`HylaFAXFaxRecvParams`,34909:`HylaFAXFaxSubAddress`,34910:`HylaFAXFaxRecvTime`,37724:`ImageSourceData`,40965:`InteroperabilityIFD`,42112:`GDAL_METADATA`,42113:`GDAL_NODATA`,50215:`OceScanjobDescription`,50216:`OceApplicationSelector`,50217:`OceIdentificationNumber`,50218:`OceImageLogicCharacteristics`,50706:`DNGVersion`,50707:`DNGBackwardVersion`,50708:`UniqueCameraModel`,50709:`LocalizedCameraModel`,50710:`CFAPlaneColor`,50711:`CFALayout`,50712:`LinearizationTable`,50713:`BlackLevelRepeatDim`,50714:`BlackLevel`,50715:`BlackLevelDeltaH`,50716:`BlackLevelDeltaV`,50717:`WhiteLevel`,50718:`DefaultScale`,50719:`DefaultCropOrigin`,50720:`DefaultCropSize`,50721:`ColorMatrix1`,50722:`ColorMatrix2`,50723:`CameraCalibration1`,50724:`CameraCalibration2`,50725:`ReductionMatrix1`,50726:`ReductionMatrix2`,50727:`AnalogBalance`,50728:`AsShotNeutral`,50729:`AsShotWhiteXY`,50730:`BaselineExposure`,50731:`BaselineNoise`,50732:`BaselineSharpness`,50733:`BayerGreenSplit`,50734:`LinearResponseLimit`,50735:`CameraSerialNumber`,50736:`LensInfo`,50737:`ChromaBlurRadius`,50738:`AntiAliasStrength`,50740:`DNGPrivateData`,50741:`MakerNoteSafety`,50778:`CalibrationIlluminant1`,50779:`CalibrationIlluminant2`,50780:`BestQualityScale`,50784:`AliasLayerMetadata`},l={};for(let e in c)l[c[e]]=Number(e);function u(e,t=`utf8`){return new TextDecoder(t).decode(e)}var d=new TextEncoder;function f(e){return d.encode(e)}var p=1024*8,m=(()=>{let e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),h={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},g=class e{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=p,n={}){let r=!1;typeof t==`number`?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);let i=n.offset?n.offset>>>0:0,a=t.byteLength-i,o=i;(ArrayBuffer.isView(t)||t instanceof e)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw Error(`Mark stack empty`);return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let t=(this.offset+e)*2,n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,`uint8`)}readArray(e,t){let n=h[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,i=this.buffer.slice(r,r+n);if(this.littleEndian===m&&t!==`uint8`&&t!==`int8`){let e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();let i=new h[t](e.buffer);return this.offset+=n,i.reverse(),i}let a=new h[t](i);return this.offset+=n,a}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t=``;for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return u(this.readBytes(e))}decodeText(e=1,t=`utf8`){return u(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(f(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function _(e){if(e.compression!==1)throw Error(`missing mandatory StripByteCounts field in compressed image`);let t=e.rowsPerStrip*e.width*e.samplesPerPixel*(e.bitsPerSample/8);return Array(e.stripOffsets.length).fill(t)}function v(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let t=0;t<n;t++)e[r+i+t]=e[r+i+t]+e[r+i-(n-t)]&255;r+=t*n}}function y(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let t=0;t<n;t++)e[r+i+t]=e[r+i+t]+e[r+i-(n-t)]&65535;r+=t*n}}var b={standard:s,exif:t,gps:i},x=class{kind;data;fields;exif;gps;_hasMap;_map;constructor(e){if(!e)throw Error(`missing kind`);this.data=new Uint8Array,this.fields=new Map,this.kind=e,this._hasMap=!1,this._map={}}get(e){if(typeof e==`number`)return this.fields.get(e);if(typeof e==`string`)return this.fields.get(b[this.kind].tagsByName[e]);throw Error(`expected a number or string`)}get map(){if(!this._hasMap){let e=b[this.kind].tagsById;for(let t of this.fields.keys())e[t]&&(this._map[e[t]]=this.fields.get(t));this._hasMap=!0}return this._map}},S=new Map([[1,[1,T]],[2,[1,E]],[3,[2,D]],[4,[4,ee]],[5,[8,te]],[6,[1,ne]],[7,[1,T]],[8,[2,re]],[9,[4,ie]],[10,[8,ae]],[11,[4,oe]],[12,[8,se]]]);function C(e,t){let n=S.get(e);if(!n)throw Error(`type not found: ${e}`);return n[0]*t}function w(e,t,n){let r=S.get(t);if(!r)throw Error(`type not found: ${t}`);return r[1](e,n)}function T(e,t){if(t===1)return e.readUint8();let n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.readUint8();return n}function E(e,t){let n=[],r=``;for(let i=0;i<t;i++){let t=String.fromCharCode(e.readUint8());t===`\0`?(n.push(r),r=``):r+=t}return n.length===1?n[0]:n}function D(e,t){if(t===1)return e.readUint16();let n=new Uint16Array(t);for(let r=0;r<t;r++)n[r]=e.readUint16();return n}function ee(e,t){if(t===1)return e.readUint32();let n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32();return n}function te(e,t){if(t===1)return e.readUint32()/e.readUint32();let n=Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32()/e.readUint32();return n}function ne(e,t){if(t===1)return e.readInt8();let n=new Int8Array(t);for(let r=0;r<t;r++)n[r]=e.readInt8();return n}function re(e,t){if(t===1)return e.readInt16();let n=new Int16Array(t);for(let r=0;r<t;r++)n[r]=e.readInt16();return n}function ie(e,t){if(t===1)return e.readInt32();let n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32();return n}function ae(e,t){if(t===1)return e.readInt32()/e.readInt32();let n=Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32()/e.readInt32();return n}function oe(e,t){if(t===1)return e.readFloat32();let n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat32();return n}function se(e,t){if(t===1)return e.readFloat64();let n=new Float64Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat64();return n}var ce=256,le=257,ue=258,de=9,fe=[];function pe(){if(fe.length===0){for(let e=0;e<256;e++)fe.push([e]);let e=[];for(let t=256;t<4096;t++)fe.push(e)}}var me=[511,1023,2047,4095],he=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095],ge=class{stripArray;nextData=0;nextBits=0;bytePointer=0;tableLength=ue;currentBitLength=de;outData;constructor(e){this.stripArray=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.outData=new g(e.byteLength),this.initializeTable()}decode(){let e=0,t=0;for(;(e=this.getNextCode())!==le;)if(e===ce){if(this.initializeTable(),e=this.getNextCode(),e===le)break;this.writeString(this.stringFromCode(e)),t=e}else if(this.isInTable(e))this.writeString(this.stringFromCode(e)),this.addStringToTable(this.stringFromCode(t).concat(this.stringFromCode(e)[0])),t=e;else{let n=this.stringFromCode(t).concat(this.stringFromCode(t)[0]);this.writeString(n),this.addStringToTable(n),t=e}let n=this.outData.toArray();return new DataView(n.buffer,n.byteOffset,n.byteLength)}initializeTable(){pe(),this.tableLength=ue,this.currentBitLength=de}writeString(e){this.outData.writeBytes(e)}stringFromCode(e){return fe[e]}isInTable(e){return e<this.tableLength}addStringToTable(e){if(fe[this.tableLength++]=e,fe.length>4096)throw fe=[],Error(`LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).`);this.tableLength===he[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);let e=this.nextData>>this.nextBits-this.currentBitLength&me[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:e}};function _e(e){return new ge(e).decode()}var ve=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,ye=class extends x{constructor(){super(`standard`)}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let e=new Date,t=ve.exec(this.dateTime);if(t===null)throw Error(`invalid dateTime: ${this.dateTime}`);return e.setFullYear(Number(t[1]),Number(t[2])-1,Number(t[3])),e.setHours(Number(t[4]),Number(t[5]),Number(t[6])),e}get newSubfileType(){return this.get(`NewSubfileType`)}get imageWidth(){return this.get(`ImageWidth`)}get imageLength(){return this.get(`ImageLength`)}get bitsPerSample(){let e=this.get(`BitsPerSample`);return e&&typeof e!=`number`?e[0]:e}get alpha(){let e=this.extraSamples;return e?e[0]!==0:!1}get associatedAlpha(){let e=this.extraSamples;return e?e[0]===1:!1}get extraSamples(){return be(this.get(`ExtraSamples`))}get compression(){return this.get(`Compression`)||1}get type(){return this.get(`PhotometricInterpretation`)}get fillOrder(){return this.get(`FillOrder`)||1}get documentName(){return this.get(`DocumentName`)}get imageDescription(){return this.get(`ImageDescription`)}get stripOffsets(){return be(this.get(`StripOffsets`))}get orientation(){return this.get(`Orientation`)}get samplesPerPixel(){return this.get(`SamplesPerPixel`)||1}get rowsPerStrip(){return this.get(`RowsPerStrip`)||2**32-1}get stripByteCounts(){return be(this.get(`StripByteCounts`))}get minSampleValue(){return this.get(`MinSampleValue`)||0}get maxSampleValue(){return this.get(`MaxSampleValue`)||2**this.bitsPerSample-1}get xResolution(){return this.get(`XResolution`)}get yResolution(){return this.get(`YResolution`)}get planarConfiguration(){return this.get(`PlanarConfiguration`)||1}get resolutionUnit(){return this.get(`ResolutionUnit`)||2}get dateTime(){return this.get(`DateTime`)}get predictor(){return this.get(`Predictor`)||1}get sampleFormat(){return be(this.get(`SampleFormat`)||1)[0]}get sMinSampleValue(){return this.get(`SMinSampleValue`)||this.minSampleValue}get sMaxSampleValue(){return this.get(`SMaxSampleValue`)||this.maxSampleValue}get palette(){let e=2**this.bitsPerSample,t=this.get(`ColorMap`);if(!t)return;if(t.length!==3*e)throw Error(`ColorMap size must be ${e}`);let n=[];for(let r=0;r<e;r++)n.push([t[r],t[r+e],t[r+2*e]]);return n}get tileWidth(){return this.get(`TileWidth`)}get tileHeight(){return this.get(`TileLength`)}get tileOffsets(){return be(this.get(`TileOffsets`))}get tileByteCounts(){return be(this.get(`TileByteCounts`))}get tiled(){return this.tileWidth!==void 0&&this.tileHeight!==void 0&&this.tileOffsets!==void 0&&this.tileByteCounts!==void 0}};function be(e){return typeof e==`number`?[e]:e}var xe=4,Se=0,Ce=1,we=2;function Te(e){let t=e.length;for(;--t>=0;)e[t]=0}var Ee=0,De=1,Oe=2,ke=3,Ae=258,je=29,Me=256,Ne=Me+1+je,Pe=30,Fe=19,Ie=2*Ne+1,Le=15,Re=16,ze=7,Be=256,Ve=16,He=17,Ue=18,We=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ge=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ke=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Je=512,O=Array((Ne+2)*2);Te(O);var Ye=Array(Pe*2);Te(Ye);var Xe=Array(Je);Te(Xe);var Ze=Array(Ae-ke+1);Te(Ze);var Qe=Array(je);Te(Qe);var $e=Array(Pe);Te($e);function et(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var tt,nt,rt;function it(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var at=e=>e<256?Xe[e]:Xe[256+(e>>>7)],ot=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},k=(e,t,n)=>{e.bi_valid>Re-n?(e.bi_buf|=t<<e.bi_valid&65535,ot(e,e.bi_buf),e.bi_buf=t>>Re-e.bi_valid,e.bi_valid+=n-Re):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},A=(e,t,n)=>{k(e,n[t*2],n[t*2+1])},st=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},ct=e=>{e.bi_valid===16?(ot(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},lt=(e,t)=>{let n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length,l,u,d,f,p,m,h=0;for(f=0;f<=Le;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Ie;l++)u=e.heap[l],f=n[n[u*2+1]*2+1]+1,f>c&&(f=c,h++),n[u*2+1]=f,!(u>r)&&(e.bl_count[f]++,p=0,u>=s&&(p=o[u-s]),m=n[u*2],e.opt_len+=m*(f+p),a&&(e.static_len+=m*(i[u*2+1]+p)));if(h!==0){do{for(f=c-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,h-=2}while(h>0);for(f=c;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--l],!(d>r)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},ut=(e,t,n)=>{let r=Array(Le+1),i=0,a,o;for(a=1;a<=Le;a++)i=i+n[a-1]<<1,r[a]=i;for(o=0;o<=t;o++){let t=e[o*2+1];t!==0&&(e[o*2]=st(r[t]++,t))}},dt=()=>{let e,t,n,r,i,a=Array(Le+1);for(n=0,r=0;r<je-1;r++)for(Qe[r]=n,e=0;e<1<<We[r];e++)Ze[n++]=r;for(Ze[n-1]=r,i=0,r=0;r<16;r++)for($e[r]=i,e=0;e<1<<Ge[r];e++)Xe[i++]=r;for(i>>=7;r<Pe;r++)for($e[r]=i<<7,e=0;e<1<<Ge[r]-7;e++)Xe[256+ i++]=r;for(t=0;t<=Le;t++)a[t]=0;for(e=0;e<=143;)O[e*2+1]=8,e++,a[8]++;for(;e<=255;)O[e*2+1]=9,e++,a[9]++;for(;e<=279;)O[e*2+1]=7,e++,a[7]++;for(;e<=287;)O[e*2+1]=8,e++,a[8]++;for(ut(O,Ne+1,a),e=0;e<Pe;e++)Ye[e*2+1]=5,Ye[e*2]=st(e,5);tt=new et(O,We,Me+1,Ne,Le),nt=new et(Ye,Ge,0,Pe,Le),rt=new et([],Ke,0,Fe,ze)},ft=e=>{let t;for(t=0;t<Ne;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Pe;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Fe;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Be*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},pt=e=>{e.bi_valid>8?ot(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},mt=(e,t,n,r)=>{let i=t*2,a=n*2;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},ht=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&mt(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!mt(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},gt=(e,t,n)=>{let r,i,a=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+ a++]&255,r+=(e.pending_buf[e.sym_buf+ a++]&255)<<8,i=e.pending_buf[e.sym_buf+ a++],r===0?A(e,i,t):(o=Ze[i],A(e,o+Me+1,t),s=We[o],s!==0&&(i-=Qe[o],k(e,i,s)),r--,o=at(r),A(e,o,n),s=Ge[o],s!==0&&(r-=$e[o],k(e,r,s)));while(a<e.sym_next);A(e,Be,t)},_t=(e,t)=>{let n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,c=-1,l;for(e.heap_len=0,e.heap_max=Ie,o=0;o<a;o++)n[o*2]===0?n[o*2+1]=0:(e.heap[++e.heap_len]=c=o,e.depth[o]=0);for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[l*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)ht(e,n,o);l=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ht(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[l*2]=n[o*2]+n[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=l,e.heap[1]=l++,ht(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],lt(e,t),ut(n,c,e.bl_count)},vt=(e,t,n)=>{let r,i=-1,a,o=t[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],!(++s<c&&a===o)&&(s<l?e.bl_tree[a*2]+=s:a===0?s<=10?e.bl_tree[He*2]++:e.bl_tree[Ue*2]++:(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Ve*2]++),s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4))},yt=(e,t,n)=>{let r,i=-1,a,o=t[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<c&&a===o)){if(s<l)do A(e,a,e.bl_tree);while(--s!==0);else a===0?s<=10?(A(e,He,e.bl_tree),k(e,s-3,3)):(A(e,Ue,e.bl_tree),k(e,s-11,7)):(a!==i&&(A(e,a,e.bl_tree),s--),A(e,Ve,e.bl_tree),k(e,s-3,2));s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4)}},bt=e=>{let t;for(vt(e,e.dyn_ltree,e.l_desc.max_code),vt(e,e.dyn_dtree,e.d_desc.max_code),_t(e,e.bl_desc),t=Fe-1;t>=3&&e.bl_tree[qe[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},xt=(e,t,n,r)=>{let i;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),i=0;i<r;i++)k(e,e.bl_tree[qe[i]*2+1],3);yt(e,e.dyn_ltree,t-1),yt(e,e.dyn_dtree,n-1)},St=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Se;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Ce;for(n=32;n<Me;n++)if(e.dyn_ltree[n*2]!==0)return Ce;return Se},Ct=!1,wt=e=>{Ct||=(dt(),!0),e.l_desc=new it(e.dyn_ltree,tt),e.d_desc=new it(e.dyn_dtree,nt),e.bl_desc=new it(e.bl_tree,rt),e.bi_buf=0,e.bi_valid=0,ft(e)},Tt=(e,t,n,r)=>{k(e,(Ee<<1)+(r?1:0),3),pt(e),ot(e,n),ot(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Et={_tr_init:wt,_tr_stored_block:Tt,_tr_flush_block:(e,t,n,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===we&&(e.strm.data_type=St(e)),_t(e,e.l_desc),_t(e,e.d_desc),o=bt(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?Tt(e,t,n,r):e.strategy===xe||a===i?(k(e,(De<<1)+(r?1:0),3),gt(e,O,Ye)):(k(e,(Oe<<1)+(r?1:0),3),xt(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),gt(e,e.dyn_ltree,e.dyn_dtree)),ft(e),r&&pt(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+ e.sym_next++]=t,e.pending_buf[e.sym_buf+ e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+ e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Ze[n]+Me+1)*2]++,e.dyn_dtree[at(t)*2]++),e.sym_next===e.sym_end),_tr_align:e=>{k(e,De<<1,3),A(e,Be,O),ct(e)}},Dt=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0},Ot=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t})()),j=(e,t,n,r)=>{let i=Ot,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[(e^t[n])&255];return e^-1},kt={2:`need dictionary`,1:`stream end`,0:``,"-1":`file error`,"-2":`stream error`,"-3":`data error`,"-4":`insufficient memory`,"-5":`buffer error`,"-6":`incompatible version`},At={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:jt,_tr_stored_block:Mt,_tr_flush_block:Nt,_tr_tally:M,_tr_align:Pt}=Et,{Z_NO_FLUSH:N,Z_PARTIAL_FLUSH:Ft,Z_FULL_FLUSH:It,Z_FINISH:P,Z_BLOCK:Lt,Z_OK:F,Z_STREAM_END:Rt,Z_STREAM_ERROR:I,Z_DATA_ERROR:zt,Z_BUF_ERROR:Bt,Z_DEFAULT_COMPRESSION:Vt,Z_FILTERED:Ht,Z_HUFFMAN_ONLY:Ut,Z_RLE:Wt,Z_FIXED:Gt,Z_DEFAULT_STRATEGY:Kt,Z_UNKNOWN:qt,Z_DEFLATED:Jt}=At,Yt=9,Xt=15,Zt=8,Qt=286,$t=30,en=19,tn=2*Qt+1,nn=15,L=3,R=258,z=R+L+1,rn=32,an=42,on=57,sn=69,cn=73,ln=91,un=103,B=113,dn=666,V=1,fn=2,H=3,pn=4,mn=3,hn=(e,t)=>(e.msg=kt[t],t),gn=e=>e*2-(e>4?9:0),U=e=>{let t=e.length;for(;--t>=0;)e[t]=0},_n=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},W=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,G=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},K=(e,t)=>{Nt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,G(e.strm)},q=(e,t)=>{e.pending_buf[e.pending++]=t},vn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},yn=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=Dt(e.adler,t,i,n):e.state.wrap===2&&(e.adler=j(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},bn=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-z?e.strstart-(e.w_size-z):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+R,p=l[r+o-1],m=l[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(i=t,l[i+o]!==m||l[i+o-1]!==p||l[i]!==l[r]||l[++i]!==l[r+1])continue;r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(a=R-(f-r),r=f-R,a>o){if(e.match_start=t,o=a,a>=s)break;p=l[r+o-1],m=l[r+o]}}while((t=d[t&u])>c&&--n!==0);return o<=e.lookahead?o:e.lookahead},xn=e=>{let t=e.w_size,n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-z)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),_n(e),r+=t),e.strm.avail_in===0)break;if(n=yn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=L)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=W(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=W(e,e.ins_h,e.window[i+L-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<L)););}while(e.lookahead<z&&e.strm.avail_in!==0)},Sn=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<n&&(r===0&&t!==P||t===N||r!==i+e.strm.avail_in)))break;o=t===P&&r===i+e.strm.avail_in?1:0,Mt(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,G(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(yn(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?pn:t!==N&&t!==P&&e.strm.avail_in===0&&e.strstart===e.block_start?fn:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(yn(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,n=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=n||(i||t===P)&&t!==N&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=t===P&&e.strm.avail_in===0&&r===i?1:0,Mt(e,e.block_start,r,o),e.block_start+=r,G(e.strm)),o?H:V)},Cn=(e,t)=>{let n,r;for(;;){if(e.lookahead<z){if(xn(e),e.lookahead<z&&t===N)return V;if(e.lookahead===0)break}if(n=0,e.lookahead>=L&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+L-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-z&&(e.match_length=bn(e,n)),e.match_length>=L)if(r=M(e,e.strstart-e.match_start,e.match_length-L),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=L){e.match_length--;do e.strstart++,e.ins_h=W(e,e.ins_h,e.window[e.strstart+L-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=W(e,e.ins_h,e.window[e.strstart+1]);else r=M(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(K(e,!1),e.strm.avail_out===0))return V}return e.insert=e.strstart<L-1?e.strstart:L-1,t===P?(K(e,!0),e.strm.avail_out===0?H:pn):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?V:fn},wn=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<z){if(xn(e),e.lookahead<z&&t===N)return V;if(e.lookahead===0)break}if(n=0,e.lookahead>=L&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+L-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=L-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-z&&(e.match_length=bn(e,n),e.match_length<=5&&(e.strategy===Ht||e.match_length===L&&e.strstart-e.match_start>4096)&&(e.match_length=L-1)),e.prev_length>=L&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-L,r=M(e,e.strstart-1-e.prev_match,e.prev_length-L),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+L-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=L-1,e.strstart++,r&&(K(e,!1),e.strm.avail_out===0))return V}else if(e.match_available){if(r=M(e,0,e.window[e.strstart-1]),r&&K(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return V}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&=(r=M(e,0,e.window[e.strstart-1]),0),e.insert=e.strstart<L-1?e.strstart:L-1,t===P?(K(e,!0),e.strm.avail_out===0?H:pn):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?V:fn},Tn=(e,t)=>{let n,r,i,a,o=e.window;for(;;){if(e.lookahead<=R){if(xn(e),e.lookahead<=R&&t===N)return V;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=L&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+R;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=R-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=L?(n=M(e,1,e.match_length-L),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=M(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(K(e,!1),e.strm.avail_out===0))return V}return e.insert=0,t===P?(K(e,!0),e.strm.avail_out===0?H:pn):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?V:fn},En=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(xn(e),e.lookahead===0)){if(t===N)return V;break}if(e.match_length=0,n=M(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(K(e,!1),e.strm.avail_out===0))return V}return e.insert=0,t===P?(K(e,!0),e.strm.avail_out===0?H:pn):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?V:fn};function J(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Dn=[new J(0,0,0,0,Sn),new J(4,4,8,4,Cn),new J(4,5,16,8,Cn),new J(4,6,32,32,Cn),new J(4,4,16,16,wn),new J(8,16,32,32,wn),new J(8,16,128,128,wn),new J(8,32,128,256,wn),new J(32,128,258,1024,wn),new J(32,258,258,4096,wn)],On=e=>{e.window_size=2*e.w_size,U(e.head),e.max_lazy_match=Dn[e.level].max_lazy,e.good_match=Dn[e.level].good_length,e.nice_match=Dn[e.level].nice_length,e.max_chain_length=Dn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=L-1,e.match_available=0,e.ins_h=0};function kn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Jt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(tn*2),this.dyn_dtree=new Uint16Array((2*$t+1)*2),this.bl_tree=new Uint16Array((2*en+1)*2),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(nn+1),this.heap=new Uint16Array(2*Qt+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Qt+1),U(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var An=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==an&&t.status!==on&&t.status!==sn&&t.status!==cn&&t.status!==ln&&t.status!==un&&t.status!==B&&t.status!==dn?1:0},jn=e=>{if(An(e))return hn(e,I);e.total_in=e.total_out=0,e.data_type=qt;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?on:t.wrap?an:B,e.adler=t.wrap===2?0:1,t.last_flush=-2,jt(t),F},Mn=e=>{let t=jn(e);return t===F&&On(e.state),t},Nn=(e,t)=>An(e)||e.state.wrap!==2?I:(e.state.gzhead=t,F),Pn=(e,t,n,r,i,a)=>{if(!e)return I;let o=1;if(t===Vt&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>Yt||n!==Jt||r<8||r>15||t<0||t>9||a<0||a>Gt||r===8&&o!==1)return hn(e,I);r===8&&(r=9);let s=new kn;return e.state=s,s.strm=e,s.status=an,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+L-1)/L),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=n,Mn(e)},Fn={deflateInit:(e,t)=>Pn(e,t,Jt,Xt,Zt,Kt),deflateInit2:Pn,deflateReset:Mn,deflateResetKeep:jn,deflateSetHeader:Nn,deflate:(e,t)=>{if(An(e)||t>Lt||t<0)return e?hn(e,I):I;let n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===dn&&t!==P)return hn(e,e.avail_out===0?Bt:I);let r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(G(e),e.avail_out===0)return n.last_flush=-1,F}else if(e.avail_in===0&&gn(t)<=gn(r)&&t!==P)return hn(e,Bt);if(n.status===dn&&e.avail_in!==0)return hn(e,Bt);if(n.status===an&&n.wrap===0&&(n.status=B),n.status===an){let t=Jt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Ut||n.level<2?0:n.level<6?1:n.level===6?2:3,t|=r<<6,n.strstart!==0&&(t|=rn),t+=31-t%31,vn(n,t),n.strstart!==0&&(vn(n,e.adler>>>16),vn(n,e.adler&65535)),e.adler=1,n.status=B,G(e),n.pending!==0)return n.last_flush=-1,F}if(n.status===on){if(e.adler=0,q(n,31),q(n,139),q(n,8),n.gzhead)q(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),q(n,n.gzhead.time&255),q(n,n.gzhead.time>>8&255),q(n,n.gzhead.time>>16&255),q(n,n.gzhead.time>>24&255),q(n,n.level===9?2:n.strategy>=Ut||n.level<2?4:0),q(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(q(n,n.gzhead.extra.length&255),q(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=j(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=sn;else if(q(n,0),q(n,0),q(n,0),q(n,0),q(n,0),q(n,n.level===9?2:n.strategy>=Ut||n.level<2?4:0),q(n,mn),n.status=B,G(e),n.pending!==0)return n.last_flush=-1,F}if(n.status===sn){if(n.gzhead.extra){let t=n.pending,r=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,G(e),n.pending!==0)return n.last_flush=-1,F;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=cn}if(n.status===cn){if(n.gzhead.name){let t=n.pending,r;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t)),G(e),n.pending!==0)return n.last_flush=-1,F;t=0}r=n.gzindex<n.gzhead.name.length?n.gzhead.name.charCodeAt(n.gzindex++)&255:0,q(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=ln}if(n.status===ln){if(n.gzhead.comment){let t=n.pending,r;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t)),G(e),n.pending!==0)return n.last_flush=-1,F;t=0}r=n.gzindex<n.gzhead.comment.length?n.gzhead.comment.charCodeAt(n.gzindex++)&255:0,q(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>t&&(e.adler=j(e.adler,n.pending_buf,n.pending-t,t))}n.status=un}if(n.status===un){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(G(e),n.pending!==0))return n.last_flush=-1,F;q(n,e.adler&255),q(n,e.adler>>8&255),e.adler=0}if(n.status=B,G(e),n.pending!==0)return n.last_flush=-1,F}if(e.avail_in!==0||n.lookahead!==0||t!==N&&n.status!==dn){let r=n.level===0?Sn(n,t):n.strategy===Ut?En(n,t):n.strategy===Wt?Tn(n,t):Dn[n.level].func(n,t);if((r===H||r===pn)&&(n.status=dn),r===V||r===H)return e.avail_out===0&&(n.last_flush=-1),F;if(r===fn&&(t===Ft?Pt(n):t!==Lt&&(Mt(n,0,0,!1),t===It&&(U(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),G(e),e.avail_out===0))return n.last_flush=-1,F}return t===P?n.wrap<=0?Rt:(n.wrap===2?(q(n,e.adler&255),q(n,e.adler>>8&255),q(n,e.adler>>16&255),q(n,e.adler>>24&255),q(n,e.total_in&255),q(n,e.total_in>>8&255),q(n,e.total_in>>16&255),q(n,e.total_in>>24&255)):(vn(n,e.adler>>>16),vn(n,e.adler&65535)),G(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending===0?Rt:F):F},deflateEnd:e=>{if(An(e))return I;let t=e.state.status;return e.state=null,t===B?hn(e,zt):F},deflateSetDictionary:(e,t)=>{let n=t.length;if(An(e))return I;let r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==an||r.lookahead)return I;if(i===1&&(e.adler=Dt(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(U(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,xn(r);r.lookahead>=L;){let e=r.strstart,t=r.lookahead-(L-1);do r.ins_h=W(r,r.ins_h,r.window[e+L-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t);r.strstart=e,r.lookahead=L-1,xn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=L-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,F},deflateInfo:`pako deflate (from Nodeca project)`},In=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ln={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if(typeof n!=`object`)throw TypeError(n+`must be non-object`);for(let t in n)In(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}},Rn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rn=!1}var zn=new Uint8Array(256);for(let e=0;e<256;e++)zn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;zn[254]=zn[254]=1;var Bn=e=>{if(typeof TextEncoder==`function`&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t},Vn=(e,t)=>{if(t<65534&&e.subarray&&Rn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n=``;for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},Hn={string2buf:Bn,buf2string:(e,t)=>{let n=t||e.length;if(typeof TextDecoder==`function`&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i,a=Array(n*2);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=zn[t];if(o>4){a[i++]=65533,r+=o-1;continue}for(t&=o===2?31:o===3?15:7;o>1&&r<n;)t=t<<6|e[r++]&63,o--;if(o>1){a[i++]=65533;continue}t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|t&1023)}return Vn(a,i)},utf8border:(e,t)=>{t||=e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)==128;)n--;return n<0||n===0?t:n+zn[e[n]]>t?n:t}};function Un(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=``,this.state=null,this.data_type=2,this.adler=0}var Wn=Un,Gn=Object.prototype.toString,{Z_NO_FLUSH:Kn,Z_SYNC_FLUSH:qn,Z_FULL_FLUSH:Jn,Z_FINISH:Yn,Z_OK:Xn,Z_STREAM_END:Zn,Z_DEFAULT_COMPRESSION:Qn,Z_DEFAULT_STRATEGY:$n,Z_DEFLATED:er}=At;function tr(e){this.options=Ln.assign({level:Qn,method:er,chunkSize:16384,windowBits:15,memLevel:8,strategy:$n},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new Wn,this.strm.avail_out=0;let n=Fn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Xn)throw Error(kt[n]);if(t.header&&Fn.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e=typeof t.dictionary==`string`?Hn.string2buf(t.dictionary):Gn.call(t.dictionary)===`[object ArrayBuffer]`?new Uint8Array(t.dictionary):t.dictionary,n=Fn.deflateSetDictionary(this.strm,e),n!==Xn)throw Error(kt[n]);this._dict_set=!0}}tr.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i,a;if(this.ended)return!1;for(a=t===~~t?t:t===!0?Yn:Kn,typeof e==`string`?n.input=Hn.string2buf(e):Gn.call(e)===`[object ArrayBuffer]`?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===qn||a===Jn)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Fn.deflate(n,a),i===Zn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Fn.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Xn;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0},tr.prototype.onData=function(e){this.chunks.push(e)},tr.prototype.onEnd=function(e){e===Xn&&(this.result=Ln.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function nr(e,t){let n=new tr(t);if(n.push(e,!0),n.err)throw n.msg||kt[n.err];return n.result}function rr(e,t){return t||={},t.raw=!0,nr(e,t)}function ir(e,t){return t||={},t.gzip=!0,nr(e,t)}var ar={Deflate:tr,deflate:nr,deflateRaw:rr,gzip:ir,constants:At},or=16209,sr=16191,cr=function(e,t){let n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E=e.state;n=e.next_in,w=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=E.dmax,c=E.wsize,l=E.whave,u=E.wnext,d=E.window,f=E.hold,p=E.bits,m=E.lencode,h=E.distcode,g=(1<<E.lenbits)-1,_=(1<<E.distbits)-1;top:do{p<15&&(f+=w[n++]<<p,p+=8,f+=w[n++]<<p,p+=8),v=m[f&g];dolen:for(;;){if(y=v>>>24,f>>>=y,p-=y,y=v>>>16&255,y===0)T[i++]=v&65535;else if(y&16){b=v&65535,y&=15,y&&(p<y&&(f+=w[n++]<<p,p+=8),b+=f&(1<<y)-1,f>>>=y,p-=y),p<15&&(f+=w[n++]<<p,p+=8,f+=w[n++]<<p,p+=8),v=h[f&_];dodist:for(;;){if(y=v>>>24,f>>>=y,p-=y,y=v>>>16&255,y&16){if(x=v&65535,y&=15,p<y&&(f+=w[n++]<<p,p+=8,p<y&&(f+=w[n++]<<p,p+=8)),x+=f&(1<<y)-1,x>s){e.msg=`invalid distance too far back`,E.mode=or;break top}if(f>>>=y,p-=y,y=i-a,x>y){if(y=x-y,y>l&&E.sane){e.msg=`invalid distance too far back`,E.mode=or;break top}if(S=0,C=d,u===0){if(S+=c-y,y<b){b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}}else if(u<y){if(S+=c+u-y,y-=u,y<b){b-=y;do T[i++]=d[S++];while(--y);if(S=0,u<b){y=u,b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}}}else if(S+=u-y,y<b){b-=y;do T[i++]=d[S++];while(--y);S=i-x,C=T}for(;b>2;)T[i++]=C[S++],T[i++]=C[S++],T[i++]=C[S++],b-=3;b&&(T[i++]=C[S++],b>1&&(T[i++]=C[S++]))}else{S=i-x;do T[i++]=T[S++],T[i++]=T[S++],T[i++]=T[S++],b-=3;while(b>2);b&&(T[i++]=T[S++],b>1&&(T[i++]=T[S++]))}}else if(y&64){e.msg=`invalid distance code`,E.mode=or;break top}else{v=h[(v&65535)+(f&(1<<y)-1)];continue dodist}break}}else if(y&64)if(y&32){E.mode=sr;break top}else{e.msg=`invalid literal/length code`,E.mode=or;break top}else{v=m[(v&65535)+(f&(1<<y)-1)];continue dolen}break}}while(n<r&&i<o);b=p>>3,n-=b,p-=b<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=i<o?257+(o-i):257-(i-o),E.hold=f,E.bits=p},lr=15,ur=852,dr=592,fr=0,pr=1,mr=2,hr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yr=(e,t,n,r,i,a,o,s)=>{let c=s.bits,l=0,u=0,d=0,f=0,p=0,m=0,h=0,g=0,_=0,v=0,y,b,x,S,C,w=null,T,E=new Uint16Array(lr+1),D=new Uint16Array(lr+1),ee=null,te,ne,re;for(l=0;l<=lr;l++)E[l]=0;for(u=0;u<r;u++)E[t[n+u]]++;for(p=c,f=lr;f>=1&&E[f]===0;f--);if(p>f&&(p=f),f===0)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(d=1;d<f&&E[d]===0;d++);for(p<d&&(p=d),g=1,l=1;l<=lr;l++)if(g<<=1,g-=E[l],g<0)return-1;if(g>0&&(e===fr||f!==1))return-1;for(D[1]=0,l=1;l<lr;l++)D[l+1]=D[l]+E[l];for(u=0;u<r;u++)t[n+u]!==0&&(o[D[t[n+u]]++]=u);if(e===fr?(w=ee=o,T=20):e===pr?(w=hr,ee=gr,T=257):(w=_r,ee=vr,T=0),v=0,u=0,l=d,C=a,m=p,h=0,x=-1,_=1<<p,S=_-1,e===pr&&_>ur||e===mr&&_>dr)return 1;for(;;){te=l-h,o[u]+1<T?(ne=0,re=o[u]):o[u]>=T?(ne=ee[o[u]-T],re=w[o[u]-T]):(ne=96,re=0),y=1<<l-h,b=1<<m,d=b;do b-=y,i[C+(v>>h)+b]=te<<24|ne<<16|re|0;while(b!==0);for(y=1<<l-1;v&y;)y>>=1;if(y===0?v=0:(v&=y-1,v+=y),u++,--E[l]===0){if(l===f)break;l=t[n+o[u]]}if(l>p&&(v&S)!==x){for(h===0&&(h=p),C+=d,m=l-h,g=1<<m;m+h<f&&(g-=E[m+h],!(g<=0));)m++,g<<=1;if(_+=1<<m,e===pr&&_>ur||e===mr&&_>dr)return 1;x=v&S,i[x]=p<<24|m<<16|C-a|0}}return v!==0&&(i[C+v]=l-h<<24|4194304),s.bits=p,0},br=0,xr=1,Sr=2,{Z_FINISH:Cr,Z_BLOCK:wr,Z_TREES:Tr,Z_OK:Er,Z_STREAM_END:Dr,Z_NEED_DICT:Or,Z_STREAM_ERROR:Y,Z_DATA_ERROR:kr,Z_MEM_ERROR:Ar,Z_BUF_ERROR:jr,Z_DEFLATED:Mr}=At,Nr=16180,Pr=16181,Fr=16182,Ir=16183,Lr=16184,Rr=16185,zr=16186,Br=16187,Vr=16188,Hr=16189,Ur=16190,X=16191,Wr=16192,Gr=16193,Kr=16194,qr=16195,Jr=16196,Yr=16197,Xr=16198,Zr=16199,Qr=16200,$r=16201,ei=16202,ti=16203,ni=16204,ri=16205,ii=16206,ai=16207,oi=16208,Z=16209,si=16210,ci=16211,li=852,ui=592,di=15,fi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function pi(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var mi=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<Nr||t.mode>ci?1:0},hi=e=>{if(mi(e))return Y;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=``,t.wrap&&(e.adler=t.wrap&1),t.mode=Nr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(li),t.distcode=t.distdyn=new Int32Array(ui),t.sane=1,t.back=-1,Er},gi=e=>{if(mi(e))return Y;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,hi(e)},_i=(e,t)=>{let n;if(mi(e))return Y;let r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Y:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,gi(e))},vi=(e,t)=>{if(!e)return Y;let n=new pi;e.state=n,n.strm=e,n.window=null,n.mode=Nr;let r=_i(e,t);return r!==Er&&(e.state=null),r},yi=e=>vi(e,di),bi=!0,xi,Si,Ci=e=>{if(bi){xi=new Int32Array(512),Si=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(yr(xr,e.lens,0,288,xi,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;yr(Sr,e.lens,0,32,Si,0,e.work,{bits:5}),bi=!1}e.lencode=xi,e.lenbits=9,e.distcode=Si,e.distbits=5},wi=(e,t,n,r)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Q={inflateReset:gi,inflateReset2:_i,inflateResetKeep:hi,inflateInit:yi,inflateInit2:vi,inflate:(e,t)=>{let n,r,i,a,o,s,c,l,u,d,f,p,m,h,g=0,_,v,y,b,x,S,C,w,T=new Uint8Array(4),E,D,ee=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mi(e)||!e.output||!e.input&&e.avail_in!==0)return Y;n=e.state,n.mode===X&&(n.mode=Wr),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,d=s,f=c,w=Er;inf_leave:for(;;)switch(n.mode){case Nr:if(n.wrap===0){n.mode=Wr;break}for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=l&255,T[1]=l>>>8&255,n.check=j(n.check,T,2,0),l=0,u=0,n.mode=Pr;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg=`incorrect header check`,n.mode=Z;break}if((l&15)!==Mr){e.msg=`unknown compression method`,n.mode=Z;break}if(l>>>=4,u-=4,C=(l&15)+8,n.wbits===0&&(n.wbits=C),C>15||C>n.wbits){e.msg=`invalid window size`,n.mode=Z;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?Hr:X,l=0,u=0;break;case Pr:for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==Mr){e.msg=`unknown compression method`,n.mode=Z;break}if(n.flags&57344){e.msg=`unknown header flags set`,n.mode=Z;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=j(n.check,T,2,0)),l=0,u=0,n.mode=Fr;case Fr:for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,n.check=j(n.check,T,4,0)),l=0,u=0,n.mode=Ir;case Ir:for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=j(n.check,T,2,0)),l=0,u=0,n.mode=Lr;case Lr:if(n.flags&1024){for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=j(n.check,T,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=Rr;case Rr:if(n.flags&1024&&(p=n.length,p>s&&(p=s),p&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+p),C)),n.flags&512&&n.wrap&4&&(n.check=j(n.check,r,p,a)),s-=p,a+=p,n.length-=p),n.length))break inf_leave;n.length=0,n.mode=zr;case zr:if(n.flags&2048){if(s===0)break inf_leave;p=0;do C=r[a+ p++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=j(n.check,r,p,a)),s-=p,a+=p,C)break inf_leave}else n.head&&(n.head.name=null);n.length=0,n.mode=Br;case Br:if(n.flags&4096){if(s===0)break inf_leave;p=0;do C=r[a+ p++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=j(n.check,r,p,a)),s-=p,a+=p,C)break inf_leave}else n.head&&(n.head.comment=null);n.mode=Vr;case Vr:if(n.flags&512){for(;u<16;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg=`header crc mismatch`,n.mode=Z;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=X;break;case Hr:for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}e.adler=n.check=fi(l),l=0,u=0,n.mode=Ur;case Ur:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,Or;e.adler=n.check=1,n.mode=X;case X:if(t===wr||t===Tr)break inf_leave;case Wr:if(n.last){l>>>=u&7,u-=u&7,n.mode=ii;break}for(;u<3;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}switch(n.last=l&1,l>>>=1,--u,l&3){case 0:n.mode=Gr;break;case 1:if(Ci(n),n.mode=Zr,t===Tr){l>>>=2,u-=2;break inf_leave}break;case 2:n.mode=Jr;break;case 3:e.msg=`invalid block type`,n.mode=Z}l>>>=2,u-=2;break;case Gr:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if((l&65535)!=(l>>>16^65535)){e.msg=`invalid stored block lengths`,n.mode=Z;break}if(n.length=l&65535,l=0,u=0,n.mode=Kr,t===Tr)break inf_leave;case Kr:n.mode=qr;case qr:if(p=n.length,p){if(p>s&&(p=s),p>c&&(p=c),p===0)break inf_leave;i.set(r.subarray(a,a+p),o),s-=p,a+=p,c-=p,o+=p,n.length-=p;break}n.mode=X;break;case Jr:for(;u<14;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg=`too many length or distance symbols`,n.mode=Z;break}n.have=0,n.mode=Yr;case Yr:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.lens[ee[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[ee[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},w=yr(br,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,w){e.msg=`invalid code lengths set`,n.mode=Z;break}n.have=0,n.mode=Xr;case Xr:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[l&(1<<n.lenbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(y<16)l>>>=_,u-=_,n.lens[n.have++]=y;else{if(y===16){for(D=_+2;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(l>>>=_,u-=_,n.have===0){e.msg=`invalid bit length repeat`,n.mode=Z;break}C=n.lens[n.have-1],p=3+(l&3),l>>>=2,u-=2}else if(y===17){for(D=_+3;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=_,u-=_,C=0,p=3+(l&7),l>>>=3,u-=3}else{for(D=_+7;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=_,u-=_,C=0,p=11+(l&127),l>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg=`invalid bit length repeat`,n.mode=Z;break}for(;p--;)n.lens[n.have++]=C}}if(n.mode===Z)break;if(n.lens[256]===0){e.msg=`invalid code -- missing end-of-block`,n.mode=Z;break}if(n.lenbits=9,E={bits:n.lenbits},w=yr(xr,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,w){e.msg=`invalid literal/lengths set`,n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},w=yr(Sr,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,w){e.msg=`invalid distances set`,n.mode=Z;break}if(n.mode=Zr,t===Tr)break inf_leave;case Zr:n.mode=Qr;case Qr:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,cr(e,f),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===X&&(n.back=-1);break}for(n.back=0;g=n.lencode[l&(1<<n.lenbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(v&&!(v&240)){for(b=_,x=v,S=y;g=n.lencode[S+((l&(1<<b+x)-1)>>b)],_=g>>>24,v=g>>>16&255,y=g&65535,!(b+_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,n.back+=b}if(l>>>=_,u-=_,n.back+=_,n.length=y,v===0){n.mode=ri;break}if(v&32){n.back=-1,n.mode=X;break}if(v&64){e.msg=`invalid literal/length code`,n.mode=Z;break}n.extra=v&15,n.mode=$r;case $r:if(n.extra){for(D=n.extra;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ei;case ei:for(;g=n.distcode[l&(1<<n.distbits)-1],_=g>>>24,v=g>>>16&255,y=g&65535,!(_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(!(v&240)){for(b=_,x=v,S=y;g=n.distcode[S+((l&(1<<b+x)-1)>>b)],_=g>>>24,v=g>>>16&255,y=g&65535,!(b+_<=u);){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,n.back+=b}if(l>>>=_,u-=_,n.back+=_,v&64){e.msg=`invalid distance code`,n.mode=Z;break}n.offset=y,n.extra=v&15,n.mode=ti;case ti:if(n.extra){for(D=n.extra;u<D;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg=`invalid distance too far back`,n.mode=Z;break}n.mode=ni;case ni:if(c===0)break inf_leave;if(p=f-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg=`invalid distance too far back`,n.mode=Z;break}p>n.wnext?(p-=n.wnext,m=n.wsize-p):m=n.wnext-p,p>n.length&&(p=n.length),h=n.window}else h=i,m=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do i[o++]=h[m++];while(--p);n.length===0&&(n.mode=Qr);break;case ri:if(c===0)break inf_leave;i[o++]=n.length,c--,n.mode=Qr;break;case ii:if(n.wrap){for(;u<32;){if(s===0)break inf_leave;s--,l|=r[a++]<<u,u+=8}if(f-=c,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?j(n.check,i,f,o-f):Dt(n.check,i,f,o-f)),f=c,n.wrap&4&&(n.flags?l:fi(l))!==n.check){e.msg=`incorrect data check`,n.mode=Z;break}l=0,u=0}n.mode=ai;case ai:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break inf_leave;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg=`incorrect length check`,n.mode=Z;break}l=0,u=0}n.mode=oi;case oi:w=Dr;break inf_leave;case Z:w=kr;break inf_leave;case si:return Ar;case ci:default:return Y}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<Z&&(n.mode<ii||t!==Cr))&&wi(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?j(n.check,i,f,e.next_out-f):Dt(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===Zr||n.mode===Kr?256:0),(d===0&&f===0||t===Cr)&&w===Er&&(w=jr),w},inflateEnd:e=>{if(mi(e))return Y;let t=e.state;return t.window&&=null,e.state=null,Er},inflateGetHeader:(e,t)=>{if(mi(e))return Y;let n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Er):Y},inflateSetDictionary:(e,t)=>{let n=t.length,r,i,a;return mi(e)||(r=e.state,r.wrap!==0&&r.mode!==Ur)?Y:r.mode===Ur&&(i=1,i=Dt(i,t,n,0),i!==r.check)?kr:(a=wi(e,t,n,n),a?(r.mode=si,Ar):(r.havedict=1,Er))},inflateInfo:`pako inflate (from Nodeca project)`};function Ti(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=``,this.comment=``,this.hcrc=0,this.done=!1}var Ei=Ti,Di=Object.prototype.toString,{Z_NO_FLUSH:Oi,Z_FINISH:ki,Z_OK:Ai,Z_STREAM_END:ji,Z_NEED_DICT:Mi,Z_STREAM_ERROR:Ni,Z_DATA_ERROR:Pi,Z_MEM_ERROR:Fi}=At;function Ii(e){this.options=Ln.assign({chunkSize:1024*64,windowBits:15,to:``},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new Wn,this.strm.avail_out=0;let n=Q.inflateInit2(this.strm,t.windowBits);if(n!==Ai||(this.header=new Ei,Q.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary==`string`?t.dictionary=Hn.string2buf(t.dictionary):Di.call(t.dictionary)===`[object ArrayBuffer]`&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Q.inflateSetDictionary(this.strm,t.dictionary),n!==Ai))))throw Error(kt[n])}Ii.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,a,o,s;if(this.ended)return!1;for(o=t===~~t?t:t===!0?ki:Oi,Di.call(e)===`[object ArrayBuffer]`?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Q.inflate(n,o),a===Mi&&i&&(a=Q.inflateSetDictionary(n,i),a===Ai?a=Q.inflate(n,o):a===Pi&&(a=Mi));n.avail_in>0&&a===ji&&n.state.wrap>0&&e[n.next_in]!==0;)Q.inflateReset(n),a=Q.inflate(n,o);switch(a){case Ni:case Pi:case Mi:case Fi:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===ji))if(this.options.to===`string`){let e=Hn.utf8border(n.output,n.next_out),t=n.next_out-e,i=Hn.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Ai&&s===0)){if(a===ji)return a=Q.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},Ii.prototype.onData=function(e){this.chunks.push(e)},Ii.prototype.onEnd=function(e){e===Ai&&(this.options.to===`string`?this.result=this.chunks.join(``):this.result=Ln.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Li(e,t){let n=new Ii(t);if(n.push(e),n.err)throw n.msg||kt[n.err];return n.result}function Ri(e,t){return t||={},t.raw=!0,Li(e,t)}var zi={Inflate:Ii,inflate:Li,inflateRaw:Ri,ungzip:Li,constants:At},{Deflate:Bi,deflate:Vi,deflateRaw:Hi,gzip:Ui}=ar,{Inflate:Wi,inflate:Gi,inflateRaw:Ki,ungzip:qi}=zi,Ji=Gi;function Yi(e){let t=Ji(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));return new DataView(t.buffer,t.byteOffset,t.byteLength)}var Xi={ignoreImageData:!1},Zi=class e extends g{_nextIFD;constructor(e){super(e),this._nextIFD=0}get isMultiPage(){let e=0;for(this.decodeHeader();this._nextIFD;)if(e++,this.decodeIFD({ignoreImageData:!0},!0),e===2)return!0;if(e===1)return!1;throw $(`ifdCount`,e)}get pageCount(){let e=0;for(this.decodeHeader();this._nextIFD;)e++,this.decodeIFD({ignoreImageData:!0},!0);if(e>0)return e;throw $(`ifdCount`,e)}decode(e={}){let{pages:t}=e;$i(t);let n=t?Math.max(...t):1/0;e={...Xi,...e};let r=[];this.decodeHeader();let i=0;for(;this._nextIFD;){if(t){if(t.includes(i)?r.push(this.decodeIFD(e,!0)):this.decodeIFD({ignoreImageData:!0},!0),i===n)break}else r.push(this.decodeIFD(e,!0));i++}if(i<n&&n!==1/0)throw RangeError(`Index ${n} is out of bounds. The stack only contains ${i} images.`);return r}decodeHeader(){let e=this.readUint16();if(e===18761)this.setLittleEndian();else if(e===19789)this.setBigEndian();else throw Error(`invalid byte order: 0x${e.toString(16)}`);if(this.readUint16()!==42)throw Error(`not a TIFF file`);this._nextIFD=this.readUint32()}decodeIFD(e,t){this.seek(this._nextIFD);let n;if(t)n=new ye;else{if(!e.kind)throw Error(`kind is missing`);n=new x(e.kind)}let r=this.readUint16();for(let e=0;e<r;e++)this.decodeIFDEntry(n);if(!e.ignoreImageData){if(!(n instanceof ye))throw Error(`must be a tiff ifd`);this.decodeImageData(n)}return this._nextIFD=this.readUint32(),n}decodeIFDEntry(e){let t=this.offset,n=this.readUint16(),r=this.readUint16(),i=this.readUint32();if(r<1||r>12){this.skip(4);return}C(r,i)>4&&this.seek(this.readUint32());let a=w(this,r,i);if(e.fields.set(n,a),n===34665||n===34853){let t=this.offset,r=`exif`;n===34665?r=`exif`:n===34853&&(r=`gps`),this._nextIFD=a,e[r]=this.decodeIFD({kind:r,ignoreImageData:!0},!1),this.offset=t}this.seek(t),this.skip(12)}decodeImageData(e){let t=e.orientation;if(t&&t!==1)throw $(`orientation`,t);switch(e.type){case 0:case 1:case 2:case 3:e.tiled?this.readTileData(e):this.readStripData(e);break;default:throw $(`image type`,e.type)}if(this.applyPredictor(e),this.convertAlpha(e),e.bitsPerSample===1&&this.split1BitData(e),e.type===0){let t=2**e.bitsPerSample-1;for(let n=0;n<e.data.length;n++)e.data[n]=t-e.data[n]}}split1BitData(e){let{imageWidth:t,imageLength:n,samplesPerPixel:r}=e,i=new Uint8Array(n*t*r),a=Math.ceil(t*r/8),o=0;for(let s=0;s<n;s++){let n=s*a;for(let a=0;a<t*r;a++){let t=n+Math.floor(a/8),r=7-a%8,s=e.data[t]>>r&1;i[o++]=s}}e.data=i}static uncompress(e,t=1){switch(t){case 1:return e;case 5:return _e(e);case 8:case 32946:return Yi(e);case 2:throw $(`Compression`,`CCITT Group 3`);case 32773:throw $(`Compression`,`PackBits`);default:throw $(`Compression`,t)}}createSampleReader(e,t,n){if(t===8||t===1)return(e,t)=>e.getUint8(t);if(t===16)return(e,t)=>e.getUint16(2*t,n);if(t===32&&e===3)return(e,t)=>e.getFloat32(4*t,n);if(t===64&&e===3)return(e,t)=>e.getFloat64(8*t,n);throw $(`bitDepth`,t)}readStripData(t){let n=t.width,r=t.height,i=t.bitsPerSample===1?Math.ceil(n*t.samplesPerPixel/8)*r:n*t.samplesPerPixel*r,a=t.stripOffsets,o=t.stripByteCounts||_(t),s=this.isLittleEndian(),c=t.bitsPerSample===1?Math.ceil(n*t.samplesPerPixel/8)*t.rowsPerStrip:n*t.samplesPerPixel*t.rowsPerStrip,l=this.createSampleReader(t.sampleFormat,t.bitsPerSample,s),u=Qi(i,t.bitsPerSample,t.sampleFormat),d=0;for(let n=0;n<a.length;n++){let r=new DataView(this.buffer,this.byteOffset+a[n],o[n]),s=e.uncompress(r,t.compression),f=Math.min(c,i-d);for(let e=0;e<f;++e){let t=l(s,e);u[d+e]=t}d+=f}t.data=u}readTileData(t){if(!t.tileWidth||!t.tileHeight)return;let n=t.width,r=t.height,i=t.bitsPerSample===1?Math.ceil(n*t.samplesPerPixel/8)*r:n*r*t.samplesPerPixel,a=t.tileWidth,o=t.tileHeight,s=Math.ceil(n/a),c=Math.ceil(r/o),l=t.tileOffsets,u=t.tileByteCounts,d=this.isLittleEndian(),f=this.createSampleReader(t.sampleFormat,t.bitsPerSample,d),p=Qi(i,t.bitsPerSample,t.sampleFormat);for(let i=0;i<s;++i)for(let d=0;d<c;++d){let c=d*s+i,m=new DataView(this.buffer,this.byteOffset+l[c],u[c]),h=e.uncompress(m,t.compression);if(t.bitsPerSample===1){let e=Math.ceil(n/8),t=Math.ceil(a/8);for(let n=0;n<o&&d*o+n<r;n++){let r=d*o+n,s=n*t,c=r*e+Math.floor(i*a/8),l=Math.min(t,e-Math.floor(i*a/8));for(let e=0;e<l;e++)p[c+e]=f(h,s+e)}}else for(let e=0;e<o;e++)for(let s=0;s<a;s++){let c=i*a+s,l=d*o+e;if(c>=n||l>=r)continue;let u=f(h,e*a+s),m=(l*n+c)*t.samplesPerPixel;p[m]=u}}t.data=p}applyPredictor(e){let t=e.bitsPerSample;switch(e.predictor){case 1:break;case 2:if(t===8)v(e.data,e.width,e.components);else if(t===16)y(e.data,e.width,e.components);else throw Error(`Horizontal differencing is only supported for images with a bit depth of ${t}`);break;default:throw Error(`invalid predictor: ${e.predictor}`)}}convertAlpha(e){if(e.alpha&&e.associatedAlpha){let{data:t,components:n,maxSampleValue:r}=e;for(let e=0;e<t.length;e+=n){let i=t[e+n-1];for(let a=0;a<n-1;a++)t[e+a]=Math.round(t[e+a]*r/i)}}}};function Qi(e,t,n){if(t===8||t===1)return new Uint8Array(e);if(t===16)return new Uint16Array(e);if(t===32&&n===3)return new Float32Array(e);if(t===64&&n===3)return new Float64Array(e);throw $(`bit depth / sample format`,`${t} / ${n}`)}function $(e,t){return Error(`Unsupported ${e}: ${t}`)}function $i(e){if(e){for(let t of e)if(t<0||!Number.isInteger(t))throw RangeError(`Index ${t} is invalid. Must be a positive integer.`)}}function ea(e,t){return new Zi(e).decode(t)}function ta(e){return new Zi(e).isMultiPage}function na(e){return new Zi(e).pageCount}var ra={exif:n,gps:a,standard:c};export{ye as TiffIfd,ea as decode,ta as isMultiPage,na as pageCount,ra as tagNames};